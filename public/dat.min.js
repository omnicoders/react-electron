!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Dat=e()}}(function(){return function e(t,n,r){function i(s,u){if(!n[s]){if(!t[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(o)return o(s,!0);var f=new Error("Cannot find module '"+s+"'");throw f.code="MODULE_NOT_FOUND",f}var c=n[s]={exports:{}};t[s][0].call(c.exports,function(e){var n=t[s][1][e];return i(n?n:e)},c,c.exports,e,t,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(e,t){(function(e){function n(e){this._db=e,this._operations=[],this._written=!1}n.prototype._checkWritten=function(){if(this._written)throw new Error("write() already called on this batch")},n.prototype.put=function(e,t){this._checkWritten();var n=this._db._checkKey(e,"key",this._db._isBuffer);if(n)throw n;return this._db._isBuffer(e)||(e=String(e)),this._db._isBuffer(t)||(t=String(t)),"function"==typeof this._put?this._put(e,t):this._operations.push({type:"put",key:e,value:t}),this},n.prototype.del=function(e){this._checkWritten();var t=this._db._checkKey(e,"key",this._db._isBuffer);if(t)throw t;return this._db._isBuffer(e)||(e=String(e)),"function"==typeof this._del?this._del(e):this._operations.push({type:"del",key:e}),this},n.prototype.clear=function(){return this._checkWritten(),this._operations=[],"function"==typeof this._clear&&this._clear(),this},n.prototype.write=function(t,n){if(this._checkWritten(),"function"==typeof t&&(n=t),"function"!=typeof n)throw new Error("write() requires a callback argument");return"object"!=typeof t&&(t={}),this._written=!0,"function"==typeof this._write?this._write(n):"function"==typeof this._db._batch?this._db._batch(this._operations,t,n):void e.nextTick(n)},t.exports=n}).call(this,e("_process"))},{_process:154}],2:[function(e,t){(function(e){function n(e){this.db=e,this._ended=!1,this._nexting=!1}n.prototype.next=function(t){var n=this;if("function"!=typeof t)throw new Error("next() requires a callback argument");return n._ended?t(new Error("cannot call next() after end()")):n._nexting?t(new Error("cannot call next() before previous next() has completed")):(n._nexting=!0,"function"==typeof n._next?n._next(function(){n._nexting=!1,t.apply(null,arguments)}):void e.nextTick(function(){n._nexting=!1,t()}))},n.prototype.end=function(t){if("function"!=typeof t)throw new Error("end() requires a callback argument");return this._ended?t(new Error("end() already called on iterator")):(this._ended=!0,"function"==typeof this._end?this._end(t):void e.nextTick(t))},t.exports=n}).call(this,e("_process"))},{_process:154}],3:[function(e,t){(function(n,r){function i(e){if(!arguments.length||void 0===e)throw new Error("constructor requires at least a location argument");if("string"!=typeof e)throw new Error("constructor requires a location string argument");this.location=e,this.status="new"}var o=e("xtend"),s=e("./abstract-iterator"),u=e("./abstract-chained-batch");i.prototype.open=function(e,t){var n=this,i=this.status;if("function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("open() requires a callback argument");"object"!=typeof e&&(e={}),e.createIfMissing=0!=e.createIfMissing,e.errorIfExists=!!e.errorIfExists,"function"==typeof this._open?(this.status="opening",this._open(e,function(e){return e?(n.status=i,t(e)):(n.status="open",void t())})):(this.status="open",r.nextTick(t))},i.prototype.close=function(e){var t=this,n=this.status;if("function"!=typeof e)throw new Error("close() requires a callback argument");"function"==typeof this._close?(this.status="closing",this._close(function(r){return r?(t.status=n,e(r)):(t.status="closed",void e())})):(this.status="closed",r.nextTick(e))},i.prototype.get=function(e,t,n){var i;if("function"==typeof t&&(n=t),"function"!=typeof n)throw new Error("get() requires a callback argument");return(i=this._checkKey(e,"key",this._isBuffer))?n(i):(this._isBuffer(e)||(e=String(e)),"object"!=typeof t&&(t={}),t.asBuffer=0!=t.asBuffer,"function"==typeof this._get?this._get(e,t,n):void r.nextTick(function(){n(new Error("NotFound"))}))},i.prototype.put=function(e,t,n,i){var o;if("function"==typeof n&&(i=n),"function"!=typeof i)throw new Error("put() requires a callback argument");return(o=this._checkKey(e,"key",this._isBuffer))?i(o):(this._isBuffer(e)||(e=String(e)),null==t||this._isBuffer(t)||r.browser||(t=String(t)),"object"!=typeof n&&(n={}),"function"==typeof this._put?this._put(e,t,n,i):void r.nextTick(i))},i.prototype.del=function(e,t,n){var i;if("function"==typeof t&&(n=t),"function"!=typeof n)throw new Error("del() requires a callback argument");return(i=this._checkKey(e,"key",this._isBuffer))?n(i):(this._isBuffer(e)||(e=String(e)),"object"!=typeof t&&(t={}),"function"==typeof this._del?this._del(e,t,n):void r.nextTick(n))},i.prototype.batch=function(e,t,n){if(!arguments.length)return this._chainedBatch();if("function"==typeof t&&(n=t),"function"==typeof e&&(n=e),"function"!=typeof n)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return n(new Error("batch(array) requires an array argument"));t&&"object"==typeof t||(t={});for(var i,o,s=0,u=e.length;u>s;s++)if(i=e[s],"object"==typeof i){if(o=this._checkKey(i.type,"type",this._isBuffer))return n(o);if(o=this._checkKey(i.key,"key",this._isBuffer))return n(o)}return"function"==typeof this._batch?this._batch(e,t,n):void r.nextTick(n)},i.prototype.approximateSize=function(e,t,n){if(null==e||null==t||"function"==typeof e||"function"==typeof t)throw new Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof n)throw new Error("approximateSize() requires a callback argument");return this._isBuffer(e)||(e=String(e)),this._isBuffer(t)||(t=String(t)),"function"==typeof this._approximateSize?this._approximateSize(e,t,n):void r.nextTick(function(){n(null,0)})},i.prototype._setupIteratorOptions=function(e){var t=this;return e=o(e),["start","end","gt","gte","lt","lte"].forEach(function(n){e[n]&&t._isBuffer(e[n])&&0===e[n].length&&delete e[n]}),e.reverse=!!e.reverse,e.keys=0!=e.keys,e.values=0!=e.values,e.limit="limit"in e?e.limit:-1,e.keyAsBuffer=0!=e.keyAsBuffer,e.valueAsBuffer=0!=e.valueAsBuffer,e},i.prototype.iterator=function(e){return"object"!=typeof e&&(e={}),e=this._setupIteratorOptions(e),"function"==typeof this._iterator?this._iterator(e):new s(this)},i.prototype._chainedBatch=function(){return new u(this)},i.prototype._isBuffer=function(e){return n.isBuffer(e)},i.prototype._checkKey=function(e,t){if(null===e||void 0===e)return new Error(t+" cannot be `null` or `undefined`");if(this._isBuffer(e)){if(0===e.length)return new Error(t+" cannot be an empty Buffer")}else if(""===String(e))return new Error(t+" cannot be an empty String")},t.exports=i}).call(this,{isBuffer:e("../is-buffer/index.js")},e("_process"))},{"../is-buffer/index.js":76,"./abstract-chained-batch":1,"./abstract-iterator":2,_process:154,xtend:230}],4:[function(e,t,n){n.AbstractLevelDOWN=e("./abstract-leveldown"),n.AbstractIterator=e("./abstract-iterator"),n.AbstractChainedBatch=e("./abstract-chained-batch"),n.isLevelDOWN=e("./is-leveldown")},{"./abstract-chained-batch":1,"./abstract-iterator":2,"./abstract-leveldown":3,"./is-leveldown":5}],5:[function(e,t){function n(e){return e&&"object"==typeof e?Object.keys(r.prototype).filter(function(e){return"_"!=e[0]&&"approximateSize"!=e}).every(function(t){return"function"==typeof e[t]}):!1}var r=e("./abstract-leveldown");t.exports=n},{"./abstract-leveldown":3}],6:[function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function i(e){return 3*e.length/4-r(e)}function o(e){var t,n,i,o,s,u,a=e.length;s=r(e),u=new l(3*a/4-s),i=s>0?a-4:a;var f=0;for(t=0,n=0;i>t;t+=4,n+=3)o=c[e.charCodeAt(t)]<<18|c[e.charCodeAt(t+1)]<<12|c[e.charCodeAt(t+2)]<<6|c[e.charCodeAt(t+3)],u[f++]=o>>16&255,u[f++]=o>>8&255,u[f++]=255&o;return 2===s?(o=c[e.charCodeAt(t)]<<2|c[e.charCodeAt(t+1)]>>4,u[f++]=255&o):1===s&&(o=c[e.charCodeAt(t)]<<10|c[e.charCodeAt(t+1)]<<4|c[e.charCodeAt(t+2)]>>2,u[f++]=o>>8&255,u[f++]=255&o),u}function s(e){return f[e>>18&63]+f[e>>12&63]+f[e>>6&63]+f[63&e]}function u(e,t,n){for(var r,i=[],o=t;n>o;o+=3)r=(e[o]<<16)+(e[o+1]<<8)+e[o+2],i.push(s(r));return i.join("")}function a(e){for(var t,n=e.length,r=n%3,i="",o=[],s=16383,a=0,c=n-r;c>a;a+=s)o.push(u(e,a,a+s>c?c:a+s));return 1===r?(t=e[n-1],i+=f[t>>2],i+=f[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=f[t>>10],i+=f[t>>4&63],i+=f[t<<2&63],i+="="),o.push(i),o.join("")}n.byteLength=i,n.toByteArray=o,n.fromByteArray=a;for(var f=[],c=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",d=0,p=h.length;p>d;++d)f[d]=h[d],c[h.charCodeAt(d)]=d;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},{}],7:[function(e,t,n){(function(r,i){function o(t){"string"==typeof t?t={bindings:t}:t||(t={}),t.__proto__=l,t.module_root||(t.module_root=n.getRoot(n.getFileName())),".node"!=u.extname(t.bindings)&&(t.bindings+=".node");for(var r,i,o,s=[],f=0,c=t["try"].length;c>f;f++){r=a.apply(null,t["try"][f].map(function(e){return t[e]||e})),s.push(r);try{return i=t.path?e.resolve(r):e(r),t.path||(i.path=r),i}catch(h){if(!/not find/i.test(h.message))throw h}}throw o=new Error("Could not locate the bindings file. Tried:\n"+s.map(function(e){return t.arrow+e}).join("\n")),o.tries=s,o}var s=e("fs"),u=e("path"),a=u.join,f=u.dirname,c=s.existsSync||u.existsSync,l={arrow:r.env.NODE_BINDINGS_ARROW||" â†’ ",compiled:r.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:r.platform,arch:r.arch,version:r.versions.node,bindings:"bindings.node","try":[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"]]};t.exports=n=o,n.getFileName=function(e){var t,n=Error.prepareStackTrace,r=Error.stackTraceLimit,o={};return Error.stackTraceLimit=10,Error.prepareStackTrace=function(n,r){for(var o=0,s=r.length;s>o;o++)if(t=r[o].getFileName(),t!==i){if(!e)return;if(t!==e)return}},Error.captureStackTrace(o),o.stack,Error.prepareStackTrace=n,Error.stackTraceLimit=r,t},n.getRoot=function(e){for(var t,n=f(e);;){if("."===n&&(n=r.cwd()),c(a(n,"package.json"))||c(a(n,"node_modules")))return n;if(t===n)throw new Error('Could not find module root given file: "'+e+'". Do you have a `package.json` file? ');t=n,n=a(n,"..")}}}).call(this,e("_process"),"/node_modules/bindings/bindings.js")},{_process:154,fs:11,path:152}],8:[function(e,t,n){(function(t){function r(e,t){for(var n=2,r=0,i=0;i<e.length;i++)for(var o=e[i],u=0;8>u;u++){var a=o&128>>u?1:0;a===n?r++:(r&&s(n,8*i+u-r,r,t),r=1,n=a)}for(r&&s(n,8*e.length-r,r,t);7&t.offset;)t.bitfield?f(t.bitfield,t.offset++,a):t.offset++;return l.encodingLength(t.deltas.length/2)+t.deltasBytes+t.offset/8}function i(e){return r(e,new c(0))}function o(e,n,i){var s=new c(e.length),u=r(e,s);n||(n=t(u)),i||(i=0),l.encode(s.deltas.length/2,n,i),i+=l.encode.bytes;for(var a=0;a<s.deltas.length;a++)l.encode(s.deltas[a],n,i),i+=l.encode.bytes;return o.bytes=u,s.bitfield&&s.bitfield.copy(n,i),n.slice(0,u)}function s(e,t,n,r){var i=t-r.deltasAcc,o=l.encodingLength(i)+l.encodingLength(n);if(n>8*o+1)r.deltasBytes+=o,r.deltasAcc+=i+n,r.deltas&&r.deltas.push(i,n),r.bitfield?f(r.bitfield,r.offset++,e):r.offset++;else for(var s=0;n>s;s++)r.bitfield?f(r.bitfield,r.offset++,e):r.offset++}function u(e,n){n||(n=0);var r=0,i=2*l.decode(e,n);if(n+=l.decode.bytes,i>2*e.length||!(i>=0))throw new Error("Invalid delta count");for(var o=new Array(i),s=0;s<o.length;s++)o[s]=l.decode(e,n),n+=l.decode.bytes,r+=o[s];r+=8*(e.length-n),7&r&&(r=r-(7&r)+8);var c=t(r/8),h=8*n,d=8*e.length,p=0;for(n=0,i=0;d>h;){for(var g=i<o.length?p+o[i++]:-1;d>h&&(-1===g||g>n);)f(c,n++,a(e,h++));if(g>-1){var b=a(e,h++),y=o[i++];p=g+y;for(var v=0;y>v;v++)f(c,n++,b)}}if(i<o.length)throw new Error("Missing deltas");for(;7&n;)n--;return u.bytes=n/8,c.slice(0,u.bytes)}function a(e,t){var n=t>>3,r=7&t;return e[n]&128>>r?1:0}function f(e,t,n){var r=t>>3,i=7&t,o=128>>i,s=e[r];e[r]=n?s|o:s&~o}function c(e){this.bitfield=e?t(e):null,this.offset=0,this.deltas=[],this.deltasAcc=0,this.deltasBytes=0}var l=e("varint");n.encodingLength=i,n.encode=o,n.decode=u,o.bytes=u.bytes=0}).call(this,e("buffer").Buffer)},{buffer:14,varint:225}],9:[function(e,t){(function(n){function r(e){if(!(this instanceof r))return new r(e);if(this._bufs=[],this.length=0,"function"==typeof e){this._callback=e;var t=function(e){this._callback&&(this._callback(e),this._callback=null)}.bind(this);this.on("pipe",function(e){e.on("error",t)}),this.on("unpipe",function(e){e.removeListener("error",t)})}else n.isBuffer(e)?this.append(e):Array.isArray(e)&&e.forEach(function(e){n.isBuffer(e)&&this.append(e)}.bind(this));i.call(this)}var i=e("readable-stream/duplex"),o=e("util");o.inherits(r,i),r.prototype._offset=function(e){for(var t,n=0,r=0;r<this._bufs.length;r++){if(t=n+this._bufs[r].length,t>e)return[r,e-n];n=t}},r.prototype.append=function(e){var t=n.isBuffer(e)||e instanceof r;return"number"==typeof e&&(e=e.toString()),e instanceof r?(this._bufs.push.apply(this._bufs,e._bufs),this.length+=e.length):(this._bufs.push(t?e:new n(e)),this.length+=e.length),this},r.prototype._write=function(e,t,n){this.append(e),n&&n()},r.prototype._read=function(e){return this.length?(e=Math.min(e,this.length),this.push(this.slice(0,e)),void this.consume(e)):this.push(null)},r.prototype.end=function(e){i.prototype.end.call(this,e),this._callback&&(this._callback(null,this.slice()),this._callback=null)},r.prototype.get=function(e){return this.slice(e,e+1)[0]},r.prototype.slice=function(e,t){return this.copy(null,0,e,t)},r.prototype.copy=function(e,t,r,i){if(("number"!=typeof r||0>r)&&(r=0),("number"!=typeof i||i>this.length)&&(i=this.length),r>=this.length)return e||new n(0);if(0>=i)return e||new n(0);var o,s,u=!!e,a=this._offset(r),f=i-r,c=f,l=u&&t||0,h=a[1];if(0===r&&i==this.length){if(!u)return n.concat(this._bufs);for(s=0;s<this._bufs.length;s++)this._bufs[s].copy(e,l),l+=this._bufs[s].length;return e}if(c<=this._bufs[a[0]].length-h)return u?this._bufs[a[0]].copy(e,t,h,h+c):this._bufs[a[0]].slice(h,h+c);for(u||(e=new n(f)),s=a[0];s<this._bufs.length;s++){if(o=this._bufs[s].length-h,!(c>o)){this._bufs[s].copy(e,l,h,h+c);break}this._bufs[s].copy(e,l,h),l+=o,c-=o,h&&(h=0)}return e},r.prototype.toString=function(e,t,n){return this.slice(t,n).toString(e)},r.prototype.consume=function(e){for(;this._bufs.length;){if(!(e>=this._bufs[0].length)){this._bufs[0]=this._bufs[0].slice(e),this.length-=e;break}e-=this._bufs[0].length,this.length-=this._bufs[0].length,this._bufs.shift()}return this},r.prototype.duplicate=function(){for(var e=0,t=new r;e<this._bufs.length;e++)t.append(this._bufs[e]);return t},r.prototype.destroy=function(){this._bufs.length=0,this.length=0,this.push(null)},function(){var e={readDoubleBE:8,readDoubleLE:8,readFloatBE:4,readFloatLE:4,readInt32BE:4,readInt32LE:4,readUInt32BE:4,readUInt32LE:4,readInt16BE:2,readInt16LE:2,readUInt16BE:2,readUInt16LE:2,readInt8:1,readUInt8:1};for(var t in e)!function(t){r.prototype[t]=function(n){return this.slice(n,n+e[t])[t](0)}}(t)}(),t.exports=r}).call(this,e("buffer").Buffer)},{buffer:14,"readable-stream/duplex":172,util:222}],10:[function(){},{}],11:[function(e,t,n){arguments[4][10][0].apply(n,arguments)},{dup:10}],12:[function(e,t){(function(e){"use strict";t.exports=function(t,n){if(!e.isBuffer(t)||!e.isBuffer(n))throw new TypeError("Arguments must be Buffers");if(t===n)return!0;if("function"==typeof t.equals)return t.equals(n);if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==n[r])return!1;return!0}}).call(this,{isBuffer:e("../is-buffer/index.js")})},{"../is-buffer/index.js":76}],13:[function(e,t,n){(function(t){"use strict";var r=e("buffer"),i=r.Buffer,o=r.SlowBuffer,s=r.kMaxLength||2147483647;n.alloc=function(e,t,n){if("function"==typeof i.alloc)return i.alloc(e,t,n);if("number"==typeof n)throw new TypeError("encoding must not be number");if("number"!=typeof e)throw new TypeError("size must be a number");if(e>s)throw new RangeError("size is too large");var r=n,o=t;void 0===o&&(r=void 0,o=0);var u=new i(e);if("string"==typeof o)for(var a=new i(o,r),f=a.length,c=-1;++c<e;)u[c]=a[c%f];else u.fill(o);return u},n.allocUnsafe=function(e){if("function"==typeof i.allocUnsafe)return i.allocUnsafe(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>s)throw new RangeError("size is too large");return new i(e)},n.from=function(e,n,r){if("function"==typeof i.from&&(!t.Uint8Array||Uint8Array.from!==i.from))return i.from(e,n,r);if("number"==typeof e)throw new TypeError('"value" argument must not be a number');if("string"==typeof e)return new i(e,n);if("undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer){var o=n;if(1===arguments.length)return new i(e);"undefined"==typeof o&&(o=0);var s=r;if("undefined"==typeof s&&(s=e.byteLength-o),o>=e.byteLength)throw new RangeError("'offset' is out of bounds");if(s>e.byteLength-o)throw new RangeError("'length' is out of bounds");return new i(e.slice(o,o+s))}if(i.isBuffer(e)){var u=new i(e.length);return e.copy(u,0,0,e.length),u}if(e){if(Array.isArray(e)||"undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return new i(e);if("Buffer"===e.type&&Array.isArray(e.data))return new i(e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")},n.allocUnsafeSlow=function(e){if("function"==typeof i.allocUnsafeSlow)return i.allocUnsafeSlow(e);if("number"!=typeof e)throw new TypeError("size must be a number");if(e>=s)throw new RangeError("size is too large");return new o(e)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{buffer:14}],14:[function(e,t,n){(function(t){"use strict";function r(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(t){return!1}}function i(){return s.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(e,t){if(i()<t)throw new RangeError("Invalid typed array length");return s.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=s.prototype):(null===e&&(e=new s(t)),e.length=t),e}function s(e,t,n){if(!(s.TYPED_ARRAY_SUPPORT||this instanceof s))return new s(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return c(this,e)}return u(this,e,t,n)}function u(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?d(e,t,n,r):"string"==typeof t?l(e,t,n):p(e,t)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(0>e)throw new RangeError('"size" argument must not be negative')}function f(e,t,n,r){return a(t),0>=t?o(e,t):void 0!==n?"string"==typeof r?o(e,t).fill(n,r):o(e,t).fill(n):o(e,t)}function c(e,t){if(a(t),e=o(e,0>t?0:0|g(t)),!s.TYPED_ARRAY_SUPPORT)for(var n=0;t>n;++n)e[n]=0;return e}function l(e,t,n){if(("string"!=typeof n||""===n)&&(n="utf8"),!s.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|y(t,n);e=o(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function h(e,t){var n=t.length<0?0:0|g(t.length);e=o(e,n);for(var r=0;n>r;r+=1)e[r]=255&t[r];return e}function d(e,t,n,r){if(t.byteLength,0>n||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),s.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=s.prototype):e=h(e,t),e}function p(e,t){if(s.isBuffer(t)){var n=0|g(t.length);return e=o(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||X(t.length)?o(e,0):h(e,t);if("Buffer"===t.type&&$(t.data))return h(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(e){if(e>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|e}function b(e){return+e!=e&&(e=0),s.alloc(+e)}function y(e,t){if(s.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Y(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return G(e).length;default:if(r)return Y(e).length;t=(""+t).toLowerCase(),r=!0}}function v(e,t,n){var r=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),0>=n)return"";if(n>>>=0,t>>>=0,t>=n)return"";for(e||(e="utf8");;)switch(e){case"hex":return I(this,t,n);case"utf8":case"utf-8":return R(this,t,n);case"ascii":return C(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return j(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function _(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:-2147483648>n&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),0>n&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(0>n){if(!i)return-1;n=0}if("string"==typeof t&&(t=s.from(t,r)),s.isBuffer(t))return 0===t.length?-1:w(e,t,n,r,i);if("number"==typeof t)return t=255&t,s.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):w(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function w(e,t,n,r,i){function o(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}var s=1,u=e.length,a=t.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,u/=2,a/=2,n/=2}var f;if(i){var c=-1;for(f=n;u>f;f++)if(o(e,f)===o(t,-1===c?0:f-c)){if(-1===c&&(c=f),f-c+1===a)return c*s}else-1!==c&&(f-=f-c),c=-1}else for(n+a>u&&(n=u-a),f=n;f>=0;f--){for(var l=!0,h=0;a>h;h++)if(o(e,f+h)!==o(t,h)){l=!1;break}if(l)return f}return-1}function k(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=t.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;r>s;++s){var u=parseInt(t.substr(2*s,2),16);if(isNaN(u))return s;e[n+s]=u}return s}function E(e,t,n,r){return Z(Y(t,e.length-n),e,n,r)}function x(e,t,n,r){return Z(H(t),e,n,r)}function S(e,t,n,r){return x(e,t,n,r)}function B(e,t,n,r){return Z(G(t),e,n,r)}function A(e,t,n,r){return Z(V(t,e.length-n),e,n,r)}function j(e,t,n){return J.fromByteArray(0===t&&n===e.length?e:e.slice(t,n))}function R(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;n>i;){var o=e[i],s=null,u=o>239?4:o>223?3:o>191?2:1;if(n>=i+u){var a,f,c,l;switch(u){case 1:128>o&&(s=o);break;case 2:a=e[i+1],128===(192&a)&&(l=(31&o)<<6|63&a,l>127&&(s=l));break;case 3:a=e[i+1],f=e[i+2],128===(192&a)&&128===(192&f)&&(l=(15&o)<<12|(63&a)<<6|63&f,l>2047&&(55296>l||l>57343)&&(s=l));break;case 4:a=e[i+1],f=e[i+2],c=e[i+3],128===(192&a)&&128===(192&f)&&128===(192&c)&&(l=(15&o)<<18|(63&a)<<12|(63&f)<<6|63&c,l>65535&&1114112>l&&(s=l))}}null===s?(s=65533,u=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),i+=u}return M(r)}function M(e){var t=e.length;if(ee>=t)return String.fromCharCode.apply(String,e);for(var n="",r=0;t>r;)n+=String.fromCharCode.apply(String,e.slice(r,r+=ee));return n}function C(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;++i)r+=String.fromCharCode(127&e[i]);return r}function T(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;n>i;++i)r+=String.fromCharCode(e[i]);return r}function I(e,t,n){var r=e.length;(!t||0>t)&&(t=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=t;n>o;++o)i+=F(e[o]);return i}function O(e,t,n){for(var r=e.slice(t,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function L(e,t,n){if(e%1!==0||0>e)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function D(e,t,n,r,i,o){if(!s.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||o>t)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function N(e,t,n,r){0>t&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-n,2);o>i;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function U(e,t,n,r){0>t&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-n,4);o>i;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function P(e,t,n,r){if(n+r>e.length)throw new RangeError("Index out of range");if(0>n)throw new RangeError("Index out of range")}function q(e,t,n,r,i){return i||P(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,n,r,23,4),n+4}function W(e,t,n,r,i){return i||P(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,n,r,52,8),n+8}function z(e){if(e=K(e).replace(te,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function K(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function F(e){return 16>e?"0"+e.toString(16):e.toString(16)}function Y(e,t){t=t||1/0;for(var n,r=e.length,i=null,o=[],s=0;r>s;++s){if(n=e.charCodeAt(s),n>55295&&57344>n){if(!i){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(56320>n){(t-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,128>n){if((t-=1)<0)break;o.push(n)}else if(2048>n){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(1114112>n))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function H(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function V(e,t){for(var n,r,i,o=[],s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function G(e){return J.toByteArray(z(e))}function Z(e,t,n,r){for(var i=0;r>i&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function X(e){return e!==e}var J=e("base64-js"),Q=e("ieee754"),$=e("isarray");n.Buffer=s,n.SlowBuffer=b,n.INSPECT_MAX_BYTES=50,s.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:r(),n.kMaxLength=i(),s.poolSize=8192,s._augment=function(e){return e.__proto__=s.prototype,e},s.from=function(e,t,n){return u(null,e,t,n)},s.TYPED_ARRAY_SUPPORT&&(s.prototype.__proto__=Uint8Array.prototype,s.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&s[Symbol.species]===s&&Object.defineProperty(s,Symbol.species,{value:null,configurable:!0})),s.alloc=function(e,t,n){return f(null,e,t,n)},s.allocUnsafe=function(e){return c(null,e)},s.allocUnsafeSlow=function(e){return c(null,e)},s.isBuffer=function(e){return!(null==e||!e._isBuffer)},s.compare=function(e,t){if(!s.isBuffer(e)||!s.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);o>i;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return r>n?-1:n>r?1:0},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!$(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=s.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!s.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},s.byteLength=y,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;e>t;t+=2)_(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;e>t;t+=4)_(this,t,t+3),_(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;e>t;t+=8)_(this,t,t+7),_(this,t+1,t+6),_(this,t+2,t+5),_(this,t+3,t+4);return this},s.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?R(this,0,e):v.apply(this,arguments)},s.prototype.equals=function(e){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:0===s.compare(this,e)},s.prototype.inspect=function(){var e="",t=n.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},s.prototype.compare=function(e,t,n,r,i){if(!s.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),0>t||n>e.length||0>r||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var o=i-r,u=n-t,a=Math.min(o,u),f=this.slice(r,i),c=e.slice(t,n),l=0;a>l;++l)if(f[l]!==c[l]){o=f[l],u=c[l];break}return u>o?-1:o>u?1:0},s.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},s.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},s.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},s.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t=0|t,isFinite(n)?(n=0|n,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(0>n||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return k(this,e,t,n);case"utf8":case"utf-8":return E(this,e,t,n);case"ascii":return x(this,e,t,n);case"latin1":case"binary":return S(this,e,t,n);case"base64":return B(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ee=4096;s.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),e>t&&(t=e);var r;if(s.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=s.prototype;else{var i=t-e;r=new s(i,void 0);for(var o=0;i>o;++o)r[o]=this[o+e]}return r},s.prototype.readUIntLE=function(e,t,n){
e=0|e,t=0|t,n||L(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return r},s.prototype.readUIntBE=function(e,t,n){e=0|e,t=0|t,n||L(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},s.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},s.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,n){e=0|e,t=0|t,n||L(e,t,this.length);for(var r=this[e],i=1,o=0;++o<t&&(i*=256);)r+=this[e+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},s.prototype.readIntBE=function(e,t,n){e=0|e,t=0|t,n||L(e,t,this.length);for(var r=t,i=1,o=this[e+--r];r>0&&(i*=256);)o+=this[e+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*t)),o},s.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},s.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},s.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),Q.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),Q.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),Q.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),Q.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t=0|t,n=0|n,!r){var i=Math.pow(2,8*n)-1;D(this,e,t,n,i,0)}var o=1,s=0;for(this[t]=255&e;++s<n&&(o*=256);)this[t+s]=e/o&255;return t+n},s.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t=0|t,n=0|n,!r){var i=Math.pow(2,8*n)-1;D(this,e,t,n,i,0)}var o=n-1,s=1;for(this[t+o]=255&e;--o>=0&&(s*=256);)this[t+o]=e/s&255;return t+n},s.prototype.writeUInt8=function(e,t,n){return e=+e,t=0|t,n||D(this,e,t,1,255,0),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=0|t,n||D(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},s.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=0|t,n||D(this,e,t,2,65535,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},s.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=0|t,n||D(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):U(this,e,t,!0),t+4},s.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=0|t,n||D(this,e,t,4,4294967295,0),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},s.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=0,s=1,u=0;for(this[t]=255&e;++o<n&&(s*=256);)0>e&&0===u&&0!==this[t+o-1]&&(u=1),this[t+o]=(e/s>>0)-u&255;return t+n},s.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t=0|t,!r){var i=Math.pow(2,8*n-1);D(this,e,t,n,i-1,-i)}var o=n-1,s=1,u=0;for(this[t+o]=255&e;--o>=0&&(s*=256);)0>e&&0===u&&0!==this[t+o+1]&&(u=1),this[t+o]=(e/s>>0)-u&255;return t+n},s.prototype.writeInt8=function(e,t,n){return e=+e,t=0|t,n||D(this,e,t,1,127,-128),s.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),0>e&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,n){return e=+e,t=0|t,n||D(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):N(this,e,t,!0),t+2},s.prototype.writeInt16BE=function(e,t,n){return e=+e,t=0|t,n||D(this,e,t,2,32767,-32768),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):N(this,e,t,!1),t+2},s.prototype.writeInt32LE=function(e,t,n){return e=+e,t=0|t,n||D(this,e,t,4,2147483647,-2147483648),s.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):U(this,e,t,!0),t+4},s.prototype.writeInt32BE=function(e,t,n){return e=+e,t=0|t,n||D(this,e,t,4,2147483647,-2147483648),0>e&&(e=4294967295+e+1),s.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},s.prototype.writeFloatLE=function(e,t,n){return q(this,e,t,!0,n)},s.prototype.writeFloatBE=function(e,t,n){return q(this,e,t,!1,n)},s.prototype.writeDoubleLE=function(e,t,n){return W(this,e,t,!0,n)},s.prototype.writeDoubleBE=function(e,t,n){return W(this,e,t,!1,n)},s.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&n>r&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&t>n&&r>t)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(1e3>o||!s.TYPED_ARRAY_SUPPORT)for(i=0;o>i;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},s.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);256>i&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!s.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e=255&e);if(0>t||this.length<t||this.length<n)throw new RangeError("Out of range index");if(t>=n)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;n>o;++o)this[o]=e;else{var u=s.isBuffer(e)?e:Y(new s(e,r).toString()),a=u.length;for(o=0;n-t>o;++o)this[o+t]=u[o%a]}return this};var te=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":6,ieee754:73,isarray:79}],15:[function(e,t){(function(n){var r=e("readable-stream"),i=e("inherits"),o=new n([0]),s=function(e,t,n){return this instanceof s?("function"==typeof e&&(n=t,t=e,e={}),r.Writable.call(this,e),this._worker=t,this._flush=n,void(this.destroyed=!1)):new s(e,t,n)};i(s,r.Writable),s.obj=function(e,t,n){return"function"==typeof e?s.obj(null,e,t):(e||(e={}),e.objectMode=!0,new s(e,t,n))},s.prototype.end=function(e,t,n){return this._flush?"function"==typeof e?this.end(null,null,e):"function"==typeof t?this.end(e,null,t):(e&&this.write(e),this._writableState.ending||this.write(o),r.Writable.prototype.end.call(this,n)):r.Writable.prototype.end.apply(this,arguments)},s.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,e&&this.emit("error"),this.emit("close"))},s.prototype._write=function(e,t,n){e===o?this._flush(n):this._worker([e],n)},s.prototype._writev=function(e,t){var n=e.length;if(e[e.length-1].chunk===o&&(t=this._flusher(t),!--n))return t();for(var r=new Array(n),i=0;n>i;i++)r[i]=e[i].chunk;this._worker(r,t)},s.prototype._flusher=function(e){var t=this;return function(n){return n?e(n):void t._flush(e)}},t.exports=s}).call(this,e("buffer").Buffer)},{buffer:14,inherits:75,"readable-stream":22}],16:[function(e,t){"use strict";function n(e){return this instanceof n?(a.call(this,e),f.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",r)):new n(e)}function r(){this.allowHalfOpen||this._writableState.ended||s(i,this)}function i(e){e.end()}var o=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t};t.exports=n;var s=e("process-nextick-args"),u=e("core-util-is");u.inherits=e("inherits");var a=e("./_stream_readable"),f=e("./_stream_writable");u.inherits(n,a);for(var c=o(f.prototype),l=0;l<c.length;l++){var h=c[l];n.prototype[h]||(n.prototype[h]=f.prototype[h])}},{"./_stream_readable":18,"./_stream_writable":20,"core-util-is":24,inherits:75,"process-nextick-args":153}],17:[function(e,t){"use strict";function n(e){return this instanceof n?void r.call(this,e):new n(e)}t.exports=n;var r=e("./_stream_transform"),i=e("core-util-is");i.inherits=e("inherits"),i.inherits(n,r),n.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":19,"core-util-is":24,inherits:75}],18:[function(e,t){(function(n){"use strict";function r(e,t,n){return"function"==typeof e.prependListener?e.prependListener(t,n):void(e._events&&e._events[t]?C(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n))}function i(t,n){R=R||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof R&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.buffer=new q,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(P||(P=e("string_decoder/").StringDecoder),this.decoder=new P(t.encoding),this.encoding=t.encoding)}function o(t){return R=R||e("./_stream_duplex"),this instanceof o?(this._readableState=new i(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),void T.call(this)):new o(t)}function s(e,t,n,r,i){var o=c(t,n);if(o)e.emit("error",o);else if(null===n)t.reading=!1,l(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var s=new Error("stream.push() after EOF");e.emit("error",s)}else if(t.endEmitted&&i){var a=new Error("stream.unshift() after end event");e.emit("error",a)}else{var f;!t.decoder||i||r||(n=t.decoder.write(n),f=!t.objectMode&&0===n.length),i||(t.reading=!1),f||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&h(e))),p(e,t)}else i||(t.reading=!1);return u(t)}function u(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function a(e){return e>=W?e=W:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function f(e,t){return 0>=e||0===t.length&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=a(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function c(e,t){var n=null;return O.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function l(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,h(e)}}function h(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(U("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?M(d,e):d(e))}function d(e){U("emit readable"),e.emit("readable"),m(e)}function p(e,t){t.readingMore||(t.readingMore=!0,M(g,e,t))}function g(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(U("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function b(e){return function(){var t=e._readableState;U("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&I(e,"data")&&(t.flowing=!0,m(e))}}function y(e){U("readable nexttick read 0"),e.read(0)}function v(e,t){t.resumeScheduled||(t.resumeScheduled=!0,M(_,e,t))}function _(e,t){t.reading||(U("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),m(e),t.flowing&&!t.reading&&e.read(0)}function m(e){var t=e._readableState;for(U("flow",t.flowing);t.flowing&&null!==e.read(););}function w(e,t){if(0===t.length)return null;var n;return t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.head.data:t.buffer.concat(t.length),t.buffer.clear()):n=k(e,t.buffer,t.decoder),n}function k(e,t,n){var r;return e<t.head.data.length?(r=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):r=e===t.head.data.length?t.shift():n?E(e,t):x(e,t),r}function E(e,t){var n=t.head,r=1,i=n.data;for(e-=i.length;n=n.next;){var o=n.data,s=e>o.length?o.length:e;if(i+=s===o.length?o:o.slice(0,e),e-=s,0===e){s===o.length?(++r,t.head=n.next?n.next:t.tail=null):(t.head=n,n.data=o.slice(s));break}++r}return t.length-=r,i}function x(e,t){var n=L.allocUnsafe(e),r=t.head,i=1;for(r.data.copy(n),e-=r.data.length;r=r.next;){var o=r.data,s=e>o.length?o.length:e;if(o.copy(n,n.length-e,0,s),e-=s,0===e){s===o.length?(++i,t.head=r.next?r.next:t.tail=null):(t.head=r,r.data=o.slice(s));break}++i}return t.length-=i,n}function S(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,M(B,t,e))}function B(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function A(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function j(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}t.exports=o;var R,M=e("process-nextick-args"),C=e("isarray");o.ReadableState=i;var T,I=(e("events").EventEmitter,function(e,t){return e.listeners(t).length});!function(){try{T=e("stream")}catch(t){}finally{T||(T=e("events").EventEmitter)}}();var O=e("buffer").Buffer,L=e("buffer-shims"),D=e("core-util-is");D.inherits=e("inherits");var N=e("util"),U=void 0;U=N&&N.debuglog?N.debuglog("stream"):function(){};var P,q=e("./internal/streams/BufferList");D.inherits(o,T),o.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding,t!==n.encoding&&(e=L.from(e,t),t="")),s(this,n,e,t,!1)},o.prototype.unshift=function(e){var t=this._readableState;return s(this,t,e,"",!0)},o.prototype.isPaused=function(){return this._readableState.flowing===!1},o.prototype.setEncoding=function(t){return P||(P=e("string_decoder/").StringDecoder),this._readableState.decoder=new P(t),this._readableState.encoding=t,this};var W=8388608;o.prototype.read=function(e){U("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return U("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?S(this):h(this),null;if(e=f(e,t),0===e&&t.ended)return 0===t.length&&S(this),null;var r=t.needReadable;U("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,U("length less than watermark",r)),t.ended||t.reading?(r=!1,U("reading or ended",r)):r&&(U("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=f(n,t)));var i;return i=e>0?w(e,t):null,null===i?(t.needReadable=!0,e=0):t.length-=e,0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&S(this)),null!==i&&this.emit("data",i),i},o.prototype._read=function(){this.emit("error",new Error("_read() is not implemented"))},o.prototype.pipe=function(e,t){function i(e){U("onunpipe"),e===h&&s()}function o(){U("onend"),e.end()}function s(){U("cleanup"),e.removeListener("close",f),e.removeListener("finish",c),e.removeListener("drain",y),e.removeListener("error",a),e.removeListener("unpipe",i),h.removeListener("end",o),h.removeListener("end",s),h.removeListener("data",u),v=!0,!d.awaitDrain||e._writableState&&!e._writableState.needDrain||y()}function u(t){U("ondata"),_=!1;var n=e.write(t);!1!==n||_||((1===d.pipesCount&&d.pipes===e||d.pipesCount>1&&-1!==j(d.pipes,e))&&!v&&(U("false write response, pause",h._readableState.awaitDrain),h._readableState.awaitDrain++,_=!0),h.pause())}function a(t){U("onerror",t),l(),e.removeListener("error",a),0===I(e,"error")&&e.emit("error",t)}function f(){e.removeListener("finish",c),l()}function c(){U("onfinish"),e.removeListener("close",f),l()}function l(){U("unpipe"),h.unpipe(e)}var h=this,d=this._readableState;switch(d.pipesCount){case 0:d.pipes=e;break;case 1:d.pipes=[d.pipes,e];break;default:d.pipes.push(e)}d.pipesCount+=1,U("pipe count=%d opts=%j",d.pipesCount,t);var p=(!t||t.end!==!1)&&e!==n.stdout&&e!==n.stderr,g=p?o:s;d.endEmitted?M(g):h.once("end",g),e.on("unpipe",i);var y=b(h);e.on("drain",y);var v=!1,_=!1;return h.on("data",u),r(e,"error",a),e.once("close",f),e.once("finish",c),e.emit("pipe",h),d.flowing||(U("pipe resume"),h.resume()),e},o.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var o=j(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},o.prototype.on=function(e,t){var n=T.prototype.on.call(this,e,t);if("data"===e)this._readableState.flowing!==!1&&this.resume();else if("readable"===e){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&h(this,r):M(y,this))}return n},o.prototype.addListener=o.prototype.on,o.prototype.resume=function(){var e=this._readableState;return e.flowing||(U("resume"),e.flowing=!0,v(this,e)),this},o.prototype.pause=function(){return U("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(U("pause"),this._readableState.flowing=!1,this.emit("pause")),this},o.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(U("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(U("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var o=r.push(i);o||(n=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return A(o,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){U("wrapped _read",t),n&&(n=!1,e.resume())},r},o._fromList=w}).call(this,e("_process"))},{"./_stream_duplex":16,"./internal/streams/BufferList":21,_process:154,buffer:14,"buffer-shims":13,"core-util-is":24,events:41,inherits:75,isarray:79,"process-nextick-args":153,"string_decoder/":210,util:10}],19:[function(e,t){"use strict";function n(e){this.afterTransform=function(t,n){return r(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function r(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);s.call(this,e),this._transformState=new n(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e,n){o(t,e,n)}):o(t)})}function o(e,t,n){if(t)return e.emit("error",t);null!==n&&void 0!==n&&e.push(n);var r=e._writableState,i=e._transformState;if(r.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}t.exports=i;var s=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(i,s),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},i.prototype._transform=function(){throw new Error("_transform() is not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":16,"core-util-is":24,inherits:75}],20:[function(e,t){(function(n){"use strict";function r(){}function i(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function o(t,n){E=E||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof E&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){p(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new k(this)}function s(t){return E=E||e("./_stream_duplex"),C.call(s,this)||this instanceof E?(this._writableState=new o(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),void A.call(this)):new s(t)}function u(e,t){var n=new Error("write after end");e.emit("error",n),x(t,n)}function a(e,t,n,r){var i=!0,o=!1;return null===n?o=new TypeError("May not write null values to stream"):R.isBuffer(n)||"string"==typeof n||void 0===n||t.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),x(r,o),i=!1),i}function f(e,t,n){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=M.from(t,n)),t}function c(e,t,n,r,o){n=f(t,n,r),R.isBuffer(n)&&(r="buffer");var s=t.objectMode?1:n.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var a=t.lastBufferedRequest;t.lastBufferedRequest=new i(n,r,o),a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else l(e,t,!1,s,n,r,o);return u}function l(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function h(e,t,n,r,i){--t.pendingcb,n?x(i,r):i(r),e._writableState.errorEmitted=!0,e.emit("error",r)}function d(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function p(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(d(n),t)h(e,n,r,t,i);else{var o=v(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||y(e,n),r?S(g,e,n,o,i):g(e,n,o,i)}}function g(e,t,n,r){n||b(e,t),t.pendingcb--,r(),m(e,t)}function b(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function y(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var s=0;n;)i[s]=n,n=n.next,s+=1;l(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new k(t)}else{for(;n;){var u=n.chunk,a=n.encoding,f=n.callback,c=t.objectMode?1:u.length;if(l(e,t,!1,c,u,a,f),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function v(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function _(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function m(e,t){var n=v(t);return n&&(0===t.pendingcb?(_(e,t),t.finished=!0,e.emit("finish")):_(e,t)),n}function w(e,t,n){t.ending=!0,m(e,t),n&&(t.finished?x(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function k(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}t.exports=s;var E,x=e("process-nextick-args"),S=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?setImmediate:x;s.WritableState=o;var B=e("core-util-is");B.inherits=e("inherits");var A,j={deprecate:e("util-deprecate")};!function(){try{A=e("stream")}catch(t){}finally{A||(A=e("events").EventEmitter)}}();var R=e("buffer").Buffer,M=e("buffer-shims");B.inherits(s,A),o.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(o.prototype,"buffer",{get:j.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var C;"function"==typeof Symbol&&Symbol.hasInstance?(C=Function.prototype[Symbol.hasInstance],Object.defineProperty(s,Symbol.hasInstance,{value:function(e){return C.call(this,e)?!0:e&&e._writableState instanceof o}})):C=function(e){return e instanceof this},s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},s.prototype.write=function(e,t,n){var i=this._writableState,o=!1;return"function"==typeof t&&(n=t,t=null),R.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=r),i.ended?u(this,n):a(this,i,e,n)&&(i.pendingcb++,o=c(this,i,e,t,n)),o},s.prototype.cork=function(){var e=this._writableState;e.corked++},s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||y(this,e))},s.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);return this._writableState.defaultEncoding=e,this},s.prototype._write=function(e,t,n){n(new Error("_write() is not implemented"))},s.prototype._writev=null,s.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||w(this,r,n)}}).call(this,e("_process"))},{"./_stream_duplex":16,_process:154,buffer:14,"buffer-shims":13,"core-util-is":24,events:41,inherits:75,"process-nextick-args":153,"util-deprecate":219}],21:[function(e,t){"use strict";function n(){this.head=null,this.tail=null,this.length=0}var r=(e("buffer").Buffer,e("buffer-shims"));t.exports=n,n.prototype.push=function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length},n.prototype.unshift=function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length},n.prototype.shift=function(){if(0!==this.length){var e=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,e}},n.prototype.clear=function(){this.head=this.tail=null,this.length=0},n.prototype.join=function(e){if(0===this.length)return"";for(var t=this.head,n=""+t.data;t=t.next;)n+=e+t.data;return n},n.prototype.concat=function(e){if(0===this.length)return r.alloc(0);if(1===this.length)return this.head.data;for(var t=r.allocUnsafe(e>>>0),n=this.head,i=0;n;)n.data.copy(t,i),i+=n.data.length,n=n.next;return t}},{buffer:14,"buffer-shims":13}],22:[function(e,t,n){(function(r){var i=function(){try{return e("stream")}catch(t){}}();n=t.exports=e("./lib/_stream_readable.js"),n.Stream=i||n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),!r.browser&&"disable"===r.env.READABLE_STREAM&&i&&(t.exports=i)}).call(this,e("_process"))},{"./lib/_stream_duplex.js":16,"./lib/_stream_passthrough.js":17,"./lib/_stream_readable.js":18,"./lib/_stream_transform.js":19,"./lib/_stream_writable.js":20,_process:154}],23:[function(e,t){(function(n){function r(e){i.call(this),this.hashMode="string"==typeof e,this.hashMode?this[e]=this._finalOrDigest:this["final"]=this._finalOrDigest,this._decoder=null,this._encoding=null}var i=e("stream").Transform,o=e("inherits"),s=e("string_decoder").StringDecoder;t.exports=r,o(r,i),r.prototype.update=function(e,t,r){"string"==typeof e&&(e=new n(e,t));var i=this._update(e);return this.hashMode?this:(r&&(i=this._toString(i,r)),i)},r.prototype.setAutoPadding=function(){},r.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},r.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},r.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},r.prototype._transform=function(e,t,n){var r;try{this.hashMode?this._update(e):this.push(this._update(e))}catch(i){r=i}finally{n(r)}},r.prototype._flush=function(e){var t;try{this.push(this._final())}catch(n){t=n}finally{e(t)}},r.prototype._finalOrDigest=function(e){var t=this._final()||new n("");return e&&(t=this._toString(t,e,!0)),t},r.prototype._toString=function(e,t,n){if(this._decoder||(this._decoder=new s(t),this._encoding=t),this._encoding!==t)throw new Error("can't switch encodings");var r=this._decoder.write(e);return n&&(r+=this._decoder.end()),r}}).call(this,e("buffer").Buffer)},{buffer:14,inherits:75,stream:207,string_decoder:210}],24:[function(e,t,n){(function(e){function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===b(e)}function r(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function s(e){return"number"==typeof e}function u(e){return"string"==typeof e}function a(e){return"symbol"==typeof e}function f(e){return void 0===e}function c(e){return"[object RegExp]"===b(e)}function l(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===b(e)}function d(e){return"[object Error]"===b(e)||e instanceof Error}function p(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function b(e){return Object.prototype.toString.call(e)}n.isArray=t,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=o,n.isNumber=s,n.isString=u,n.isSymbol=a,n.isUndefined=f,n.isRegExp=c,n.isObject=l,n.isDate=h,n.isError=d,n.isFunction=p,n.isPrimitive=g,n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../is-buffer/index.js")})},{"../../is-buffer/index.js":76}],25:[function(e,t){(function(n){"use strict";function r(e){f.call(this,"digest"),this._hash=e,this.buffers=[]}function i(e){f.call(this,"digest"),this._hash=e}var o=e("inherits"),s=e("./md5"),u=e("ripemd160"),a=e("sha.js"),f=e("cipher-base");o(r,f),r.prototype._update=function(e){this.buffers.push(e)},r.prototype._final=function(){var e=n.concat(this.buffers),t=this._hash(e);return this.buffers=null,t},o(i,f),i.prototype._update=function(e){this._hash.update(e)},i.prototype._final=function(){return this._hash.digest()},t.exports=function(e){return e=e.toLowerCase(),"md5"===e?new r(s):"rmd160"===e||"ripemd160"===e?new r(u):new i(a(e))}}).call(this,e("buffer").Buffer)},{"./md5":27,buffer:14,"cipher-base":23,inherits:75,ripemd160:182,"sha.js":183
}],26:[function(e,t,n){(function(e){"use strict";function t(t,n){if(t.length%o!==0){var r=t.length+(o-t.length%o);t=e.concat([t,s],r)}for(var i=[],u=n?t.readInt32BE:t.readInt32LE,a=0;a<t.length;a+=o)i.push(u.call(t,a));return i}function r(t,n,r){for(var i=new e(n),o=r?i.writeInt32BE:i.writeInt32LE,s=0;s<t.length;s++)o.call(i,t[s],4*s,!0);return i}function i(n,i,o,s){e.isBuffer(n)||(n=new e(n));var a=i(t(n,s),n.length*u);return r(a,o,s)}var o=4,s=new e(o);s.fill(0);var u=8;n.hash=i}).call(this,e("buffer").Buffer)},{buffer:14}],27:[function(e,t){"use strict";function n(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var n=1732584193,r=-271733879,f=-1732584194,c=271733878,l=0;l<e.length;l+=16){var h=n,d=r,p=f,g=c;n=i(n,r,f,c,e[l+0],7,-680876936),c=i(c,n,r,f,e[l+1],12,-389564586),f=i(f,c,n,r,e[l+2],17,606105819),r=i(r,f,c,n,e[l+3],22,-1044525330),n=i(n,r,f,c,e[l+4],7,-176418897),c=i(c,n,r,f,e[l+5],12,1200080426),f=i(f,c,n,r,e[l+6],17,-1473231341),r=i(r,f,c,n,e[l+7],22,-45705983),n=i(n,r,f,c,e[l+8],7,1770035416),c=i(c,n,r,f,e[l+9],12,-1958414417),f=i(f,c,n,r,e[l+10],17,-42063),r=i(r,f,c,n,e[l+11],22,-1990404162),n=i(n,r,f,c,e[l+12],7,1804603682),c=i(c,n,r,f,e[l+13],12,-40341101),f=i(f,c,n,r,e[l+14],17,-1502002290),r=i(r,f,c,n,e[l+15],22,1236535329),n=o(n,r,f,c,e[l+1],5,-165796510),c=o(c,n,r,f,e[l+6],9,-1069501632),f=o(f,c,n,r,e[l+11],14,643717713),r=o(r,f,c,n,e[l+0],20,-373897302),n=o(n,r,f,c,e[l+5],5,-701558691),c=o(c,n,r,f,e[l+10],9,38016083),f=o(f,c,n,r,e[l+15],14,-660478335),r=o(r,f,c,n,e[l+4],20,-405537848),n=o(n,r,f,c,e[l+9],5,568446438),c=o(c,n,r,f,e[l+14],9,-1019803690),f=o(f,c,n,r,e[l+3],14,-187363961),r=o(r,f,c,n,e[l+8],20,1163531501),n=o(n,r,f,c,e[l+13],5,-1444681467),c=o(c,n,r,f,e[l+2],9,-51403784),f=o(f,c,n,r,e[l+7],14,1735328473),r=o(r,f,c,n,e[l+12],20,-1926607734),n=s(n,r,f,c,e[l+5],4,-378558),c=s(c,n,r,f,e[l+8],11,-2022574463),f=s(f,c,n,r,e[l+11],16,1839030562),r=s(r,f,c,n,e[l+14],23,-35309556),n=s(n,r,f,c,e[l+1],4,-1530992060),c=s(c,n,r,f,e[l+4],11,1272893353),f=s(f,c,n,r,e[l+7],16,-155497632),r=s(r,f,c,n,e[l+10],23,-1094730640),n=s(n,r,f,c,e[l+13],4,681279174),c=s(c,n,r,f,e[l+0],11,-358537222),f=s(f,c,n,r,e[l+3],16,-722521979),r=s(r,f,c,n,e[l+6],23,76029189),n=s(n,r,f,c,e[l+9],4,-640364487),c=s(c,n,r,f,e[l+12],11,-421815835),f=s(f,c,n,r,e[l+15],16,530742520),r=s(r,f,c,n,e[l+2],23,-995338651),n=u(n,r,f,c,e[l+0],6,-198630844),c=u(c,n,r,f,e[l+7],10,1126891415),f=u(f,c,n,r,e[l+14],15,-1416354905),r=u(r,f,c,n,e[l+5],21,-57434055),n=u(n,r,f,c,e[l+12],6,1700485571),c=u(c,n,r,f,e[l+3],10,-1894986606),f=u(f,c,n,r,e[l+10],15,-1051523),r=u(r,f,c,n,e[l+1],21,-2054922799),n=u(n,r,f,c,e[l+8],6,1873313359),c=u(c,n,r,f,e[l+15],10,-30611744),f=u(f,c,n,r,e[l+6],15,-1560198380),r=u(r,f,c,n,e[l+13],21,1309151649),n=u(n,r,f,c,e[l+4],6,-145523070),c=u(c,n,r,f,e[l+11],10,-1120210379),f=u(f,c,n,r,e[l+2],15,718787259),r=u(r,f,c,n,e[l+9],21,-343485551),n=a(n,h),r=a(r,d),f=a(f,p),c=a(c,g)}return Array(n,r,f,c)}function r(e,t,n,r,i,o){return a(f(a(a(t,e),a(r,o)),i),n)}function i(e,t,n,i,o,s,u){return r(t&n|~t&i,e,t,o,s,u)}function o(e,t,n,i,o,s,u){return r(t&i|n&~i,e,t,o,s,u)}function s(e,t,n,i,o,s,u){return r(t^n^i,e,t,o,s,u)}function u(e,t,n,i,o,s,u){return r(n^(t|~i),e,t,o,s,u)}function a(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}function f(e,t){return e<<t|e>>>32-t}var c=e("./helpers");t.exports=function(e){return c.hash(e,n,16)}},{"./helpers":26}],28:[function(e,t){(function(n){"use strict";function r(e,t){s.call(this),e=e.toLowerCase(),"string"==typeof t&&(t=new n(t));var r="sha512"===e||"sha384"===e?128:64;this._alg=e,this._key=t,t.length>r?t=i(e).update(t).digest():t.length<r&&(t=n.concat([t,u],r));for(var o=this._ipad=new n(r),a=this._opad=new n(r),f=0;r>f;f++)o[f]=54^t[f],a[f]=92^t[f];this._hash=i(e).update(o)}var i=e("create-hash/browser"),o=e("inherits"),s=e("stream").Transform,u=new n(128);u.fill(0),o(r,s),r.prototype.update=function(e,t){return this._hash.update(e,t),this},r.prototype._transform=function(e,t,n){this._hash.update(e),n()},r.prototype._flush=function(e){this.push(this.digest()),e()},r.prototype.digest=function(e){var t=this._hash.digest();return i(this._alg).update(this._opad).update(t).digest(e)},t.exports=function(e,t){return new r(e,t)}}).call(this,e("buffer").Buffer)},{buffer:14,"create-hash/browser":25,inherits:75,stream:207}],29:[function(e,t){!function(e){"use strict";var n="cuid",r=0,i=4,o=36,s=Math.pow(o,i),u=function(e,t){var n="000000000"+e;return n.substr(n.length-t)},a=function(){return u((Math.random()*s<<0).toString(o),i)},f=function(){return r=s>r?r:0,r++,r-1},c=function(){var e,t="c",n=(new Date).getTime().toString(o),r=c.fingerprint(),s=a()+a();return e=u(f().toString(o),i),t+n+e+r+s};c.slug=function(){var e,t=(new Date).getTime().toString(36),n=c.fingerprint().slice(0,1)+c.fingerprint().slice(-1),r=a().slice(-2);return e=f().toString(36).slice(-4),t.slice(-2)+e+n+r},c.globalCount=function(){var e=function(){var e,t=0;for(e in window)t++;return t}();return c.globalCount=function(){return e},e},c.fingerprint=function(){return u((navigator.mimeTypes.length+navigator.userAgent.length).toString(36)+c.globalCount().toString(36),4)},e.register?e.register(n,c):"undefined"!=typeof t?t.exports=c:e[n]=c}(this.applitude||this)},{}],30:[function(e,t,n){(function(r){function i(){return"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31}function o(){var e=arguments,t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+n.humanize(this.diff),!t)return e;var r="color: "+this.color;e=[e[0],r,"color: inherit"].concat(Array.prototype.slice.call(e,1));var i=0,o=0;return e[0].replace(/%[a-z%]/g,function(e){"%%"!==e&&(i++,"%c"===e&&(o=i))}),e.splice(o,0,r),e}function s(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function u(e){try{null==e?n.storage.removeItem("debug"):n.storage.debug=e}catch(t){}}function a(){var e;try{e=n.storage.debug}catch(t){}return"env"in("undefined"==typeof r?{}:r)&&(e=r.env.DEBUG),e}function f(){try{return window.localStorage}catch(e){}}n=t.exports=e("./debug"),n.log=s,n.formatArgs=o,n.save=u,n.load=a,n.useColors=i,n.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:f(),n.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],n.formatters.j=function(e){return JSON.stringify(e)},n.enable(a())}).call(this,e("_process"))},{"./debug":31,_process:154}],31:[function(e,t,n){function r(){return n.colors[c++%n.colors.length]}function i(e){function t(){}function i(){var e=i,t=+new Date,o=t-(f||t);e.diff=o,e.prev=f,e.curr=t,f=t,null==e.useColors&&(e.useColors=n.useColors()),null==e.color&&e.useColors&&(e.color=r());for(var s=new Array(arguments.length),u=0;u<s.length;u++)s[u]=arguments[u];s[0]=n.coerce(s[0]),"string"!=typeof s[0]&&(s=["%o"].concat(s));var a=0;s[0]=s[0].replace(/%([a-z%])/g,function(t,r){if("%%"===t)return t;a++;var i=n.formatters[r];if("function"==typeof i){var o=s[a];t=i.call(e,o),s.splice(a,1),a--}return t}),s=n.formatArgs.apply(e,s);var c=i.log||n.log||console.log.bind(console);c.apply(e,s)}t.enabled=!1,i.enabled=!0;var o=n.enabled(e)?i:t;return o.namespace=e,o}function o(e){n.save(e);for(var t=(e||"").split(/[\s,]+/),r=t.length,i=0;r>i;i++)t[i]&&(e=t[i].replace(/[\\^$+?.()|[\]{}]/g,"\\$&").replace(/\*/g,".*?"),"-"===e[0]?n.skips.push(new RegExp("^"+e.substr(1)+"$")):n.names.push(new RegExp("^"+e+"$")))}function s(){n.enable("")}function u(e){var t,r;for(t=0,r=n.skips.length;r>t;t++)if(n.skips[t].test(e))return!1;for(t=0,r=n.names.length;r>t;t++)if(n.names[t].test(e))return!0;return!1}function a(e){return e instanceof Error?e.stack||e.message:e}n=t.exports=i.debug=i,n.coerce=a,n.disable=s,n.enable=o,n.enabled=u,n.humanize=e("ms"),n.names=[],n.skips=[],n.formatters={};var f,c=0},{ms:147}],32:[function(e,t){function n(e){i.call(this,e),this._options=e,this._iterator=null,this._operations=[]}var r=e("util"),i=e("abstract-leveldown").AbstractIterator;r.inherits(n,i),n.prototype.setDb=function(e){var t=this._iterator=e.iterator(this._options);this._operations.forEach(function(e){t[e.method].apply(t,e.args)})},n.prototype._operation=function(e,t){return this._iterator?this._iterator[e].apply(this._iterator,t):void this._operations.push({method:e,args:t})},"next end".split(" ").forEach(function(e){n.prototype["_"+e]=function(){this._operation(e,arguments)}}),t.exports=n},{"abstract-leveldown":4,util:222}],33:[function(e,t){(function(n,r){function i(e){s.call(this,"string"==typeof e?e:""),this._db=void 0,this._operations=[],this._iterators=[]}var o=e("util"),s=e("abstract-leveldown").AbstractLevelDOWN,u=e("./deferred-iterator");o.inherits(i,s),i.prototype.setDb=function(e){this._db=e,this._operations.forEach(function(t){e[t.method].apply(e,t.args)}),this._iterators.forEach(function(t){t.setDb(e)})},i.prototype._open=function(e,t){return r.nextTick(t)},i.prototype._operation=function(e,t){return this._db?this._db[e].apply(this._db,t):void this._operations.push({method:e,args:t})},"put get del batch approximateSize".split(" ").forEach(function(e){i.prototype["_"+e]=function(){this._operation(e,arguments)}}),i.prototype._isBuffer=function(e){return n.isBuffer(e)},i.prototype._iterator=function(e){if(this._db)return this._db.iterator.apply(this._db,arguments);var t=new u(e);return this._iterators.push(t),t},t.exports=i,t.exports.DeferredIterator=u}).call(this,{isBuffer:e("../is-buffer/index.js")},e("_process"))},{"../is-buffer/index.js":76,"./deferred-iterator":32,_process:154,"abstract-leveldown":4,util:222}],34:[function(e,t){t.exports=function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]}},{}],35:[function(e,t){(function(n,r){var i=e("readable-stream"),o=e("end-of-stream"),s=e("inherits"),u=e("stream-shift"),a=new r([0]),f=function(e,t){e._corked?e.once("uncork",t):t()},c=function(e,t){return function(n){n?e.destroy("premature close"===n.message?null:n):t&&!e._ended&&e.end()}},l=function(e,t){return e?e._writableState&&e._writableState.finished?t():e._writableState?e.end(t):(e.end(),void t()):t()},h=function(e){return new i.Readable({objectMode:!0,highWaterMark:16}).wrap(e)},d=function(e,t,n){return this instanceof d?(i.Duplex.call(this,n),this._writable=null,this._readable=null,this._readable2=null,this._forwardDestroy=!n||n.destroy!==!1,this._forwardEnd=!n||n.end!==!1,this._corked=1,this._ondrain=null,this._drained=!1,this._forwarding=!1,this._unwrite=null,this._unread=null,this._ended=!1,this.destroyed=!1,e&&this.setWritable(e),void(t&&this.setReadable(t))):new d(e,t,n)};s(d,i.Duplex),d.obj=function(e,t,n){return n||(n={}),n.objectMode=!0,n.highWaterMark=16,new d(e,t,n)},d.prototype.cork=function(){1===++this._corked&&this.emit("cork")},d.prototype.uncork=function(){this._corked&&0===--this._corked&&this.emit("uncork")},d.prototype.setWritable=function(e){if(this._unwrite&&this._unwrite(),this.destroyed)return void(e&&e.destroy&&e.destroy());if(null===e||e===!1)return void this.end();var t=this,r=o(e,{writable:!0,readable:!1},c(this,this._forwardEnd)),i=function(){var e=t._ondrain;t._ondrain=null,e&&e()},s=function(){t._writable.removeListener("drain",i),r()};this._unwrite&&n.nextTick(i),this._writable=e,this._writable.on("drain",i),this._unwrite=s,this.uncork()},d.prototype.setReadable=function(e){if(this._unread&&this._unread(),this.destroyed)return void(e&&e.destroy&&e.destroy());if(null===e||e===!1)return this.push(null),void this.resume();var t=this,n=o(e,{writable:!1,readable:!0},c(this)),r=function(){t._forward()},i=function(){t.push(null)},s=function(){t._readable2.removeListener("readable",r),t._readable2.removeListener("end",i),n()};this._drained=!0,this._readable=e,this._readable2=e._readableState?e:h(e),this._readable2.on("readable",r),this._readable2.on("end",i),this._unread=s,this._forward()},d.prototype._read=function(){this._drained=!0,this._forward()},d.prototype._forward=function(){if(!this._forwarding&&this._readable2&&this._drained){this._forwarding=!0;for(var e;this._drained&&null!==(e=u(this._readable2));)this.destroyed||(this._drained=this.push(e));this._forwarding=!1}},d.prototype.destroy=function(e){if(!this.destroyed){this.destroyed=!0;var t=this;n.nextTick(function(){t._destroy(e)})}},d.prototype._destroy=function(e){if(e){var t=this._ondrain;this._ondrain=null,t?t(e):this.emit("error",e)}this._forwardDestroy&&(this._readable&&this._readable.destroy&&this._readable.destroy(),this._writable&&this._writable.destroy&&this._writable.destroy()),this.emit("close")},d.prototype._write=function(e,t,n){return this.destroyed?n():this._corked?f(this,this._write.bind(this,e,t,n)):e===a?this._finish(n):this._writable?void(this._writable.write(e)===!1?this._ondrain=n:n()):n()},d.prototype._finish=function(e){var t=this;this.emit("preend"),f(this,function(){l(t._forwardEnd&&t._writable,function(){t._writableState.prefinished===!1&&(t._writableState.prefinished=!0),t.emit("prefinish"),f(t,e)})})},d.prototype.end=function(e,t,n){return"function"==typeof e?this.end(null,null,e):"function"==typeof t?this.end(e,null,t):(this._ended=!0,e&&this.write(e),this._writableState.ending||this.write(a),i.Writable.prototype.end.call(this,n))},t.exports=d}).call(this,e("_process"),e("buffer").Buffer)},{_process:154,buffer:14,"end-of-stream":36,inherits:75,"readable-stream":179,"stream-shift":209}],36:[function(e,t){var n=e("once"),r=function(){},i=function(e){return e.setHeader&&"function"==typeof e.abort},o=function(e,t,s){if("function"==typeof t)return o(e,null,t);t||(t={}),s=n(s||r);var u=e._writableState,a=e._readableState,f=t.readable||t.readable!==!1&&e.readable,c=t.writable||t.writable!==!1&&e.writable,l=function(){e.writable||h()},h=function(){c=!1,f||s()},d=function(){f=!1,c||s()},p=function(){return(!f||a&&a.ended)&&(!c||u&&u.ended)?void 0:s(new Error("premature close"))},g=function(){e.req.on("finish",h)};return i(e)?(e.on("complete",h),e.on("abort",p),e.req?g():e.on("request",g)):c&&!u&&(e.on("end",l),e.on("close",l)),e.on("end",d),e.on("finish",h),t.error!==!1&&e.on("error",s),e.on("close",p),function(){e.removeListener("complete",h),e.removeListener("abort",p),e.removeListener("request",g),e.req&&e.req.removeListener("finish",h),e.removeListener("end",l),e.removeListener("close",l),e.removeListener("finish",h),e.removeListener("end",d),e.removeListener("error",s),e.removeListener("close",p)}};t.exports=o},{once:149}],37:[function(e,t){function n(e,t,n){o(this,{type:e,name:e,cause:"string"!=typeof t?t:n,message:t&&"string"!=typeof t?t.message:t},"ewr")}function r(e,t){Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,arguments.callee),n.call(this,"CustomError",e,t)}function i(e,t,i){var o=function(r,i){n.call(this,t,r,i),"FilesystemError"==t&&(this.code=this.cause.code,this.path=this.cause.path,this.errno=this.cause.errno,this.message=(e.errno[this.cause.errno]?e.errno[this.cause.errno].description:this.cause.message)+(this.cause.path?" ["+this.cause.path+"]":"")),Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,arguments.callee)};return o.prototype=i?new i:new r,o}var o=e("prr");r.prototype=new Error,t.exports=function(e){var t=function(t,n){return i(e,t,n)};return{CustomError:r,FilesystemError:t("FilesystemError"),createError:t}}},{prr:39}],38:[function(e,t){var n=t.exports.all=[{errno:-2,code:"ENOENT",description:"no such file or directory"},{errno:-1,code:"UNKNOWN",description:"unknown error"},{errno:0,code:"OK",description:"success"},{errno:1,code:"EOF",description:"end of file"},{errno:2,code:"EADDRINFO",description:"getaddrinfo error"},{errno:3,code:"EACCES",description:"permission denied"},{errno:4,code:"EAGAIN",description:"resource temporarily unavailable"},{errno:5,code:"EADDRINUSE",description:"address already in use"},{errno:6,code:"EADDRNOTAVAIL",description:"address not available"},{errno:7,code:"EAFNOSUPPORT",description:"address family not supported"},{errno:8,code:"EALREADY",description:"connection already in progress"},{errno:9,code:"EBADF",description:"bad file descriptor"},{errno:10,code:"EBUSY",description:"resource busy or locked"},{errno:11,code:"ECONNABORTED",description:"software caused connection abort"},{errno:12,code:"ECONNREFUSED",description:"connection refused"},{errno:13,code:"ECONNRESET",description:"connection reset by peer"},{errno:14,code:"EDESTADDRREQ",description:"destination address required"},{errno:15,code:"EFAULT",description:"bad address in system call argument"},{errno:16,code:"EHOSTUNREACH",description:"host is unreachable"},{errno:17,code:"EINTR",description:"interrupted system call"},{errno:18,code:"EINVAL",description:"invalid argument"},{errno:19,code:"EISCONN",description:"socket is already connected"},{errno:20,code:"EMFILE",description:"too many open files"},{errno:21,code:"EMSGSIZE",description:"message too long"},{errno:22,code:"ENETDOWN",description:"network is down"},{errno:23,code:"ENETUNREACH",description:"network is unreachable"},{errno:24,code:"ENFILE",description:"file table overflow"},{errno:25,code:"ENOBUFS",description:"no buffer space available"},{errno:26,code:"ENOMEM",description:"not enough memory"},{errno:27,code:"ENOTDIR",description:"not a directory"},{errno:28,code:"EISDIR",description:"illegal operation on a directory"},{errno:29,code:"ENONET",description:"machine is not on the network"},{errno:31,code:"ENOTCONN",description:"socket is not connected"},{errno:32,code:"ENOTSOCK",description:"socket operation on non-socket"},{errno:33,code:"ENOTSUP",description:"operation not supported on socket"},{errno:34,code:"ENOENT",description:"no such file or directory"},{errno:35,code:"ENOSYS",description:"function not implemented"},{errno:36,code:"EPIPE",description:"broken pipe"},{errno:37,code:"EPROTO",description:"protocol error"},{errno:38,code:"EPROTONOSUPPORT",description:"protocol not supported"},{errno:39,code:"EPROTOTYPE",description:"protocol wrong type for socket"},{errno:40,code:"ETIMEDOUT",description:"connection timed out"},{errno:41,code:"ECHARSET",description:"invalid Unicode character"},{errno:42,code:"EAIFAMNOSUPPORT",description:"address family for hostname not supported"},{errno:44,code:"EAISERVICE",description:"servname not supported for ai_socktype"},{errno:45,code:"EAISOCKTYPE",description:"ai_socktype not supported"},{errno:46,code:"ESHUTDOWN",description:"cannot send after transport endpoint shutdown"},{errno:47,code:"EEXIST",description:"file already exists"},{errno:48,code:"ESRCH",description:"no such process"},{errno:49,code:"ENAMETOOLONG",description:"name too long"},{errno:50,code:"EPERM",description:"operation not permitted"},{errno:51,code:"ELOOP",description:"too many symbolic links encountered"},{errno:52,code:"EXDEV",description:"cross-device link not permitted"},{errno:53,code:"ENOTEMPTY",description:"directory not empty"},{errno:54,code:"ENOSPC",description:"no space left on device"},{errno:55,code:"EIO",description:"i/o error"},{errno:56,code:"EROFS",description:"read-only file system"},{errno:57,code:"ENODEV",description:"no such device"},{errno:58,code:"ESPIPE",description:"invalid seek"},{errno:59,code:"ECANCELED",description:"operation canceled"}];t.exports.errno={},t.exports.code={},n.forEach(function(e){t.exports.errno[e.errno]=e,t.exports.code[e.code]=e}),t.exports.custom=e("./custom")(t.exports),t.exports.create=t.exports.custom.createError},{"./custom":37}],39:[function(e,t){!function(e,n,r){"undefined"!=typeof t&&t.exports?t.exports=r():n[e]=r()}("prr",this,function(){var e="function"==typeof Object.defineProperty?function(e,t,n){return Object.defineProperty(e,t,n),e}:function(e,t,n){return e[t]=n.value,e},t=function(e,t){var n="object"==typeof t,r=!n&&"string"==typeof t,i=function(e){return n?!!t[e]:r?t.indexOf(e[0])>-1:!1};return{enumerable:i("enumerable"),configurable:i("configurable"),writable:i("writable"),value:e}},n=function(n,r,i,o){var s;if(o=t(i,o),"object"==typeof r){for(s in r)Object.hasOwnProperty.call(r,s)&&(o.value=r[s],e(n,s,o));return n}return e(n,r,o)};return n})},{}],40:[function(e,t){var n=e("stream");t.exports=function(e,t){t||(t={});var r=new EventSource(e),i=new n.Readable({objectMode:!0}),o=!!t.json,s=function(e){try{return o?JSON.parse(e):e}catch(t){return void 0}};i._read=function(){},r.onmessage=function(e){i.push(s(e.data))},r.onerror=function(e){i.listeners("error").length&&i.emit("error",e)},r.onopen=function(){i.emit("open")};var u=!1;return i.destroy=function(){u||(u=!0,r.close(),i.emit("close"))},i}},{stream:207}],41:[function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function s(e){return void 0===e}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,u,a,f;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(n=this._events[e],s(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),n.apply(this,u)}else if(o(n))for(u=Array.prototype.slice.call(arguments,1),f=n.slice(),i=f.length,a=0;i>a;a++)f[a].apply(this,u);return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=s(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,s,u;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(u=s;u-->0;)if(n[u]===t||n[u].listener&&n[u].listener===t){i=u;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(r(t))return 1;if(t)return t.length}return 0},n.listenerCount=function(e,t){return e.listenerCount(t)}},{}],42:[function(e,t,n){function r(e){return 31>e?1<<e:(1<<30)*(1<<e-30)}function i(e){return(e-(1&e))/2}n.fullRoots=function(e,t){if(1&e)throw new Error("You can only look up roots for depth(0) blocks");t||(t=[]),e/=2;for(var n=0,r=1;;){if(!e)return t;for(;e>=2*r;)r*=2;t.push(n+r-1),n+=2*r,e-=r,r=1}},n.depth=function(e){var t=0;for(e+=1;!(1&e);)t++,e=i(e);return t},n.sibling=function(e){var t=n.depth(e),r=n.offset(e,t);return n.index(t,1&r?r-1:r+1)},n.parent=function(e){var t=n.depth(e),r=n.offset(e,t);return n.index(t+1,i(r))},n.leftChild=function(e,t){return 1&e?(t||(t=n.depth(e)),n.index(t-1,2*n.offset(e,t))):-1},n.rightChild=function(e,t){return 1&e?(t||(t=n.depth(e)),n.index(t-1,1+2*n.offset(e,t))):-1},n.children=function(e,t){if(!(1&e))return null;t||(t=n.depth(e));var r=2*n.offset(e,t);return[n.index(t-1,r),n.index(t-1,r+1)]},n.leftSpan=function(e,t){return 1&e?(t||(t=n.depth(e)),n.offset(e,t)*r(t+1)):e},n.rightSpan=function(e,t){return 1&e?(t||(t=n.depth(e)),(n.offset(e,t)+1)*r(t+1)-2):e},n.count=function(e,t){if(!(1&e))return 1;t||(t=n.depth(e));n.offset(e,t);return r(t+1)-1},n.spans=function(e,t){if(!(1&e))return[e,e];t||(t=n.depth(e));var i=n.offset(e,t),o=r(t+1);return[i*o,(i+1)*o-2]},n.index=function(e,t){return(1+2*t)*r(e)-1},n.offset=function(e,t){return 1&e?(t||(t=n.depth(e)),((e+1)/r(t)-1)/2):e/2}},{}],43:[function(e,t){function n(e,t,n){if(!s(t))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===u.call(e)?r(e,t,n):"string"==typeof e?i(e,t,n):o(e,t,n)}function r(e,t,n){for(var r=0,i=e.length;i>r;r++)a.call(e,r)&&t.call(n,e[r],r,e)}function i(e,t,n){for(var r=0,i=e.length;i>r;r++)t.call(n,e.charAt(r),r,e)}function o(e,t,n){for(var r in e)a.call(e,r)&&t.call(n,e[r],r,e)}var s=e("is-function");t.exports=n;var u=Object.prototype.toString,a=Object.prototype.hasOwnProperty},{"is-function":77}],44:[function(e,t){(function(n){function r(e){return e=e.slice(),function(t,n){var r=null,i=e.length?e.shift():null;i instanceof Error&&(r=i,i=null),n(r,i)}}function i(e,t){("object"!=typeof e||Array.isArray(e))&&(t=e,e={});var n=new l(e);return n._from=Array.isArray(t)?r(t):t||u,n}function o(e,t){function r(t){function n(e,t){if(!i.destroyed){if(e)return i.destroy(e);if(null===t)return i.push(null);i._reading=!1,i.push(t)&&i._read(o)}}if(!(this instanceof r))return new r(t);this._reading=!1,this._callback=n,this.destroyed=!1,f.call(this,t||e);var i=this,o=this._readableState.highWaterMark}return"function"==typeof e&&(t=e,e={}),e=a(e),c(r,f),r.prototype._from=t||u,r.prototype._read=function(e){this._reading||this.destroyed||(this._reading=!0,this._from(e,this._callback))},r.prototype.destroy=function(e){if(!this.destroyed){this.destroyed=!0;var t=this;n.nextTick(function(){e&&t.emit("error",e),t.emit("close")})}},r}function s(e,t){return("function"==typeof e||Array.isArray(e))&&(t=e,e={}),e=a(e),e.objectMode=!0,e.highWaterMark=16,i(e,t)}function u(){}function a(e){return e=e||{}}var f=e("readable-stream").Readable,c=e("inherits");t.exports=i,i.ctor=o,i.obj=s;var l=o()}).call(this,e("_process"))},{_process:154,inherits:75,"readable-stream":179}],45:[function(e,t){var n=e("util"),r=/[\{\[]/,i=/[\}\]]/;t.exports=function(){var e=[],t=0,o=function(n){for(var r="";r.length<2*t;)r+="  ";e.push(r+n)},s=function(e){return e?i.test(e.trim()[0])&&r.test(e[e.length-1])?(t--,o(n.format.apply(n,arguments)),t++,s):r.test(e[e.length-1])?(o(n.format.apply(n,arguments)),t++,s):i.test(e.trim()[0])?(t--,o(n.format.apply(n,arguments)),s):(o(n.format.apply(n,arguments)),s):s};return s.toString=function(){return e.join("\n")},s.toFunction=function(e){var t="return ("+s.toString()+")",n=Object.keys(e||{}).map(function(e){return e}),r=n.map(function(t){return e[t]});return Function.apply(null,n.concat(t)).apply(null,r)},arguments.length&&s.apply(null,arguments),s}},{util:222}],46:[function(e,t){var n=e("is-property"),r=function(e,t){return n(t)?e+"."+t:e+"["+JSON.stringify(t)+"]"};r.valid=n,r.property=function(e){return n(e)?e:JSON.stringify(e)},t.exports=r},{"is-property":78}],47:[function(e,t){t.exports=function(){if("undefined"==typeof window)return null;var e={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};return e.RTCPeerConnection?e:null}},{}],48:[function(e,t){(function(e){t.exports="undefined"!=typeof window?window:"undefined"!=typeof e?e:"undefined"!=typeof self?self:{}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],49:[function(e,t){(function(n){"use strict";function r(e){i.call(this),this._block=new n(e),this._blockSize=e,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}var i=e("stream").Transform,o=e("inherits");o(r,i),r.prototype._transform=function(e,t,n){var r=null;try{this.update(e,t)}catch(i){r=i}n(r)},r.prototype._flush=function(e){var t=null;try{this.push(this.digest())}catch(n){t=n}e(t)},r.prototype.update=function(e,t){if(!n.isBuffer(e)&&"string"!=typeof e)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");n.isBuffer(e)||(e=new n(e,t));for(var r=this._block,i=0;this._blockOffset+e.length-i>=this._blockSize;){for(var o=this._blockOffset;o<this._blockSize;)r[o++]=e[i++];this._update(),this._blockOffset=0}for(;i<e.length;)r[this._blockOffset++]=e[i++];for(var s=0,u=8*e.length;u>0;++s)this._length[s]+=u,u=this._length[s]/4294967296|0,u>0&&(this._length[s]-=4294967296*u);return this},r.prototype._update=function(){throw new Error("_update is not implemented")},r.prototype.digest=function(e){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var t=this._digest();return void 0!==e&&(t=t.toString(e)),t},r.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=r}).call(this,e("buffer").Buffer)},{buffer:14,inherits:75,stream:207}],50:[function(e,t){(function(n,r){function i(e){function t(e){o.EventEmitter.call(this),this.state=null,this.protocol=e,this.opened=!1,this.closed=!1,this.key=null,this.discoveryKey=null,this.local=-1,this.remote=-1,this.buffer=[],this._nonce=c(24),this._remoteNonce=null,this._ready=!1,this._firstNonce=r(24),this._nonce.copy(this._firstNonce),this.on("handshake",this._onhandshake)}function k(t,n){function r(){if(!o._finalized){o._finalized=!0,o.destroyed=!0,clearInterval(this._interval);for(var e=Object.keys(o.channels),t=0;t<e.length;t++)o._close(o.channels[e[t]])}}function i(e){o._parse(e)}if(!(this instanceof k))return new k(t,n);"function"==typeof t&&(n=t,t=null),t||(t={});var o=this;u.call(this);var s=void 0!==t["private"]?t["private"]:t.encrypt;this.channels={},this["private"]=s!==!1,this.id=t.id||c(32),this.remoteId=null,this._finalized=!1,this._paused=0,this._local=[],this._remote=[],this._remoteExtensions=new Array(e.length),this._localExtensions=new Array(e.length);for(var l=0;l<e.length;l++)this._remoteExtensions[l]=this._localExtensions[l]=-1;this._keepAlive=0,this._remoteKeepAlive=0,this._interval=null,this._encode=f.Readable(),this._encode._read=B,this._decode=a.decode({allowEmpty:!0,limit:t.limit||8388608}),this._decode.on("data",i),this.setReadable(this._encode),this.setWritable(this._decode),this.on("close",r),this.on("end",r),this.on("finish",this.finalize),n&&this.on("open",n)}function E(e){return l("sha256",e).update("hypercore").digest()}function x(e){return e&&"function"==typeof e.encode;

}function S(e){var t={};return t[e]=!0,t}function B(){}var A=Object.keys(e).sort(),j=m.slice(0),R=w.slice(0);return s(t,o.EventEmitter),t.prototype.remoteSupports=function(e){return this.protocol.remoteSupports(e)},t.prototype.handshake=function(e){return this.protocol._send(this,0,e)},t.prototype.have=function(e){return this.protocol._send(this,1,e)},t.prototype.want=function(e){return this.protocol._send(this,2,e)},t.prototype.request=function(e){return this.protocol._send(this,3,e)},t.prototype.data=function(e){return this.protocol._send(this,4,e)},t.prototype.cancel=function(e){return this.protocol._send(this,5,e)},t.prototype.pause=function(){return this.protocol._send(this,6,null)},t.prototype.resume=function(){return this.protocol._send(this,7,null)},t.prototype.end=function(){this.protocol._close(this)},t.prototype.destroy=function(e){this.protocol.destroy(e)},t.prototype._onhandshake=function(e){this.protocol._onhandshake(e)},A.forEach(function(n,r){if(t.prototype[n]||"error"===n||"tick"===n)throw new Error("Invalid extension name");var i=x(e[n])?e[n]:y;j.push(i),R.push(n),t.prototype[n]=function(e){return this.protocol._send(this,m.length+r,e)}}),s(k,u),k.use=function(t){return"string"==typeof t&&(t=S(t)),i(b(t,e))},k.parseDiscoveryKey=function(e){if(0!==e[0])throw Error("Invalid message");return v.Open.decode(e,1).feed},k.prototype.finalize=function(){this._encode.push(null)},k.prototype.setTimeout=function(e,t){function n(){return r._remoteKeepAlive>4?(clearInterval(r._interval),void r.emit("timeout")):(r._tick(),r._remoteKeepAlive++,void(r._keepAlive>2?(r._encode.push(_),r._keepAlive=0):r._keepAlive++))}if(!this.destroyed){t&&this.once("timeout",t);var r=this;this._keepAlive=0,this._remoteKeepAlive=0,clearInterval(this._interval),this._interval=setInterval(n,e/4|0),this._interval.unref&&this._interval.unref()}},k.prototype.remoteSupports=function(e){var t="string"==typeof e?A.indexOf(e):e;return t>-1&&this._localExtensions[t]>-1},k.prototype.open=function(e,n){if(this.destroyed)return null;n||(n={});var r=n.discoveryKey||E(e),i=r.toString("hex"),o=this.channels[i];if(o||(o=new t(this),o.discoveryKey=r,this.channels[i]=o),o.local>-1)return o;n.state&&(o.state=n.state),o.key=e,o.local=this._local.indexOf(null),-1===o.local&&(o.local=this._local.push(null)-1),this._local[o.local]=o;var s=v.Open.encode({feed:o.discoveryKey,nonce:o._nonce});return this._sendRaw(o,s),this.remoteId||n.handshake===!1||o.handshake({id:this.id,extensions:A}),this.emit("channel",o),this._open(o),o.buffer.length&&this._parseSoon(o),o._ready=!0,o},k.prototype._send=function(e,t,n){if(e.closed)return!1;var i=j[t],o=i?i.encodingLength(n):0,s=r(o+1);return s[0]=t,i&&i.encode(n,s,1),this["private"]&&(s=this._encrypt(e,s)),this._sendRaw(e,s)},k.prototype._sendRaw=function(e,t){this._keepAlive=0;var n=t.length+g.encodingLength(e.local),i=r(g.encodingLength(n)+n),o=0;return g.encode(n,i,o),o+=g.encode.bytes,g.encode(e.local,i,o),o+=g.encode.bytes,t.copy(i,o),this._encode.push(i)},k.prototype._pause=function(){this._paused++||this._decode.pause()},k.prototype._resume=function(){--this._paused||this._decode.resume()},k.prototype._parseSoon=function(e){function t(){if(!r.destroyed&&!e.closed){var t=e.buffer;for(e.buffer=[];t.length;)r._parse(t.shift());r.destroyed||r._resume()}}var r=this;this._pause(),n.nextTick(t)},k.prototype._parse=function(e){if(this._remoteKeepAlive=0,e.length&&!this.destroyed){var t=g.decode(e,0),n=g.decode.bytes;return t>=this._remote.length&&this._remote.push(null),t>this._remote.length?this.destroy(new Error("Unexpected channel number")):void(this._remote[t]?n!==e.length?this._onmessage(t,e,n):this._onclose(t):this._onopen(t,e,n))}},k.prototype._tick=function(){for(var e=0;e<this._local.length;e++){var t=this._local[e];t&&t.emit("tick")}},k.prototype._parseType=function(e){return e>127?-1:64>e?e:e-64>=this._remoteExtensions.length?-1:(e=this._remoteExtensions[e-64],-1===e?-1:e+64)},k.prototype._onopen=function(e,n,r){try{var i=v.Open.decode(n,r)}catch(o){return this.destroy(o)}if(32!==i.feed.length||24!==i.nonce.length)return this.destroy(new Error("Invalid open message"));var s=i.feed.toString("hex"),u=this.channels[s];return u||(u=new t(this),u.discoveryKey=i.feed,this.channels[s]=u),u.remote>-1?this.destroy(new Error("Double open for same channel")):(u.remote=e,u._remoteNonce=i.nonce,this._remote[e]=u,this._open(u),void(this.destroyed||-1!==u.local||this.emit("open",u.discoveryKey)))},k.prototype._onmessage=function(e,t,n){var r=this._remote[e];if(!r.key||r.buffer.length||!r._ready)return 16===r.buffer.length?this.destroy(new Error("Buffer overflow")):void r.buffer.push(t);var i=this._decrypt(r,t.slice(n));if(!i||!i.length)return this.destroy(new Error("Invalid message"));var o=this._parseType(i[0]);if(!(0>o)){if(o&&!this.remoteId)return this.destroy(new Error("Did not receive handshake"));if(!(o>=j.length)){var s=j[o];try{var u=s?s.decode(i,1):null}catch(a){return this.destroy(a)}r.emit(R[o],u)}}},k.prototype._onclose=function(e){var t=this._remote[e];this._remote[e]=null,t.remote=-1,t.local>-1&&this._close(t);var n=t.discoveryKey.toString("hex");this.channels[n]===t&&delete this.channels[n]},k.prototype._onhandshake=function(e){if(!this.remoteId){this.remoteId=e.id;for(var t=e.extensions,n=0,r=0;n<A.length&&r<t.length&&64>r;)A[n]===t[r]?(this._localExtensions[n]=r,this._remoteExtensions[r]=n,n++,r++):A[n]<t[r]?n++:r++;this.emit("handshake")}},k.prototype._open=function(e){if(-1!==e.local&&-1!==e.remote){if(p(e._remoteNonce,e._firstNonce))return this.destroy(new Error("Remote echoed nonce"));e.opened=!0,e.emit("open")}},k.prototype._close=function(e){e.closed||(e.closed=!0,this.destroyed||this._sendRaw(e,r(0)),this._local[e.local]=null,e.local=-1,e.emit("end"))},k.prototype._encrypt=function(e,t){if(!this["private"])return t;var n=h.encrypt(t,e._nonce,e.key);return d(e._nonce),n},k.prototype._decrypt=function(e,t){if(!this["private"])return t;var n=t.length<16?null:h.decrypt(t,e._remoteNonce,e.key);return n?(d(e._remoteNonce),n):null},k}for(var o=e("events"),s=e("inherits"),u=e("duplexify"),a=e("length-prefixed-stream"),f=e("readable-stream"),c=e("randombytes"),l=e("create-hmac"),h=e("sodium-encryption"),d=e("increment-buffer"),p=e("buffer-equals"),g=e("varint"),b=e("xtend"),y=e("passthrough-encoding"),v=e("./messages"),_=r([0]),m=[v.Handshake,v.Have,v.Want,v.Request,v.Data,v.Cancel,null,null],w=["handshake","have","want","request","data","cancel","pause","resume"];w.length<64;)w.push("unknown"),m.push(null);t.exports=i({})}).call(this,e("_process"),e("buffer").Buffer)},{"./messages":51,_process:154,buffer:14,"buffer-equals":12,"create-hmac":28,duplexify:35,events:41,"increment-buffer":74,inherits:75,"length-prefixed-stream":83,"passthrough-encoding":151,randombytes:171,"readable-stream":58,"sodium-encryption":205,varint:225,xtend:230}],51:[function(e,t){(function(n){{var r=e("protocol-buffers");e("path")}t.exports=r(n("bWVzc2FnZSBPcGVuIHsKICByZXF1aXJlZCBieXRlcyBmZWVkID0gMTsKICByZXF1aXJlZCBieXRlcyBub25jZSA9IDI7Cn0KCm1lc3NhZ2UgSGFuZHNoYWtlIHsKICByZXF1aXJlZCBieXRlcyBpZCA9IDE7CiAgcmVwZWF0ZWQgc3RyaW5nIGV4dGVuc2lvbnMgPSAyOwp9CgptZXNzYWdlIEhhdmUgewogIHJlcXVpcmVkIHVpbnQ2NCBzdGFydCA9IDE7CiAgb3B0aW9uYWwgdWludDY0IGVuZCA9IDI7CiAgb3B0aW9uYWwgYnl0ZXMgYml0ZmllbGQgPSAzOwp9CgptZXNzYWdlIFdhbnQgewogIHJlcXVpcmVkIHVpbnQ2NCBzdGFydCA9IDE7CiAgb3B0aW9uYWwgdWludDY0IGVuZCA9IDI7Cn0KCm1lc3NhZ2UgUmVxdWVzdCB7CiAgcmVxdWlyZWQgdWludDY0IGJsb2NrID0gMTsKICBvcHRpb25hbCB1aW50NjQgYnl0ZXMgPSAyOwoKICBvcHRpb25hbCBib29sIGhhc2ggPSAzOwogIG9wdGlvbmFsIHVpbnQ2NCBub2RlcyA9IDQ7Cn0KCm1lc3NhZ2UgRGF0YSB7CiAgbWVzc2FnZSBOb2RlIHsKICAgIHJlcXVpcmVkIHVpbnQ2NCBpbmRleCA9IDE7CiAgICByZXF1aXJlZCBieXRlcyBoYXNoID0gMjsKICAgIHJlcXVpcmVkIHVpbnQ2NCBzaXplID0gMzsKICB9CgogIHJlcXVpcmVkIHVpbnQ2NCBibG9jayA9IDE7CiAgb3B0aW9uYWwgYnl0ZXMgdmFsdWUgPSAyOwogIHJlcGVhdGVkIE5vZGUgbm9kZXMgPSAzOwogIG9wdGlvbmFsIGJ5dGVzIHNpZ25hdHVyZSA9IDQ7Cn0KCm1lc3NhZ2UgQ2FuY2VsIHsKICByZXF1aXJlZCB1aW50NjQgYmxvY2sgPSAxOwogIG9wdGlvbmFsIHVpbnQ2NCBieXRlcyA9IDI7CiAgb3B0aW9uYWwgYm9vbCBoYXNoID0gMzsKfQo=","base64"))}).call(this,e("buffer").Buffer)},{buffer:14,path:152,"protocol-buffers":161}],52:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{"./_stream_readable":54,"./_stream_writable":56,"core-util-is":24,dup:16,inherits:75,"process-nextick-args":153}],53:[function(e,t,n){arguments[4][17][0].apply(n,arguments)},{"./_stream_transform":55,"core-util-is":24,dup:17,inherits:75}],54:[function(e,t,n){arguments[4][18][0].apply(n,arguments)},{"./_stream_duplex":52,"./internal/streams/BufferList":57,_process:154,buffer:14,"buffer-shims":13,"core-util-is":24,dup:18,events:41,inherits:75,isarray:79,"process-nextick-args":153,"string_decoder/":210,util:10}],55:[function(e,t,n){arguments[4][19][0].apply(n,arguments)},{"./_stream_duplex":52,"core-util-is":24,dup:19,inherits:75}],56:[function(e,t,n){arguments[4][20][0].apply(n,arguments)},{"./_stream_duplex":52,_process:154,buffer:14,"buffer-shims":13,"core-util-is":24,dup:20,events:41,inherits:75,"process-nextick-args":153,"util-deprecate":219}],57:[function(e,t,n){arguments[4][21][0].apply(n,arguments)},{buffer:14,"buffer-shims":13,dup:21}],58:[function(e,t,n){arguments[4][22][0].apply(n,arguments)},{"./lib/_stream_duplex.js":52,"./lib/_stream_passthrough.js":53,"./lib/_stream_readable.js":54,"./lib/_stream_transform.js":55,"./lib/_stream_writable.js":56,_process:154,dup:22}],59:[function(e,t){(function(n){function r(e,t){return this instanceof r?(t||(t={}),this.id=t.id||u(32),this._open={},this._db=a(e,{keyEncoding:"utf8"}),this._nodes=f(e,"nodes",{valueEncoding:p.Node}),this._data=f(e,"data",{valueEncoding:"binary"}),this._signatures=f(e,"signatures",{valueEncoding:"binary"}),this._feeds=f(e,"feeds",{valueEncoding:p.Feed}),this._bitfields=f(e,"bitfields",{valueEncoding:"binary"}),this._storage=t.storage||null,void(this._valueEncoding=t.valueEncoding||y)):new r(e,t)}function i(e,t){return e.feed=t,e.key=t.key,e.discoveryKey=t.discoveryKey,e.live=t.live,e}function o(e){return e&&n.isBuffer(e.key)&&32===e.key.length&&"function"==typeof e.open}function s(){var e=this._core;this.discoveryKey&&e._open[this.discoveryKey.toString("hex")]===this&&delete e._open[this.discoveryKey.toString("hex")]}var u=e("randombytes"),a=e("levelup-defaults"),f=e("subleveldown"),c=e("bulk-write-stream"),l=e("stream-collector"),h=e("from2"),d=e("./lib/feed"),p=e("./lib/messages"),g=e("./lib/hash"),b=e("./lib/replicate"),y=e("passthrough-encoding");t.exports=r,r.discoveryKey=r.prototype.discoveryKey=function(e){return g.discoveryKey(e)},r.prototype.replicate=function(e){return b(this,null,e)},r.prototype.createFeed=function(e,t){if("string"==typeof e&&(e=n(e,"hex")),e&&!n.isBuffer(e))return this.createFeed(null,e);t||(t={}),t.key||(t.key=e),t.valueEncoding||(t.valueEncoding=this._valueEncoding),t.live=e?!!t.live:t.live!==!1;var r=t.key&&(this._open[t.key.toString("hex")]||this._open[g.discoveryKey(t.key).toString("hex")]);if(r)return r;var i=d(this,t);return i.discoveryKey&&(this._open[i.discoveryKey.toString("hex")]=i,i.on("close",s)),i},r.prototype.stat=function(e,t){var n=this;this._feeds.get(g.discoveryKey(e).toString("hex"),function(r,i){return i?t(null,i):void n._feeds.get(e.toString("hex"),function(e,n){return n?t(null,n):void t(new Error("Feed not found"))})})},r.prototype.list=function(e,t){"function"==typeof e&&(t=e,e=null);var n=this._feeds.createValueStream({valueEncoding:{asBuffer:!0,decode:function(t){var n=p.Feed.decode(t);return e&&e.values?n:n.key}}});return l(n,t)},r.prototype.createWriteStream=function(e,t){function n(e,t){s.append(e,t)}function r(e){s.finalize(function(t){return t?e(t):void s.close(function(t){return t?e(t):(i(a,s),void e())})})}t||(t={});var s=t&&t.feed||(o(e)?e:this.createFeed(e,t)),u=t.objectMode===!1?c:c.obj,a=u(n,r);return i(a,s)},r.prototype.createReadStream=function(e,t){function n(){a.unprioritize(d)}function r(e,t){return s===u?t(null,null):!f&&a.blocks&&s===a.blocks?t(null,null):void a.get(s++,t)}t||(t={});var s=t.start||0,u=t.end||-1,a=t.feed||(o(e)?e:this.createFeed(e,t)),f=!!t.live,c=t.objectMode===!1?h:h.obj,l=c(r),d=a.prioritize({prioritize:3,start:s,end:u,linear:!0});return l.on("close",n),l.on("end",n),i(l,a)}}).call(this,e("buffer").Buffer)},{"./lib/feed":61,"./lib/hash":62,"./lib/messages":63,"./lib/replicate":64,buffer:14,"bulk-write-stream":15,from2:44,"levelup-defaults":100,"passthrough-encoding":151,randombytes:171,"stream-collector":208,subleveldown:211}],60:[function(e,t){(function(e){function n(t){return this instanceof n?(t||(t=1),"number"==typeof t&&(t=e(Math.ceil(t/8)),t.fill(0)),this.length=8*t.length,void(this.buffer=t)):new n(t)}function r(t,n){for(var r=t.length;n>=r;)r=0===r?1:2*r;var i=e(r);return t.copy(i),i.fill(0,t.length),i}t.exports=n,n.prototype.set=function(e,t){var n=7&e,i=(e-n)/8,o=128>>n;i>=this.buffer.length&&(this.buffer=r(this.buffer,i),this.length=8*this.buffer.length);var s=this.buffer[i],u=t?s|o:s&~o;return s===u?!1:(this.buffer[i]=u,!0)},n.prototype.get=function(e){var t=7&e,n=(e-t)/8;return n>=this.buffer.length?!1:!!(this.buffer[n]&128>>t)},n.prototype.toBuffer=function(e){e||(e=0);for(var t=this.buffer.length-1;t>=0&&!this.buffer[t];)t--;return this.buffer.slice(Math.floor(e/8),t+1)}}).call(this,e("buffer").Buffer)},{buffer:14}],61:[function(e,t){(function(n,r){function i(e,t){function n(){if(!--a._missing){for(;a._appending;){var e=a.blocks++;a.tree.set(2*e),a.bitfield.set(e,!0),a._appending--,a._drain(e),a.emit("update")}a.bytes+=a._appendingBytes,a._appendingBytes=0,a.live?a._sync(null,r):r(null)}}function r(e){a._appendCallback(e),a._appendCallback=null,l=null,a._buffer&&(l=a._bufferCallbacks,a._append(a._buffer,o))}function o(e){for(var t=0;t<l.length;t++)l[t](e)}function s(e){a._open(e)}function u(e,t){a._flush(t)}if(!(this instanceof i))return new i(e,t);p.EventEmitter.call(this);var a=this;if(this.options=t||{},this.key=this.options.key||null,this.key&&32!==this.key.length)throw new Error("key should be a 32 byte buffer");if(this.secretKey=this.options.secretKey||null,this.discoveryKey=this.key?_.discoveryKey(this.key):null,this.prefix=null,this.live=!!this.options.live||!!this.secretKey,this.open=g(s),this.opened=!1,this.tree=m(),this.bitfield=v(8),this.blocks=0,this.bytes=0,this.storage=t.storage?k(this,t.storage):null,!this.storage&&e._storage&&(this.storage=k(this,e._storage(this))),this.valueEncoding=t.valueEncoding,this.peers=[],this.selection=x(this),this.live&&!this.key){var c=b.keyPair();this.key=c.publicKey,this.secretKey=c.secretKey,this.discoveryKey=_.discoveryKey(this.key)}t.sparse||this.selection.add({priority:0,start:0,end:1/0}),this._sync=f(u),this._first=!0,this._db=e._db,this._core=e,this._prefix=null,this._merkle=null,this._missing=0,this._appendCallback=null,this._buffer=null,this._bufferCallbacks=null,this._afterAppend=n,this._appending=0,this._appendingBytes=0,this._downloaded=0;var l=null}function o(){}function s(e){return!!e&&"function"==typeof e.pipe}function u(e){return 0===(1&e)}function a(e){for(var t=0,n=0;n<e.length;n++)t+=e[n].size;return t}var f=e("last-one-wins"),c=e("inherits"),l=e("flat-tree"),h=e("randombytes"),d=e("merkle-tree-stream/generator"),p=e("events"),g=e("thunky"),b=e("sodium-signatures"),y=e("buffer-equals"),v=e("./bitfield"),_=e("./hash"),m=e("./tree-index"),w=e("./messages"),k=e("./storage"),E=e("./replicate"),x=e("./selection");t.exports=i,c(i,p.EventEmitter),i.prototype.createReadStream=function(e){return e||(e={}),e.feed=this,this._core.createReadStream(null,e)},i.prototype.createWriteStream=function(e){return e||(e={}),e.feed=this,this._core.createWriteStream(null,e)},i.prototype.prioritize=function(e,t){var n=this.selection.add(e,t);return this._updatePeers(),n},i.prototype.unprioritize=function(e){return this.selection.remove(e)},i.prototype.replicate=function(e){return s(e)&&(e={stream:e}),E(this._core,this,e)},i.prototype.head=function(e,t){function n(s,u){return s?t(s):(u&&i.push(u),r.length?void o._core._nodes.get(o._prefix+r.shift(),n):t(null,_.tree(i),e))}if("function"==typeof e)return this.head(this.blocks-1,e);var r=l.fullRoots(2+2*e),i=[],o=this;n(null,null)},i.prototype.has=function(e){return this.bitfield.get(e)},i.prototype.get=function(e,t){function n(e,n){if(e)return t(e);try{n=r.valueEncoding.decode(n)}catch(e){return t(e)}t(null,n)}var r=this;return this.opened?this.bitfield.get(e)?void(this.storage?this.storage.get(e,n):this._core._data.get(this._prefix+e,n)):this._getNext(e,t):this._openAndGet(e,t)},i.prototype._getNext=function(e,t){function n(n){return n?t(n):void r.get(e,t)}var r=this;this.selection.add({priority:2,block:e,bytes:0},n),this._updatePeers()},i.prototype.seek=function(e,t,n){if(!this.opened)return this._openAndSeek(e,t,n);if("function"==typeof t)return this.seek(e,null,t);t||(t={});var r=this;this._seek(e,function(i,o,s){return!i&&u(o)?n(null,o/2,s):(r.selection.add({priority:4,bytes:e,start:t.start,end:t.end},n),void r._updatePeers())})},i.prototype.put=function(e,t,n,r){function i(e,t){if(e)return r(e);if(t&&t.index===h.index)return y(h.hash,t.hash)?void u._db.batch(f,o):r(new Error("Checksum mismatch"));for(var s=l.sibling(h.index),d=u.tree.get(h.index);!d&&(t&&t.index===s||a<c.length&&c[a].index===s);){var p=t&&t.index===s?t:c[a++];h.hash=_.parent(h,p),h.size+=p.size,h.index=l.parent(h.index),s=l.sibling(h.index),d=u.tree.get(h.index),f.push({type:"put",key:"!nodes!"+u._prefix+p.index,value:w.Node.encode(p)}),f.push({type:"put",key:"!nodes!"+u._prefix+h.index,value:w.Node.encode(h)})}return d?u._core._nodes.get(u._prefix+h.index,i):u.tree.get(s)?u._core._nodes.get(u._prefix+s,i):(u._putRoots(h,f,n.nodes,a,n.signature,o),void(a=c.length))}function o(n){return n?r(n):u.storage?void u.storage.put(e,t,s):s(null)}function s(n){if(n)return r(n);u.tree.set(2*e);for(var i=0;a>i;i++)u.tree.set(c[i].index);u.bitfield.set(e,!0)&&u.emit("have",e,t),u._first=!1,u._sync(null,r),u._drain(e)}if(!this.opened)return this._openAndPut(e,t,n,r);t=this.valueEncoding.encode(t);var u=this,a=0,f=[],c=n.nodes||[],h={index:2*e,size:t.length,hash:_.data(t)};this.storage||f.push({type:"put",key:"!data!"+this._prefix+e,value:t}),f.push({type:"put",key:"!nodes!"+this._prefix+h.index,value:w.Node.encode(h)}),i(null,null)},i.prototype._seek=function(e,t){function n(n){if(u(n))return t(null,n,e);for(var i=l.leftChild(n);!o.tree.get(i);){if(u(i))return t(null,f,e);i=l.leftChild(i)}s.get(o._prefix+i,r)}function r(r,i){return r?t(r):void(i.size>e?(f=i.index,n(i.index)):(e-=i.size,n(l.sibling(i.index))))}function i(r,u){if(r)return t(r);if(u){if(u.size>e)return f=u.index,n(u.index);e-=u.size}return a.length?void s.get(o._prefix+a.shift(),i):t(new Error("Out of bounds"))}if(0===e)return t(null,0,0);var o=this,s=this._core._nodes,a=l.fullRoots(2*this.blocks),f=0;i(null,null)},i.prototype._drain=function(e){var t=0,n=this.selection.range(4),r=[];for(t=0;t<n.length;t++){var i=n[t];i.bytes&&r.push(i)}for(this.selection.update(e),t=0;t<r.length;t++)this._reseek(r[t]);for(t=0;t<this.peers.length;t++)this.peers[t].have(e);this._updateDownloaded()},i.prototype._reseek=function(e){var t=this;this._seek(e.bytes,function(n,r){!n&&u(r)&&t.selection.remove(e)&&t.seek(e.bytes,e.callback)})},i.prototype._putRoots=function(e,t,n,r,i,o){function s(f,g){if(f)return o(f);for(g&&(d[p++]=g);p<d.length;){var v=h[p];if(v!==e.index){if(!(r<n.length&&v===n[r].index))return void u._core._nodes.get(u._prefix+v,s);d[p++]=n[r++]}else d[p++]=e}var m=_.tree(d);if(i){if(!b.verify(m,i,u.key))return o(new Error("Signature does not verify"));u.live=!0,t.push({type:"put",key:"!signatures!"+u._prefix+c,value:i})}else if(!y(m,u.key))return o(new Error("Checksum does not match key"));for(var k=0;k<d.length;k++)d[k]!==e&&t.push({type:"put",key:"!nodes!"+u._prefix+d[k].index,value:w.Node.encode(d[k])});if(r!==n.length)return o(new Error("Cannot verify all nodes"));if(u._first&&t.push({type:"put",key:"!feeds!"+u.discoveryKey.toString("hex"),value:w.Feed.encode(u)}),h.length){var E=l.rightSpan(h[h.length-1])/2+1;E>u.blocks&&(u.blocks=E,u.bytes=a(d),u.emit("update"))}u._db.batch(t,o)}var u=this,f=n.length?n[n.length-1].index:e.index,c=Math.max(l.rightSpan(e.index),l.rightSpan(f))+2,h=l.fullRoots(c),d=new Array(h.length),p=0;s(null,null)},i.prototype.digest=function(e){return this.tree.digest(2*e)},i.prototype.proof=function(e,t,n){function r(e,t){return e?n(e):(u.signature=t,void n(null,u))}function i(e,t){return e?n(e):(t&&u.nodes.push(t),a===o.nodes.length?s.live&&o.verifiedBy?s._core._signatures.get(s._prefix+o.verifiedBy,r):n(null,u):void s._core._nodes.get(s._prefix+o.nodes[a++],i))}if("function"==typeof t)return this.proof(e,null,t);if(!this.opened)return this._openAndProof(e,n);t||(t={});var o=this.tree.proof(2*e,t);if(!o)return n(new Error("No proof available"));var s=this,u={nodes:[],signature:null},a=0;i(null,null)},i.prototype.finalize=function(e){function t(t){return t?e(t):(i.key=i._merkle.roots.length?_.tree(i._merkle.roots):null,i.discoveryKey=i.key&&_.discoveryKey(i.key),i.key?void i._sync(null,n):e())}function n(t){return t?e(t):void i._core._feeds.put(i.discoveryKey.toString("hex"),i,e)}function r(t){return t?e(t):void i.finalize(e)}var i=this;return e||(e=o),this.opened?this.live?this.flush(e):void this.flush(t):this.open(r)},i.prototype.append=function(e,t){"string"==typeof e&&(e=[r(e)]),Array.isArray(e)||(e=[e]),this._append(e,t||o)},i.prototype.close=function(e){function t(t){return t?e(t):void(r.storage?r.storage.close(n):n())}function n(t){return t?e(t):(r.emit("close"),void e())}e||(e=o);var r=this;this.flush(t)},i.prototype.blocksRemaining=function(){for(var e=0,t=0;t<this.blocks;t++)this.bitfield.get(t)||e++;return e},i.prototype._updatePeers=function(){for(var e=0;e<this.peers.length;e++)this.peers[e].update()},i.prototype._updateDownloaded=function(){if(this.has(this._downloaded)){for(;this.has(this._downloaded);)this._downloaded++;this._downloaded>=this.blocks&&this.emit("download-finished")}},i.prototype._flush=function(e){var t=[{type:"put",key:this._prefix+"blocks",value:this.bitfield.buffer},{type:"put",key:this._prefix+"tree",value:this.tree.bitfield.buffer}];this._core._bitfields.batch(t,e)},i.prototype._open=function(e){function t(e,t){if(t)s.discoveryKey=t.discoveryKey,s.key=t.key,s.secretKey=t.secretKey,s.prefix=t.prefix||t.key,s.live=t.live;else{var n=s.secretKey||!s.key;n&&(u=!0)}s.prefix||(s.prefix=s.options.prefix||h(32)),s._prefix="!"+s.prefix.toString("hex")+"!";var i=2;s._core._bitfields.get(s._prefix+"tree",function(e,t){t&&(s.tree=m(t)),--i||r()}),s._core._bitfields.get(s._prefix+"blocks",function(e,t){t&&(s.bitfield=v(t)),--i||r()})}function r(){function e(r,f){return r?o(r):(f&&n.push(f),void(t.length?s._core._nodes.get(s._prefix+t.shift(),e):(s.bytes=Math.max(s.bytes,a(n)),s._merkle=d(_,n),u?s._core._feeds.put(s.discoveryKey.toString("hex"),s,i):i())))}var t=s.tree.roots(),n=[];t.length&&(s.blocks=l.rightSpan(t[t.length-1])/2+1),e(null,null)}function i(e){return e?o(e):s.storage?void s.storage.open(o):o(null)}function o(t){return t?e(t):(u&&(s._first=!1),s.opened=!0,s.emit("open"),void e())}var s=this,u=!1;return this.discoveryKey?void this._core._feeds.get(this.discoveryKey.toString("hex"),function(e,n){e?s._core._feeds.get(s.key.toString("hex"),t):t(null,n)}):(this.prefix=this.options.prefix||h(32),this._merkle=d(_),this._prefix="!"+this.prefix.toString("hex")+"!",n.nextTick(i))},i.prototype._append=function(e,t){if(!this.opened)return this._openAndAppend(e,t);if(this.live&&!this.secretKey)throw new Error("Only the owner can append to this feed");if(this._appendCallback){if(this._buffer)for(var n=0;n<e.length;n++)this._buffer.push(e[n]);else this._buffer=e,this._bufferCallbacks=[];return void this._bufferCallbacks.push(t)}this._appending=e.length,this._missing=this.storage?2:1,this._buffer=null,this._bufferCallbacks=null,this._appendCallback=t;for(var r=[],i=0;i<e.length;i++){var o=this.valueEncoding.encode(e[i]),s=this._merkle.next(o);this._appendingBytes+=o.length;for(var u=0;u<s.length;u++){var a=s[u];if(a.data&&(this.storage||r.push({type:"put",key:"!data!"+this._prefix+a.index/2,value:a.data}),this.live)){var f=b.sign(_.tree(this._merkle.roots),this.secretKey);r.push({type:"put",key:"!signatures!"+this._prefix+(a.index+2),value:f})}r.push({type:"put",key:"!nodes!"+this._prefix+a.index,value:w.Node.encode(a)})}}this._db.batch(r,this._afterAppend),this.storage&&this.storage.append(this.blocks,e,this._afterAppend)},i.prototype.flush=function(e){return e||(e=o),this.live&&!this.secretKey?e():void this._append([],e)},i.prototype._openAndAppend=function(e,t){var n=this;this.open(function(r){return r?t(r):void n._append(e,t)})},i.prototype._openAndPut=function(e,t,n,r){var i=this;this.open(function(o){return o?r(o):void i.put(e,t,n,r)})},i.prototype._openAndGet=function(e,t){var n=this;this.open(function(r){return r?t(r):void n.get(e,t)})},i.prototype._openAndSeek=function(e,t,n){var r=this;this.open(function(i){return i?n(i):void r.seek(e,t,n)})},i.prototype._openAndProof=function(e,t){var n=this;this.open(function(r){return r?t(r):void n.proof(e,t)})}}).call(this,e("_process"),e("buffer").Buffer)},{"./bitfield":60,"./hash":62,"./messages":63,"./replicate":64,"./selection":65,"./storage":66,"./tree-index":67,_process:154,buffer:14,"buffer-equals":12,events:41,"flat-tree":42,inherits:75,"last-one-wins":80,"merkle-tree-stream/generator":146,randombytes:171,"sodium-signatures":206,thunky:214}],62:[function(e,t,n){(function(t){function r(){return u("sha256")}function i(e){return s("sha256",e)}function o(e){return a.encode(e,d)}var s=e("create-hmac"),u=e("create-hash"),a=e("uint64be"),f=t([0]),c=t([1]),l=t([2]),h=t("hypercore"),d=t([0,0,0,0,0,0,0,0]);n.data=function(e){return r().update(f).update(o(e.length)).update(e).digest()},n.leaf=function(e){return n.data(e.data)},n.parent=function(e,t){if(e.index>t.index){var n=e;e=t,t=n}return r().update(c).update(o(e.size+t.size)).update(e.hash).update(t.hash).digest()},n.tree=function(e,t){for(var n=(t?i(t):r()).update(l),s=0;s<e.length;s++){var u=e[s];n.update(u.hash),n.update(o(u.index)),n.update(o(u.size))}return n.digest()},n.discoveryKey=function(e){return s("sha256",e).update(h).digest()}}).call(this,e("buffer").Buffer)},{buffer:14,"create-hash":25,"create-hmac":28,uint64be:217}],63:[function(e,t){var n=(e("path"),e("protocol-buffers"));t.exports=n("message Feed {\n  optional bytes prefix = 1;\n  required bytes discoveryKey = 2;\n  required bytes key = 3;\n  optional bytes secretKey = 4;\n  optional bool live = 5;\n}\n\nmessage Node {\n  required uint64 index = 1;\n  required uint64 size = 2;\n  required bytes hash = 3;\n}\n")},{path:152,"protocol-buffers":161}],64:[function(e,t){function n(e,t,n){n||(n={});var r=n.stream;return r||(r=m({id:e.id,"private":n["private"]!==!1}),r.setTimeout(n.timeout||5e3,r.destroy)),t&&t.open(function(e){return e?r.destroy(e):void i(r,t,n)}),r}function r(e){S.EventEmitter.call(this),this._tick=0,this._index=-1,this._blocks=0,this.uploading=!0,this.downloading=!0,this.maxRequests=l(e),this.feed=e,this.channel=null,this.stream=null,this.remotePausing=!1,this.remoteBitfield=w(16),this.remoteTree=B(16),this.remoteRequests=[],this.reading=!1,this.pausing=!1,this.responses=[],this.requests=[]}function i(e,t,n){if(!e.destroyed){var i=new r(t),l=i.channel=e.open(t.key,{state:i});i.uploading=n.upload!==!1,i.downloading=n.download!==!1,i.stream=e,E.add(t.peers,i),t.emit("peer-add",i),l.on("have",u),l.on("want",s),l.on("request",a),l.on("data",f),l.on("cancel",c),l.on("pause",h),l.on("resume",d),l.on("tick",p),l.on("end",g),l.opened?o.call(l):l.on("open",o)}}function o(){var e=this.state;e.uploading?e.channel.have({start:0,bitfield:k.encode(e.feed.bitfield.toBuffer())}):e.channel.pause()}function s(e){var t=this.state,n=8*Math.floor(e.start/8);t.channel.have({start:n,bitfield:k.encode(this.feed.bitfield.toBuffer(n))})}function u(e){var t=this.state,n=e.start,r=e.end||n+1,i=0;if(e.bitfield)for(var o=w(k.decode(e.bitfield)),s=0;s<o.length;s++){var u=o.get(s);t.remoteBitfield.set(n+s,u),u&&(i=n+s+1)}else{for(;r>n;)t.remoteBitfield.set(n++,!0);i=r}i>t._blocks&&(t._blocks=i),t.update()}function a(e){var t=this.state;1===t.remoteRequests.push(e)&&_(t)}function f(e){var t=this.state;0===b(t.requests,e.block)&&(t._tick=0),1===t.responses.push(e)&&y(t),t.update()}function c(e){for(var t=this.state,n=0;n<t.remoteRequests.length;n++){var r=t.remoteRequests[n];if(r.block===e.block&&r.bytes===e.bytes)return void(n?t.remoteRequests.splice(n,1):t.remoteRequests.shift())}}function l(e){if(!e.blocks)return 16;var t=Math.ceil(e.bytes/e.blocks),n=262144;return Math.max(16,Math.min(Math.ceil(n/t),1024))}function h(){var e=this.state;for(e.remotePausing=!0;e.requests.length;)e.feed.selection.cancel(e.requests.shift());e._tick=0,e.updateAll(),e.emit("pause")}function d(){var e=this.state;e.remotePausing=!1,e.update()}function p(){var e=this.state;!e.requests.length||++e._tick<4||(e.feed.selection.cancel(e.requests.shift()),e.updateAll())}function g(){for(var e=this.state;e.requests.length;)e.feed.selection.cancel(e.requests.shift());E.remove(e.feed.peers,e),e.feed.emit("peer-remove",e),e.updateAll(),e.emit("close")}function b(e,t){var n=e.indexOf(t);return 0===n?e.shift():n>-1&&e.splice(n,1),n}function y(e){var t=e.responses[0];e.feed.put(t.block,t.value,t,function(n){return n?e.channel.destroy(n):(e.feed.emit("download",t.block,t.value,e),e.responses.shift(),void(e.responses.length&&y(e)))})}function v(e){var t=e.remoteRequests[0];e.feed._seek(t.bytes,function(n,r){if(n||1&r)return t.bytes=0,void _(e);var i=r/2;return e.remoteBitfield.get(i)?(t.bytes=0,void _(e)):(e.remoteRequests.unshift({block:i,bytes:0,hash:e.hash}),void _(e))})}function _(e){for(var t=e.remoteRequests[0];e.remoteBitfield.get(t.block)&&!t.bytes;){if(e.remoteRequests.shift(),!e.remoteRequests.length)return;t=e.remoteRequests[0]}var n={digest:t.nodes,tree:e.remoteTree};return t.bytes?v(e):void(e.reading||(e.reading=!0,e.feed.proof(t.block,n,function(n,r){return n?e.channel.destroy(n):void e.feed.get(t.block,function(n,i){if(n)return e.channel.destroy(n);e.remoteBitfield.set(t.block,!0);for(var o=0;o<r.nodes.length;o++)e.remoteTree.set(r.nodes[o].index);e.remoteTree.set(2*t.block),e.feed.emit("upload",t.block,i,e),e.channel.data({block:t.block,value:i,nodes:r.nodes,signature:r.signature}),e.remoteRequests.shift(),e.reading=!1,e.remoteRequests.length&&_(e)})})))}var m=e("hypercore-protocol"),w=e("./bitfield"),k=e("bitfield-rle"),E=e("unordered-set"),x=e("inherits"),S=e("events"),B=e("./tree-index");t.exports=n,x(r,S.EventEmitter),r.prototype.have=function(e){(this.channel.opened||!this.uploading)&&this.channel.have({start:e})},r.prototype.update=function(){if(this.downloading&&!this.remotePausing)for(this.maxRequests=l(this.feed);;){if(this.requests.length>=this.maxRequests)return;var e=this.feed.selection.next(this.remoteBitfield,this._blocks);if(!e)return;this.requests.push(e.block),this.channel.request(e)}},r.prototype.updateAll=function(){for(var e=0;e<this.feed.peers.length;e++)this.feed.peers[e].update()}},{"./bitfield":60,"./tree-index":67,"bitfield-rle":8,events:41,"hypercore-protocol":50,inherits:75,"unordered-set":218}],65:[function(e,t){function n(e){return this instanceof n?(this._feed=e,this._reserved=o(),this._ranges=[[],[],[],[],[]],void(this._offsets=[0,0,0,0,0])):new n(e)}function r(e){return Math.min("number"==typeof e?e:2,4)}function i(e,t,n){"number"==typeof e.block?(this.start=e.block,this.end=e.block+1,this.strategy=1):(this.start=e.start||0,this.end=e.end>0?e.end:1/0,this.strategy=e.linear?1:0),this.bytes=e.bytes||0,this.priority=t,this.callback=n,this._downloaded=this.start,this._index=0}var o=e("./bitfield"),s=e("unordered-set");t.exports=n,n.prototype.next=function(e,t){for(var n=this._ranges.length-1;n>=0;n--){var r=this._ranges[n];if(r.length){this._offsets[n]>=r.length&&(this._offsets[n]=0);for(var i=this._offsets[n]++,o=0;o<r.length;o++){var s=i+o<r.length?r[i+o]:r[i+o-r.length],u=this._next(s,e,t);

if(u>-1)return this._reserved.set(u,!0),{block:u,bytes:s.bytes,nodes:this._feed.digest(u)}}}}return null},n.prototype.cancel=function(e){this._reserved.set(e,!1)},n.prototype.add=function(e,t){var n=r(e.priority),o=this._ranges[n],u=new i(e,n,t);return s.add(o,u),u},n.prototype.range=function(e){return this._ranges[e]},n.prototype.update=function(){for(var e=0;e<this._ranges.length;e++){for(var t=this._ranges[e],n=null,r=0;r<t.length;r++){for(var i=t[r];this._feed.has(i._downloaded)&&i._downloaded<i.end;)i._downloaded++;i._downloaded===i.end&&(n||(n=[]),n.push(i))}if(n)for(var o=0;o<n.length;o++){var u=n[o].callback;s.remove(t,n[o]),u&&u()}}},n.prototype.remove=function(e){if(e instanceof i)return!!s.remove(this._ranges[e.priority],e);for(var t=r(e.priority),n=this._ranges[t],o=new i(e,t),u=0;u<n.length;u++){var a=n[u];if(a.bytes&&a.bytes===o.bytes||a.start===o.start&&a.end===o.end)return s.remove(n,a),!0}return!1},n.prototype._next=function(e,t,n){switch(e.strategy){case 0:return this._nextRandom(e,t,n);case 1:return this._nextLinear(e,t,n)}},n.prototype._nextLinear=function(e,t,n){n=Math.min(e.end,n);for(var r=e._downloaded;n>r;r++)if(this._valid(r,t))return r;return-1},n.prototype._nextRandom=function(e,t,n){if(n=Math.min(e.end,n),n<e._downloaded)return-1;var r=Math.floor(Math.random()*(n-e._downloaded))+e._downloaded,i=0;for(i=r;n>i;i++)if(this._valid(i,t))return i;for(i=0;r>i;i++)if(this._valid(i,t))return i;return-1},n.prototype._valid=function(e,t){return t.get(e)&&!this._reserved.get(e)&&!this._feed.has(e)}},{"./bitfield":60,"unordered-set":218}],66:[function(e,t){(function(n){function r(e,t){return this instanceof r?(this.store=t,void(this.feed=e)):new r(e,t)}function i(){}function o(e,t,n,r){function i(t,i){return t?h=t:i.index===o?d=i.size:l+=i.size,--c?void 0:h?r(h):void(n?e.store.write(l,n,r):e.store.read(l,d,r))}var o=2*t,u=e.feed._prefix,a=e.feed._core._nodes,f=s.fullRoots(2*t),c=f.length,l=0,h=null,d=0;n||(c++,a.get(u+2*t,i));for(var p=0;p<f.length;p++)a.get(u+f[p],i);!c&&n&&e.store.write(0,n,r)}var s=e("flat-tree");t.exports=r,r.prototype.open=function(e){this.store.open?this.store.open(e):e()},r.prototype.append=function(e,t,r){return t.length?void o(this,e,1===t.length?t[0]:n.concat(t),r):r(null)},r.prototype.get=function(e,t){o(this,e,null,t||i)},r.prototype.put=function(e,t,n){o(this,e,t,n||i)},r.prototype.close=function(e){this.store.close?this.store.close(e):e()}}).call(this,e("buffer").Buffer)},{buffer:14,"flat-tree":42}],67:[function(e,t){function n(e){return this instanceof n?void(this.bitfield=o(e||32)):new n(e)}function r(e,t,n,r){for(var i=s.fullRoots(e),o=0;o<i.length;o++)i[o]===n||r.get(i[o])||t.push(i[o])}function i(e){return(e-(1&e))/2}var o=e("./bitfield"),s=e("flat-tree");t.exports=n,n.prototype.proof=function(e,t){t||(t={});var o=[],u=t.tree||n(1),a=t.digest||0;if(!this.get(e))return null;if(1===a)return{nodes:o,verifiedBy:0};var f=null,c=e,l=e,h=1&a;for(a=i(a);a;){if(1===a&&h){this.get(l)&&u.set(l),s.sibling(l)<l&&(l=s.sibling(l)),f=s.fullRoots(s.rightSpan(l)+2);for(var d=0;d<f.length;d++)this.get(f[d])&&u.set(f[d]);break}c=s.sibling(l),1&a&&this.get(c)&&u.set(c),l=s.parent(l),a=i(a)}for(l=e;!u.get(l);){if(c=s.sibling(l),!this.get(c)){var p=this.verifiedBy(l);return r(p,o,l,u),{nodes:o,verifiedBy:p}}u.get(c)||o.push(c),l=s.parent(l)}return{nodes:o,verifiedBy:0}},n.prototype.digest=function(e){if(this.get(e))return 1;for(var t=0,n=s.sibling(e),r=8*this.bitfield.buffer.length,i=2,o=s.depth(e),u=s.parent(n,o++);s.rightSpan(n)<r||s.leftSpan(u)>0;){if(this.get(n)&&(t|=i),this.get(u))return t|=2*i+1,t+1===4*i?1:t;n=s.sibling(u),u=s.parent(n,o++),i*=2}return t},n.prototype.roots=function(){for(var e=0,t=0,n=this.bitfield.length;s.rightSpan(t)<n;)t=s.parent(t),this.get(t)&&(e=t);return this.get(e)?s.fullRoots(this.verifiedBy(e)):[]},n.prototype.verifiedBy=function(e,t){var n=this.get(e);if(!n)return 0;for(var r=s.depth(e),i=e,o=s.parent(i,r++);this.get(o)&&this.get(s.sibling(i));)i=o,o=s.parent(i,r++);for(r--;r;){for(i=s.leftChild(s.index(r,s.offset(i,r)+1),r),r--;!this.get(i)&&r;)i=s.leftChild(i,r--);t&&this.get(i)&&t.push(i)}return this.get(i)?i+2:i},n.prototype.get=function(e){return this.bitfield.get(e)},n.prototype.set=function(e){if(!this.bitfield.set(e,!0))return!1;for(;this.bitfield.get(s.sibling(e))&&(e=s.parent(e),this.bitfield.set(e,!0)););return!0}},{"./bitfield":60,"flat-tree":42}],68:[function(e,t){(function(n){"use strict";function r(e){var t=l[e];if(!t)throw new Error("Unknown message type: "+u(e));return t}function i(e,t,n){t=t||0,n=n||e.length;var o=e[t],s=r(o),a=s.decode(e,1+t,n);return a.type=u(o),i.bytes=n-t-1,a}function o(e,t,i){i=i||0;var s=e.type,u=a(s||"file"),f=r(u),c=f.encodingLength(e)+1,l=t||new n(c+i);return f.encode(e,l,1+i),l[i]=u,o.bytes=c,l}function s(e){return r(a(e.type||"file")).encodingLength(e)+1}function u(e){switch(e){case 0:return"index";case 1:return"file";case 2:return"directory";case 3:return"symlink";case 4:return"hardlink"}return"unknown"}function a(e){switch(e){case"index":return 0;case"file":return 1;case"directory":return 2;case"symlink":return 3;case"hardlink":return 4}return-1}var f=e("protocol-buffers"),c=(e("path").join,f(n("bWVzc2FnZSBJbmRleCB7CiAgb3B0aW9uYWwgYnl0ZXMgY29udGVudCA9IDE7Cn0KCm1lc3NhZ2UgRW50cnkgewogIG1lc3NhZ2UgQ29udGVudCB7CiAgICByZXF1aXJlZCB1aW50NjQgYmxvY2tPZmZzZXQgPSAxOwogICAgcmVxdWlyZWQgdWludDY0IGJ5dGVzT2Zmc2V0ID0gMjsKICB9CgogIHJlcXVpcmVkIHN0cmluZyBuYW1lID0gMTsKICBvcHRpb25hbCBzdHJpbmcgbGlua25hbWUgPSAyOwogIG9wdGlvbmFsIHVpbnQ2NCBsZW5ndGggPSAzOwogIG9wdGlvbmFsIHVpbnQ2NCBibG9ja3MgPSA0OwogIG9wdGlvbmFsIHVpbnQzMiBtb2RlID0gNTsKICBvcHRpb25hbCB1aW50MzIgdWlkID0gNjsKICBvcHRpb25hbCB1aW50MzIgZ2lkID0gNzsKICBvcHRpb25hbCB1aW50NjQgbXRpbWUgPSA4OwogIG9wdGlvbmFsIHVpbnQ2NCBjdGltZSA9IDk7CiAgb3B0aW9uYWwgQ29udGVudCBjb250ZW50ID0gMTA7Cn0K","base64"))),l=[c.Index,c.Entry,c.Entry,c.Entry,c.Entry];t.exports={decode:i,encode:o,encodingLength:s}}).call(this,e("buffer").Buffer)},{buffer:14,path:152,"protocol-buffers":161}],69:[function(e,t){(function(n,r){function i(e,t,n){function r(e){i._open(e)}h.EventEmitter.call(this);var i=this;this.options=n||{},this.drive=e,this.live=this.options.live=!t&&this.options.live!==!1,this.metadata=e.core.createFeed(t,this.options),this.content=null,this.key=t||this.metadata.key,this.discoveryKey=this.metadata.discoveryKey,this.owner=!t,this.open=d(r),this.id=e.id,this._sparse=!!this.options.sparse,this._closed=!1,this._appending=[],this._indexBlock=-1,this._finalized=!1}function o(){}function s(e){return r.isBuffer(e)?e.length:r.byteLength(e)}function u(e){function t(t,s){if(!i)return r(t,s);var u=Math.min(65536,e.length-o);if(!u)return n(s);var a=o;o+=u,e.read(a,u,s)}function n(t){return e.close?void e.close(function(e){return e?t(e):void t(null,null)}):t(null,null)}function r(n,r){return i=!0,e.open?void e.open(function(e){return e?r(e):void t(n,r)}):t(n,r)}var i=!1,o=0;return g(t)}function a(e){if(!e.key)throw new Error("Finalize the archive before replicating it")}function f(e){if(e._finalized&&!e.metadata.live)throw new Error("Cannot append any entries after the archive is finalized")}function c(e){return e&&"function"==typeof e.pipe}var l=e("inherits"),h=e("events"),d=e("thunky"),p=e("bulk-write-stream"),g=e("from2"),b=e(n.browser?"through2":"rabin"),y=e("pump"),v=e("pumpify"),_=e("stream-collector"),m=e("./storage"),w=e("./cursor"),k=e("hyperdrive-encoding");t.exports=i,l(i,h.EventEmitter),i.prototype.replicate=function(e){e||(e={}),c(e)&&(e={stream:e}),a(this);var t=e.stream,n=this;return t?this.metadata.replicate(e):t=e.stream=this.metadata.replicate(e),this.open(function(r){return r?t.destroy(r):void(n.content&&n.content.key&&n.content.replicate(e))}),t},i.prototype.list=function(e,t){function n(e,t){return o?(s===i._indexBlock&&s++,(s!==i.metadata.blocks||a)&&u--?void i.metadata.get(s++,function(e,n){if(e||!n)return t(e,n);try{var r=k.decode(n)}catch(e){return t(e)}t(null,r)}):t(null,null)):r(e,t)}function r(t,r){o=!0,i.open(function(o){return o?r(o):(i.live||e.live===!0||(a=!1),void n(t,r))})}if("function"==typeof e)return this.list(null,e);e||(e={});var i=this,o=!1,s=e.offset||0,u=e.limit||1/0,a=e.live===!1?!1:e.live||!t;return _(g.obj(n),t)},i.prototype.get=function(e,t,n){function r(){var e=new Error("Get timed out");e.timeout=!0,e.code="ETIMEDOUT",i(e)}function i(e,t){u&&clearTimeout(u),s||(s=!0,n(e,t))}if("function"==typeof t)return this.get(e,null,t);if("object"==typeof e&&e.name)return n(null,e);t||(t={});var o=this,s=!1,u=null;return t.timeout&&(u=setTimeout(r,t.timeout)),"string"==typeof e?this.lookup(e,i):void this.open(function(t){return t?i(t):(o._indexBlock<=e&&o._indexBlock>-1&&e++,void o.metadata.get(e,function(e,t){if(e)return i(e);if(!t)return i(null,null);try{var n=k.decode(t)}catch(e){return i(e)}i(null,n)}))})},i.prototype.lookup=function(e,t){function n(e){return i?t(null,i):void t(e||new Error("Could not find entry"))}var r=this.list({live:!1}),i=null;r.on("data",function(t){t.name===e&&(i=t)}),r.on("error",n),r.on("close",n),r.on("end",n)},i.prototype.countDownloadedBlocks=function(e){if(!this.content)return 0;for(var t=0,n=e.content.blockOffset,r=0;r<e.blocks;r++)this.content.has(r+n)&&t++;return t},i.prototype.isEntryDownloaded=function(e){return this.countDownloadedBlocks(e)===e.blocks},i.prototype.finalize=function(e){function t(t){return t?e(t):(n.key=n.metadata.key,n.discoveryKey=n.metadata.discoveryKey,void e(null))}e||(e=o);var n=this;this.open(function(r){return r?t(r):(n._finalized=!0,n._appending.length?void n.once("idle",function(){n.finalize(e)}):void n.content.finalize(function(e){return e?t(e):n._indexBlock>-1?n.metadata.finalize(t):void n._writeIndex(function(e){return e?t(e):void n.metadata.finalize(t)})}))})},i.prototype.createFileWriteStream=function(e,t){function n(){var e=u._appending.indexOf(h);e>-1&&(u._appending.splice(e,1),u._appending.length?u._appending[0].emit("continue"):u.emit("idle"))}function r(n,o){a=!0,u.open(function(s){return s?o(s):void(0!==u._appending.indexOf(h)?h.once("continue",function(){r(n,o)}):(c=u.content.blocks,l=u.content.bytes,u.options.storage&&u.options.storage.openAppend(e.name,t.indexing),n.length?i(n,o):o()))})}function i(t,n){if(!a)return r(t,n);for(var i=0;i<t.length;i++)e.length+=s(t[i]);u.content.append(t,n)}function o(t){function n(n){function r(n){return n?t(n):void u._writeEntry(e,t)}return n?t(n):(e.content={bytesOffset:l,blockOffset:c},e.blocks=u.content.blocks-c,void(u.options.storage?u.options.storage.end(l,e,function(e){return e?t(e):void u.options.storage.closeAppend(r)}):r(null)))}a?n():r([],n)}f(this),"string"==typeof e&&(e={name:e}),e.type||(e.type="file"),t||(t={});var u=this,a=!1,c=0,l=0,h=v(b(),p.obj(i,o));return e.length=0,this._appending.push(h),h.on("finish",n),h.on("close",n),h.on("error",n),h},i.prototype.createByteCursor=function(e,t){return"number"==typeof t&&(t={start:t}),t||(t={}),t.length&&(t.end=(t.start||0)+t.length),w(this,e,t)},i.prototype.createFileReadStream=function(e,t){function n(){a=!0,u&&u.destroy()}function r(e,t){return s?void u.next(t):i(e,t)}function i(n,i){s=!0,o._range(e,function(e,s,f,c){return e?i(e):void(a||(u=o.createByteCursor(c,t),r(n,i)))})}t||(t={});var o=this,s=!1,u=null,a=!1,f=g(r);return f.on("end",n),f.on("close",n),f},i.prototype.append=function(e,t){t||(t=o),f(this),"string"==typeof e&&(e={name:e}),e.type||(e.type="file");var n=this;this.open(function(r){if(r)return t(r);if("file"===e.type){if(!n.options.storage)throw new Error("Set options.file to append files");var i=u(n.options.file(e.name,n.options)),o=n.createFileWriteStream(e,{indexing:!0});y(i,o,t)}else e.length=0,e.blocks=0,e.content={bytesOffset:n.content.bytes,blockOffset:n.content.blocks},n._writeEntry(e,t)})},i.prototype.close=function(e){e||(e=o);var t=this;this._closed=!0,this.metadata.close(function(){return t.content?void t.content.close(e):e()})},i.prototype.download=function(e,t){var n=this;this._range(e,function(i,o,s){function u(){for(;;){if(o===s)return a();if(!n.content.has(o))return;o++}}function a(){n.content.removeListener("download",u),t()}if(i)return t(i);if(o===s&&"file"===e.type){var f=n.options.storage;if(f)return f.openAppend(e.name,!0),void f.write(0,r(0),function(e){return e?t(e):void n.options.storage.closeAppend(t)})}n._sparse&&n.content.prioritize({start:o,end:s}),n.content.on("download",u),u()})},i.prototype._range=function(e,t){var r=0,i=this;return e&&e.content&&void 0!==e.blocks?n.nextTick(function(){t(null,e.content.blockOffset,e.content.blockOffset+e.blocks,e)}):void this.get(e,function(e,n){function o(e,n){return e?t(e):(n.name===u&&(s=n,f=r,c=r+n.blocks),r+=n.blocks,a+1===i.metadata.blocks-1?t(null,f,c,s):void i.get(++a,o))}if(e)return t(e);var s=null,u=n.name,a=0,f=0,c=0;i.get(a,o)})},i.prototype._open=function(e){function t(r){return r?e(r):i._closed?e(new Error("Archive is closed")):i.metadata.blocks?(i._indexBlock=i.metadata.live?0:i.metadata.blocks-1,void i.metadata.get(i._indexBlock,function(t,r){if(t)return e(t);try{var i=k.decode(r);if("index"!==i.type)throw new Error("Expected block to be index")}catch(t){return e(t)}n(i)})):i.metadata.get(0,t)}function n(t){return i._closed?e(new Error("Archive is closed")):(i.options.file&&(i.options.storage=m(i)),i.options.key=t&&t.content,i.content=i.drive.core.createFeed(null,i.options),i.live=i.metadata.live,i.content.on("download",function(e,t){i.emit("download",t)}),i.content.on("upload",function(e,t){i.emit("upload",t)}),i.emit("content"),void(i.metadata.live&&!t?i._writeIndex(r):r(null)))}function r(t){return t?e(t):void i.content.open(e)}if(this._closed)return e(new Error("Archive is closed"));var i=this;this.metadata.open(function(r){return r?e(r):i._closed?e(new Error("Archive is closed")):(!i.owner&&i.metadata.secretKey&&(i.owner=!0),void(!i.owner||i.metadata.blocks?t(null):n(null)))})},i.prototype._writeIndex=function(e){var t={content:this.content.key,type:"index"};this._indexBlock=this.metadata.blocks,this._writeMessage(t,e)},i.prototype._writeEntry=function(e,t){this._writeMessage(e,t)},i.prototype._writeMessage=function(e,t){this.metadata.append(k.encode(e),t)}}).call(this,e("_process"),e("buffer").Buffer)},{"./cursor":70,"./storage":72,_process:154,buffer:14,"bulk-write-stream":15,events:41,from2:44,"hyperdrive-encoding":68,inherits:75,pump:167,pumpify:169,rabin:170,"stream-collector":208,through2:213,thunky:214}],70:[function(e,t){function n(e,t,r){function o(e){s._open(e)}if(!(this instanceof n))return new n(e,t,r);r||(r={});var s=this;this._nextOffset=0,this._block=0,this._endBlock=0,this._range=null,this.archive=e,this.options=r,this.file=t,this.entry=null,this.position=0,this.start=r.start||0,this.end=r.end||0,this.opened=!1,this.open=i(o),this.open()}function r(){}var i=e("thunky");t.exports=n,n.prototype.seekToStart=function(e){this.seek(0,e)},n.prototype.seekToEnd=function(e){this.seek(1/0,e)},n.prototype.seek=function(e,t){return t||(t=r),this.opened?void this._seek(e,t):this._openAndSeek(e,t)},n.prototype.next=function(e){return e||(e=r),this.opened?void this._next(e):this._openAndNext(e)},n.prototype.destroy=function(e){e||(e=r);var t=this;this.open(function(n){t._clear(),e(n)})},n.prototype._clear=function(){this._range&&this.archive.content.unprioritize(this._range)},n.prototype._seek=function(e,t){var n=this;if(e<this.start&&(e=this.start),e>=this.end)return this._clear(),this.position=this.end,t(null);var r={start:this.entry.content.blockOffset,end:this._endBlock};this.archive.content.seek(e,r,function(r,i,o){return r?t(r):(n._block=i,n._nextOffset=o,n.position=e,n._clear(),n._range=n.archive.content.prioritize({start:i,end:n._endBlock,priority:4,linear:!0}),void t(null))})},n.prototype._next=function(e){var t=this,n=this._block,r=this.position;return this.position>=this.end?(this._clear(),e(null,null)):void this.archive.content.get(n,function(i,o){return i?e(i):(t._nextOffset&&(o=o.slice(t._nextOffset),t._nextOffset=0),r+o.length>t.end&&(o=o.slice(0,t.end-r)),n===t._block&&(t._block++,t.position+=o.length),void e(null,o))})},n.prototype._open=function(e){function t(t){return t?e(t):(n.opened=!0,void e(null))}var n=this;this.archive.get(this.file,function(e,r){if(e)return t(e);if(!r.content)return t(new Error("entry.content is required for byte cursors"));n.entry=r;var i=r.content.bytesOffset+r.length;return n.end||(n.end=r.length),n.start=Math.min(n.start+r.content.bytesOffset,i),n.end=Math.min(n.end+r.content.bytesOffset,i),n._block=r.content.blockOffset,n._endBlock=r.content.blockOffset+r.blocks,n.start!==r.content.bytesOffset?n._seek(n.start,t):(n.position=n.start,n._range=n.archive.content.prioritize({start:n._block,end:n._endBlock,priority:4,linear:!0}),void t(null))})},n.prototype._openAndSeek=function(e,t){var n=this;this.open(function(r){return r?t(r):void n._seek(e,t)})},n.prototype._openAndNext=function(e){var t=this;this.open(function(n){return n?e(n):void t._next(e)})}},{thunky:214}],71:[function(e,t){(function(n){function r(e,t){return this instanceof r?(this.core=i(e,t),void(this.id=this.core.id)):new r(e,t)}var i=e("hypercore"),o=e("./archive");t.exports=r,r.prototype.replicate=function(e){return this.core.replicate(e)},r.prototype.createArchive=function(e,t){return"object"==typeof e&&!n.isBuffer(e)&&e&&(t=e,e=null),"string"==typeof e&&(e=n(e,"hex")),new o(this,e,t)}}).call(this,e("buffer").Buffer)},{"./archive":69,buffer:14,hypercore:59}],72:[function(e,t){function n(e){return this instanceof n?(this.archive=e,this._opened=[],this._maxStores=64,this._appending=null,this._appendingName=null,void(this._readonly=!1)):new n(e)}function r(){}function i(e,t){e.storage.open?e.storage.open(t):t(null)}function o(e,t){e.storage.close?e.storage.close(t):t(null)}t.exports=n,n.prototype.openAppend=function(e,t){this._readonly=!!t,this._appendingName=e},n.prototype.closeAppend=function(e){if(e||(e=r),this._appendingName=null,this._readonly=!1,!this._appending)return e(null);var t=this._appending;this._appending=null;var n=this._opened.indexOf(t);n>-1&&this._opened.splice(n,1),o(t,e)},n.prototype.read=function(e,t,n){var r=this._get(e);return r?void r.storage.read(e-r.start,t,n):this._open(e,t,null,n)},n.prototype.write=function(e,t,n){var r=this._get(e);return r?this._readonly&&r===this._appending?n(null):void r.storage.write(e-r.start,t,n):this._open(e,0,t,n)},n.prototype.end=function(e,t,n){var r=this._get(e);if(!r){var i=this;return this._open(e,0,null,function(r){return r?n(r):void i.end(e,t,n)})}return this._readonly&&r===this._appending?n(null):r.storage.end?r.storage.end(t,n):void n()},n.prototype._get=function(e){for(var t=0;t<this._opened.length;t++){var n=this._opened[t];if(n.start<=e&&e<n.end)return t&&this._active(n,t),n}return null},n.prototype._open=function(e,t,n,r){function s(t,n){if(t)return r(t);var o=h,a=h+n.length;return h=a,e>=o&&a>e?(l={start:o,end:a,storage:c.archive.options.file(n.name,c.archive.options)},void i(l,u)):c.archive.get(++f,s)}function u(t){if(t)return r(t);var n=c._get(e);return n?o(l,a):(c._opened.unshift(l),void c._kick(a))}function a(i){return i?r(i):void(n?c.write(e,n,r):c.read(e,t,r))}var f=0,c=this,l=null,h=0;return this._appendingName?(l={start:e,end:1/0,storage:c.archive.options.file(this._appendingName,this.archive.options)},this._appendingName=null,this._appending=l,void i(l,u)):void this.archive.get(f,s)},n.prototype._kick=function(e){return this._opened.length<=this._maxStores?e(null):void o(this._opened.pop(),e)},n.prototype._active=function(e,t){this._opened[t]=this._opened[0],this._opened[0]=e}},{}],73:[function(e,t,n){n.read=function(e,t,n,r,i){var o,s,u=8*i-r-1,a=(1<<u)-1,f=a>>1,c=-7,l=n?i-1:0,h=n?-1:1,d=e[t+l];for(l+=h,o=d&(1<<-c)-1,d>>=-c,c+=u;c>0;o=256*o+e[t+l],l+=h,c-=8);for(s=o&(1<<-c)-1,o>>=-c,c+=r;c>0;s=256*s+e[t+l],l+=h,c-=8);if(0===o)o=1-f;else{if(o===a)return s?0/0:(d?-1:1)*(1/0);s+=Math.pow(2,r),o-=f}return(d?-1:1)*s*Math.pow(2,o-r)},n.write=function(e,t,n,r,i,o){var s,u,a,f=8*o-i-1,c=(1<<f)-1,l=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:o-1,p=r?1:-1,g=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(u=isNaN(t)?1:0,s=c):(s=Math.floor(Math.log(t)/Math.LN2),t*(a=Math.pow(2,-s))<1&&(s--,a*=2),t+=s+l>=1?h/a:h*Math.pow(2,1-l),t*a>=2&&(s++,a/=2),s+l>=c?(u=0,s=c):s+l>=1?(u=(t*a-1)*Math.pow(2,i),s+=l):(u=t*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;e[n+d]=255&u,d+=p,u/=256,i-=8);for(s=s<<i|u,f+=i;f>0;e[n+d]=255&s,d+=p,s/=256,f-=8);e[n+d-p]|=128*g}},{}],74:[function(e,t){t.exports=function(e){var t,n=e.length;for(t=n-1;t>=0&&255===e[t];t--)e[t]=0;return~t&&(e[t]=e[t]+1),e}},{}],75:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},{}],76:[function(e,t){function n(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function r(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&n(e.slice(0,0))}t.exports=function(e){return null!=e&&(n(e)||r(e)||!!e._isBuffer)}},{}],77:[function(e,t){function n(e){var t=r.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}t.exports=n;var r=Object.prototype.toString},{}],78:[function(e,t){"use strict";function n(e){return/^[$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc][$A-Z\_a-z\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f0\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc0-9\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19b0-\u19c0\u19c8\u19c9\u19d0-\u19d9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u200c\u200d\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f1\ua900-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f]*$/.test(e);

}t.exports=n},{}],79:[function(e,t){var n={}.toString;t.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},{}],80:[function(e,t){function n(){}t.exports=function(e){function t(t){if(o)return i||(i=[]),void i.push(t);var n=u;u=null,o=t,e(n,r)}function r(e){var r=o,u=s;if(s=null,o=null,i&&(s=i,i=null,t(n)),u)for(var a=0;a<u.length;a++)u[a](e);r(e)}var i=null,o=null,s=null,u=null;return function(e,r){u=e,t(r||n)}}},{}],81:[function(e,t){(function(n){var r=e("varint"),i=e("readable-stream"),o=e("util"),s=function(e){return this instanceof s?(i.Transform.call(this),this._missing=0,this._message=null,this._limit=e&&e.limit||0,this._allowEmpty=!(!e||!e.allowEmpty),this._prefix=new n(this._limit?r.encodingLength(this._limit):100),this._ptr=0,void(this._allowEmpty&&(this._readableState.highWaterMark=16,this._readableState.objectMode=!0))):new s(e)};o.inherits(s,i.Transform),s.prototype._push=function(e){this._ptr=0,this._missing=0,this._message=null,this.push(e)},s.prototype._parseLength=function(e,t){for(t;t<e.length;t++){if(this._ptr>=this._prefix.length)return this._prefixError(e);if(this._prefix[this._ptr++]=e[t],!(128&e[t]))return this._missing=r.decode(this._prefix),this._limit&&this._missing>this._limit?this._prefixError(e):(!this._missing&&this._allowEmpty&&this._push(n(0)),this._ptr=0,t+1)}return e.length},s.prototype._prefixError=function(e){return this.emit("error",new Error("Message is larger than max length")),e.length},s.prototype._parseMessage=function(e,t){var r=e.length-t,i=this._missing;if(!this._message){if(r>=i)return this._push(e.slice(t,t+i)),t+i;this._message=new n(i)}return e.copy(this._message,this._ptr,t,t+i),r>=i?(this._push(this._message),t+i):(this._missing-=r,this._ptr+=r,e.length)},s.prototype._transform=function(e,t,n){for(var r=0;r<e.length;)r=this._missing?this._parseMessage(e,r):this._parseLength(e,r);n()},t.exports=s}).call(this,e("buffer").Buffer)},{buffer:14,"readable-stream":179,util:222,varint:86}],82:[function(e,t){(function(n){var r=e("varint"),i=e("readable-stream"),o=e("util"),s=new n(10240),u=0,a=function(){return this instanceof a?void i.Transform.call(this):new a};o.inherits(a,i.Transform),a.prototype._transform=function(e,t,i){r.encode(e.length,s,u),u+=r.encode.bytes,this.push(s.slice(u-r.encode.bytes,u)),this.push(e),s.length-u<100&&(s=new n(10240),u=0),i()},t.exports=a}).call(this,e("buffer").Buffer)},{buffer:14,"readable-stream":179,util:222,varint:86}],83:[function(e,t,n){n.encode=e("./encode"),n.decode=e("./decode")},{"./decode":81,"./encode":82}],84:[function(e,t){function n(e,t){var o,s=0,t=t||0,u=0,a=t,f=e.length;do{if(a>=f)throw n.bytes=0,new RangeError("Could not decode varint");o=e[a++],s+=28>u?(o&i)<<u:(o&i)*Math.pow(2,u),u+=7}while(o>=r);return n.bytes=a-t,s}t.exports=n;var r=128,i=127},{}],85:[function(e,t){function n(e,t,i){t=t||[],i=i||0;for(var u=i;e>=s;)t[i++]=255&e|r,e/=128;for(;e&o;)t[i++]=255&e|r,e>>>=7;return t[i]=0|e,n.bytes=i-u+1,t}t.exports=n;var r=128,i=127,o=~i,s=Math.pow(2,31)},{}],86:[function(e,t){t.exports={encode:e("./encode.js"),decode:e("./decode.js"),encodingLength:e("./length.js")}},{"./decode.js":84,"./encode.js":85,"./length.js":87}],87:[function(e,t){var n=Math.pow(2,7),r=Math.pow(2,14),i=Math.pow(2,21),o=Math.pow(2,28),s=Math.pow(2,35),u=Math.pow(2,42),a=Math.pow(2,49),f=Math.pow(2,56),c=Math.pow(2,63);t.exports=function(e){return n>e?1:r>e?2:i>e?3:o>e?4:s>e?5:u>e?6:a>e?7:f>e?8:c>e?9:10}},{}],88:[function(e,t){function n(e){this.opts=e||{},this.encodings=r}var r=e("./lib/encodings");t.exports=n,n.prototype._encoding=function(e){return"string"==typeof e&&(e=r[e]),e||(e=r.id),e},n.prototype._keyEncoding=function(e,t){return this._encoding(t&&t.keyEncoding||e&&e.keyEncoding||this.opts.keyEncoding)},n.prototype._valueEncoding=function(e,t){return this._encoding(t&&(t.valueEncoding||t.encoding)||e&&(e.valueEncoding||e.encoding)||this.opts.valueEncoding||this.opts.encoding)},n.prototype.encodeKey=function(e,t,n){return this._keyEncoding(t,n).encode(e)},n.prototype.encodeValue=function(e,t,n){return this._valueEncoding(t,n).encode(e)},n.prototype.decodeKey=function(e,t){return this._keyEncoding(t).decode(e)},n.prototype.decodeValue=function(e,t){return this._valueEncoding(t).decode(e)},n.prototype.encodeBatch=function(e,t){var n=this;return e.map(function(e){var r={type:e.type,key:n.encodeKey(e.key,t,e)};return n.keyAsBuffer(t,e)&&(r.keyEncoding="binary"),e.prefix&&(r.prefix=e.prefix),"value"in e&&(r.value=n.encodeValue(e.value,t,e),n.valueAsBuffer(t,e)&&(r.valueEncoding="binary")),r})};var i=["lt","gt","lte","gte","start","end"];n.prototype.encodeLtgt=function(e){var t=this,n={};return Object.keys(e).forEach(function(r){n[r]=i.indexOf(r)>-1?t.encodeKey(e[r],e):e[r]}),n},n.prototype.createStreamDecoder=function(e){var t=this;return e.keys&&e.values?function(n,r){return{key:t.decodeKey(n,e),value:t.decodeValue(r,e)}}:e.keys?function(n){return t.decodeKey(n,e)}:e.values?function(n,r){return t.decodeValue(r,e)}:function(){}},n.prototype.keyAsBuffer=function(e){return this._keyEncoding(e).buffer},n.prototype.valueAsBuffer=function(e){return this._valueEncoding(e).buffer}},{"./lib/encodings":89}],89:[function(e,t,n){(function(e){function t(e){return e}function r(t){return void 0===t||null===t||e.isBuffer(t)}n.utf8=n["utf-8"]={encode:function(e){return r(e)?e:String(e)},decode:t,buffer:!1,type:"utf8"},n.json={encode:JSON.stringify,decode:JSON.parse,buffer:!1,type:"json"},n.binary={encode:function(t){return r(t)?t:new e(t)},decode:t,buffer:!0,type:"binary"},n.id={encode:function(e){return e},decode:function(e){return e},buffer:!1,type:"id"};var i=["hex","ascii","base64","ucs2","ucs-2","utf16le","utf-16le"];i.forEach(function(t){n[t]={encode:function(n){return r(n)?n:new e(n,t)},decode:function(e){return e.toString(t)},buffer:!0,type:t}})}).call(this,e("buffer").Buffer)},{buffer:14}],90:[function(e,t){var n=e("errno").create,r=n("LevelUPError"),i=n("NotFoundError",r);i.prototype.notFound=!0,i.prototype.status=404,t.exports={LevelUPError:r,InitializationError:n("InitializationError",r),OpenError:n("OpenError",r),ReadError:n("ReadError",r),WriteError:n("WriteError",r),NotFoundError:i,EncodingError:n("EncodingError",r)}},{errno:38}],91:[function(e,t){function n(e,t){return this instanceof n?(i.call(this,o(t,{objectMode:!0})),this._iterator=e,this._destroyed=!1,this._decoder=null,t&&t.decoder&&(this._decoder=t.decoder),void this.on("end",this._cleanup.bind(this))):new n(e,t)}var r=e("inherits"),i=e("readable-stream").Readable,o=e("xtend"),s=e("level-errors").EncodingError;t.exports=n,r(n,i),n.prototype._read=function(){var e=this;this._destroyed||this._iterator.next(function(t,n,r){if(!e._destroyed){if(t)return e.emit("error",t);if(void 0===n&&void 0===r)e.push(null);else{if(!e._decoder)return e.push({key:n,value:r});try{var r=e._decoder(n,r)}catch(t){return e.emit("error",new s(t)),void e.push(null)}e.push(r)}}})},n.prototype.destroy=n.prototype._cleanup=function(){var e=this;this._destroyed||(this._destroyed=!0,this._iterator.end(function(t){return t?e.emit("error",t):void e.emit("close")}))}},{inherits:75,"level-errors":90,"readable-stream":98,xtend:230}],92:[function(e,t){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],93:[function(e,t){(function(n){function r(e){return this instanceof r?(a.call(this,e),f.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(e)}function i(){this.allowHalfOpen||this._writableState.ended||n.nextTick(this.end.bind(this))}function o(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}t.exports=r;var s=Object.keys||function(e){var t=[];for(var n in e)t.push(n);return t},u=e("core-util-is");u.inherits=e("inherits");var a=e("./_stream_readable"),f=e("./_stream_writable");u.inherits(r,a),o(s(f.prototype),function(e){r.prototype[e]||(r.prototype[e]=f.prototype[e])})}).call(this,e("_process"))},{"./_stream_readable":95,"./_stream_writable":97,_process:154,"core-util-is":24,inherits:75}],94:[function(e,t){function n(e){return this instanceof n?void r.call(this,e):new n(e)}t.exports=n;var r=e("./_stream_transform"),i=e("core-util-is");i.inherits=e("inherits"),i.inherits(n,r),n.prototype._transform=function(e,t,n){n(null,e)}},{"./_stream_transform":96,"core-util-is":24,inherits:75}],95:[function(e,t){(function(n){function r(t,n){var r=e("./_stream_duplex");t=t||{};var i=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(j||(j=e("string_decoder/").StringDecoder),this.decoder=new j(t.encoding),this.encoding=t.encoding)}function i(t){e("./_stream_duplex");return this instanceof i?(this._readableState=new r(t,this),this.readable=!0,void B.call(this)):new i(t)}function o(e,t,n,r,i){var o=f(t,n);if(o)e.emit("error",o);else if(A.isNullOrUndefined(n))t.reading=!1,t.ended||c(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var u=new Error("stream.push() after EOF");e.emit("error",u)}else if(t.endEmitted&&i){var u=new Error("stream.unshift() after end event");e.emit("error",u)}else!t.decoder||i||r||(n=t.decoder.write(n)),i||(t.reading=!1),t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&l(e)),d(e,t);else i||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function u(e){if(e>=M)e=M;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function a(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:isNaN(e)||A.isNull(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=u(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function f(e,t){var n=null;return A.isBuffer(t)||A.isString(t)||A.isNullOrUndefined(t)||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function c(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,l(e)}function l(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(R("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?n.nextTick(function(){h(e)}):h(e))}function h(e){R("emit readable"),e.emit("readable"),v(e)}function d(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(function(){p(e,t)}))}function p(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(R("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function g(e){return function(){var t=e._readableState;R("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&S.listenerCount(e,"data")&&(t.flowing=!0,v(e))}}function b(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(function(){y(e,t)}))}function y(e,t){t.resumeScheduled=!1,e.emit("resume"),v(e),t.flowing&&!t.reading&&e.read(0)}function v(e){var t=e._readableState;if(R("flow",t.flowing),t.flowing)do var n=e.read();while(null!==n&&t.flowing)}function _(e,t){var n,r=t.buffer,i=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(s)n=r.shift();else if(!e||e>=i)n=o?r.join(""):x.concat(r,i),r.length=0;else if(e<r[0].length){var u=r[0];n=u.slice(0,e),r[0]=u.slice(e)}else if(e===r[0].length)n=r.shift();else{n=o?"":new x(e);for(var a=0,f=0,c=r.length;c>f&&e>a;f++){var u=r[0],l=Math.min(e-a,u.length);o?n+=u.slice(0,l):u.copy(n,a,0,l),l<u.length?r[0]=u.slice(l):r.shift(),a+=l}}return n}function m(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,n.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function w(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function k(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}t.exports=i;var E=e("isarray"),x=e("buffer").Buffer;i.ReadableState=r;var S=e("events").EventEmitter;S.listenerCount||(S.listenerCount=function(e,t){return e.listeners(t).length});var B=e("stream"),A=e("core-util-is");A.inherits=e("inherits");var j,R=e("util");R=R&&R.debuglog?R.debuglog("stream"):function(){},A.inherits(i,B),i.prototype.push=function(e,t){var n=this._readableState;return A.isString(e)&&!n.objectMode&&(t=t||n.defaultEncoding,t!==n.encoding&&(e=new x(e,t),t="")),o(this,n,e,t,!1)},i.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},i.prototype.setEncoding=function(t){return j||(j=e("string_decoder/").StringDecoder),this._readableState.decoder=new j(t),this._readableState.encoding=t,this};var M=8388608;i.prototype.read=function(e){R("read",e);var t=this._readableState,n=e;if((!A.isNumber(e)||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return R("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?m(this):l(this),null;if(e=a(e,t),0===e&&t.ended)return 0===t.length&&m(this),null;var r=t.needReadable;R("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,R("length less than watermark",r)),(t.ended||t.reading)&&(r=!1,R("reading or ended",r)),r&&(R("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),r&&!t.reading&&(e=a(n,t));var i;return i=e>0?_(e,t):null,A.isNull(i)&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&m(this),A.isNull(i)||this.emit("data",i),i},i.prototype._read=function(){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function r(e){R("onunpipe"),e===l&&o()}function i(){R("onend"),e.end()}function o(){R("cleanup"),e.removeListener("close",a),e.removeListener("finish",f),e.removeListener("drain",b),e.removeListener("error",u),e.removeListener("unpipe",r),l.removeListener("end",i),l.removeListener("end",o),l.removeListener("data",s),!h.awaitDrain||e._writableState&&!e._writableState.needDrain||b()}function s(t){R("ondata");var n=e.write(t);!1===n&&(R("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,l.pause())}function u(t){R("onerror",t),c(),e.removeListener("error",u),0===S.listenerCount(e,"error")&&e.emit("error",t)}function a(){e.removeListener("finish",f),c()}function f(){R("onfinish"),e.removeListener("close",a),c()}function c(){R("unpipe"),l.unpipe(e)}var l=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,R("pipe count=%d opts=%j",h.pipesCount,t);var d=(!t||t.end!==!1)&&e!==n.stdout&&e!==n.stderr,p=d?i:o;h.endEmitted?n.nextTick(p):l.once("end",p),e.on("unpipe",r);var b=g(l);return e.on("drain",b),l.on("data",s),e._events&&e._events.error?E(e._events.error)?e._events.error.unshift(u):e._events.error=[u,e._events.error]:e.on("error",u),e.once("close",a),e.once("finish",f),e.emit("pipe",l),h.flowing||(R("pipe resume"),l.resume()),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var i=k(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var r=B.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&this.readable){var i=this._readableState;if(!i.readableListening)if(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading)i.length&&l(this,i);else{var o=this;n.nextTick(function(){R("readable nexttick read 0"),o.read(0)})}}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var e=this._readableState;return e.flowing||(R("resume"),e.flowing=!0,e.reading||(R("resume read 0"),this.read(0)),b(this,e)),this},i.prototype.pause=function(){return R("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(R("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(R("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(R("wrapped data"),t.decoder&&(i=t.decoder.write(i)),i&&(t.objectMode||i.length)){var o=r.push(i);o||(n=!0,e.pause())}});for(var i in e)A.isFunction(e[i])&&A.isUndefined(this[i])&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return w(o,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){R("wrapped _read",t),n&&(n=!1,e.resume())},r},i._fromList=_}).call(this,e("_process"))},{"./_stream_duplex":93,_process:154,buffer:14,"core-util-is":24,events:41,inherits:75,isarray:92,stream:207,"string_decoder/":210,util:10}],96:[function(e,t){function n(e,t){this.afterTransform=function(e,n){return r(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function r(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,u.isNullOrUndefined(n)||e.push(n),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);s.call(this,e),this._transformState=new n(e,this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){u.isFunction(this._flush)?this._flush(function(e){o(t,e)}):o(t)})}function o(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=i;var s=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(i,s),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},i.prototype._transform=function(){throw new Error("not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(){var e=this._transformState;u.isNull(e.writechunk)||!e.writecb||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))}},{"./_stream_duplex":93,"core-util-is":24,inherits:75}],97:[function(e,t){(function(n){function r(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function i(t,n){var r=e("./_stream_duplex");t=t||{};var i=t.highWaterMark,o=t.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.objectMode=!!t.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=t.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){d(n,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(t){var n=e("./_stream_duplex");return this instanceof o||this instanceof n?(this._writableState=new i(t,this),this.writable=!0,void E.call(this)):new o(t)}function s(e,t,r){var i=new Error("write after end");e.emit("error",i),n.nextTick(function(){r(i)})}function u(e,t,r,i){var o=!0;if(!(k.isBuffer(r)||k.isString(r)||k.isNullOrUndefined(r)||t.objectMode)){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s),n.nextTick(function(){i(s)}),o=!1}return o}function a(e,t,n){return!e.objectMode&&e.decodeStrings!==!1&&k.isString(t)&&(t=new w(t,n)),t}function f(e,t,n,i,o){n=a(t,n,i),k.isBuffer(n)&&(i="buffer");var s=t.objectMode?1:n.length;t.length+=s;var u=t.length<t.highWaterMark;return u||(t.needDrain=!0),t.writing||t.corked?t.buffer.push(new r(n,i,o)):c(e,t,!1,s,n,i,o),u}function c(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function l(e,t,r,i,o){r?n.nextTick(function(){t.pendingcb--,o(i)}):(t.pendingcb--,o(i)),e._writableState.errorEmitted=!0,e.emit("error",i)}function h(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function d(e,t){var r=e._writableState,i=r.sync,o=r.writecb;if(h(r),t)l(e,r,i,t,o);else{var s=y(e,r);s||r.corked||r.bufferProcessing||!r.buffer.length||b(e,r),i?n.nextTick(function(){p(e,r,s,o)}):p(e,r,s,o)}}function p(e,t,n,r){n||g(e,t),t.pendingcb--,r(),_(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function b(e,t){if(t.bufferProcessing=!0,e._writev&&t.buffer.length>1){for(var n=[],r=0;r<t.buffer.length;r++)n.push(t.buffer[r].callback);t.pendingcb++,c(e,t,!0,t.length,t.buffer,"",function(e){for(var r=0;r<n.length;r++)t.pendingcb--,n[r](e)}),t.buffer=[]}else{for(var r=0;r<t.buffer.length;r++){var i=t.buffer[r],o=i.chunk,s=i.encoding,u=i.callback,a=t.objectMode?1:o.length;if(c(e,t,!1,a,o,s,u),t.writing){r++;break}}r<t.buffer.length?t.buffer=t.buffer.slice(r):t.buffer.length=0}t.bufferProcessing=!1}function y(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function v(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function _(e,t){var n=y(e,t);return n&&(0===t.pendingcb?(v(e,t),t.finished=!0,e.emit("finish")):v(e,t)),n}function m(e,t,r){t.ending=!0,_(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0}t.exports=o;var w=e("buffer").Buffer;o.WritableState=i;var k=e("core-util-is");k.inherits=e("inherits");var E=e("stream");k.inherits(o,E),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(e,t,n){var r=this._writableState,i=!1;return k.isFunction(t)&&(n=t,t=null),k.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),k.isFunction(n)||(n=function(){}),r.ended?s(this,r,n):u(this,r,e,n)&&(r.pendingcb++,i=f(this,r,e,t,n)),i},o.prototype.cork=function(){var e=this._writableState;e.corked++},o.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.buffer.length||b(this,e))},o.prototype._write=function(e,t,n){n(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(e,t,n){var r=this._writableState;k.isFunction(e)?(n=e,e=null,t=null):k.isFunction(t)&&(n=t,t=null),k.isNullOrUndefined(e)||this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||m(this,r,n)}}).call(this,e("_process"))},{"./_stream_duplex":93,_process:154,buffer:14,"core-util-is":24,inherits:75,stream:207}],98:[function(e,t,n){(function(r){n=t.exports=e("./lib/_stream_readable.js"),n.Stream=e("stream"),n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js"),r.browser||"disable"!==r.env.READABLE_STREAM||(t.exports=e("stream"))}).call(this,e("_process"))},{"./lib/_stream_duplex.js":93,"./lib/_stream_passthrough.js":94,"./lib/_stream_readable.js":95,"./lib/_stream_transform.js":96,"./lib/_stream_writable.js":97,_process:154,stream:207}],99:[function(e,t){var n=e("defined");t.exports=function(e,t){e||(e={}),t||(t={});var r={},i=n(t.gte,t.ge,t.start),o=n(t.lte,t.le,t.end),s=n(e.gte,e.ge,e.start),u=n(e.lte,e.le,e.end);return t.gt?void 0!==s?r.gte=t.gt(s):r.gt=t.gt(e.gt):i&&(void 0!==s?r.gte=i(s):r.gt=i(e.gt)),t.lt?void 0!==u?r.lte=t.lt(u):r.lt=t.lt(e.lt):o&&(void 0!==u?r.lte=o(u):r.lt=o(e.lt)),void 0!==t.limit?r.limit=t.limit(e.limit):void 0!==e.limit&&(r.limit=e.limit),r}},{defined:34}],100:[function(e,t){var n=e("levelup"),r=function(){},i=function(e){this.db=e,this.leveldown=null};i.prototype.open=function(e,t){if("function"==typeof e)return this.open(null,e);t||(t=r);var n=this;this.db.open(function(e){return e?t(e):(n.leveldown=n.db.db,void t())})},"put get del batch approximateSize iterator close".split(" ").forEach(function(e){i.prototype[e]=function(){return this.leveldown[e].apply(this.leveldown,arguments)}}),t.exports=function(e,t){t||(t={}),t.db=function(){return new i(e)};var r=n(e.location||"no-location",t);return r.on("ready",function(){r.db instanceof i&&(r.db=r.db.leveldown)}),r}},{levelup:102}],101:[function(e,t){function n(e,t){this._levelup=e,this._codec=t,this.batch=e.db.batch(),this.ops=[],this.length=0}var r=e("./util"),i=e("level-errors").WriteError,o=r.getOptions,s=r.dispatchError;n.prototype.put=function(e,t,n){n=o(n);var r=this._codec.encodeKey(e,n),s=this._codec.encodeValue(t,n);try{this.batch.put(r,s)}catch(u){throw new i(u)}return this.ops.push({type:"put",key:r,value:s}),this.length++,this},n.prototype.del=function(e,t){t=o(t);var n=this._codec.encodeKey(e,t);try{this.batch.del(n)}catch(r){throw new i(r)}return this.ops.push({type:"del",key:n}),this.length++,this},n.prototype.clear=function(){try{this.batch.clear()}catch(e){throw new i(e)}return this.ops=[],this.length=0,this},n.prototype.write=function(e){var t=this._levelup,n=this.ops;try{this.batch.write(function(r){return r?s(t,new i(r),e):(t.emit("batch",n),void(e&&e()))})}catch(r){throw new i(r)}},t.exports=n},{"./util":103,"level-errors":90}],102:[function(e,t){(function(n){function r(e,t){return"function"==typeof e?e:t}function i(e,t,r){if(!(this instanceof i))return new i(e,t,r);var o;if(f.call(this),this.setMaxListeners(1/0),"function"==typeof e?(t="object"==typeof t?t:{},t.db=e,e=null):"object"==typeof e&&"function"==typeof e.db&&(t=e,e=null),"function"==typeof t&&(r=t,t={}),(!t||"function"!=typeof t.db)&&"string"!=typeof e){if(o=new k("Must provide a location for the database"),r)return n.nextTick(function(){r(o)});throw o}t=B(t),this.options=h(A,t),this._codec=new S(this.options),this._status="new",d(this,"location",e,"e"),this.open(r)}function o(e,t,n){return e._isOpening()||e.isOpen()?void 0:(R(e,new v("Database is not open"),n),!0)}function s(e,t,n){R(e,new y(t),n)}function u(e,t,n){R(e,new v(t),n)}function a(e){return function(t,n){j()[e](t,n||function(){})}}{var f=e("events").EventEmitter,c=e("util").inherits,l=e("util").deprecate,h=e("xtend"),d=e("prr"),p=e("deferred-leveldown"),g=e("level-iterator-stream"),b=e("level-errors"),y=b.WriteError,v=b.ReadError,_=b.NotFoundError,m=b.OpenError,w=b.EncodingError,k=b.InitializationError,E=e("./util"),x=e("./batch"),S=e("level-codec"),B=E.getOptions,A=E.defaultOptions,j=E.getLevelDOWN,R=E.dispatchError;E.isDefined}c(i,f),i.prototype.open=function(e){var t,r,i=this;return this.isOpen()?(e&&n.nextTick(function(){e(null,i)}),this):this._isOpening()?e&&this.once("open",function(){e(null,i)}):(this.emit("opening"),this._status="opening",this.db=new p(this.location),t=this.options.db||j(),r=t(this.location),void r.open(this.options,function(t){return t?R(i,new m(t),e):(i.db.setDb(r),i.db=r,i._status="open",e&&e(null,i),i.emit("open"),i.emit("ready"),void 0)}))},i.prototype.close=function(e){var t=this;if(this.isOpen())this._status="closing",this.db.close(function(){t._status="closed",t.emit("closed"),e&&e.apply(null,arguments)}),this.emit("closing"),this.db=new p(this.location);else{if("closed"==this._status&&e)return n.nextTick(e);"closing"==this._status&&e?this.once("closed",e):this._isOpening()&&this.once("open",function(){t.close(e)})}},i.prototype.isOpen=function(){return"open"==this._status},i.prototype._isOpening=function(){return"opening"==this._status},i.prototype.isClosed=function(){return/^clos/.test(this._status)},i.prototype.get=function(e,t,n){var i,s=this;if(n=r(t,n),!o(this,t,n)){if(null===e||void 0===e||"function"!=typeof n)return u(this,"get() requires key and callback arguments",n);t=E.getOptions(t),i=this._codec.encodeKey(e,t),t.asBuffer=this._codec.valueAsBuffer(t),this.db.get(i,t,function(r,i){if(r)return r=/notfound/i.test(r)||r.notFound?new _("Key not found in database ["+e+"]",r):new v(r),R(s,r,n);if(n){try{i=s._codec.decodeValue(i,t)}catch(o){return n(new w(o))}n(null,i)}})}},i.prototype.put=function(e,t,n,i){var u,a,f=this;return i=r(n,i),null===e||void 0===e?s(this,"put() requires a key argument",i):void(o(this,n,i)||(n=B(n),u=this._codec.encodeKey(e,n),a=this._codec.encodeValue(t,n),this.db.put(u,a,n,function(n){return n?R(f,new y(n),i):(f.emit("put",e,t),void(i&&i()))})))},i.prototype.del=function(e,t,n){var i,u=this;return n=r(t,n),null===e||void 0===e?s(this,"del() requires a key argument",n):void(o(this,t,n)||(t=B(t),i=this._codec.encodeKey(e,t),this.db.del(i,t,function(t){return t?R(u,new y(t),n):(u.emit("del",e),void(n&&n()))})))},i.prototype.batch=function(e,t,n){var i,u=this;return arguments.length?(n=r(t,n),Array.isArray(e)?void(o(this,t,n)||(t=B(t),i=u._codec.encodeBatch(e,t),i=i.map(function(e){return e.type||void 0===e.key||void 0===e.value||(e.type="put"),e}),this.db.batch(i,t,function(t){return t?R(u,new y(t),n):(u.emit("batch",e),void(n&&n()))}))):s(this,"batch() requires an array argument",n)):new x(this,this._codec)},i.prototype.approximateSize=l(function(e,t,n,i){var o,s,a=this;return i=r(n,i),n=B(n),null===e||void 0===e||null===t||void 0===t||"function"!=typeof i?u(this,"approximateSize() requires start, end and callback arguments",i):(o=this._codec.encodeKey(e,n),s=this._codec.encodeKey(t,n),void this.db.approximateSize(o,s,function(e,t){return e?R(a,new m(e),i):void(i&&i(null,t))}))},"db.approximateSize() is deprecated. Use db.db.approximateSize() instead"),i.prototype.readStream=i.prototype.createReadStream=function(e){return e=h({keys:!0,values:!0},this.options,e),e.keyEncoding=e.keyEncoding,e.valueEncoding=e.valueEncoding,e=this._codec.encodeLtgt(e),e.keyAsBuffer=this._codec.keyAsBuffer(e),e.valueAsBuffer=this._codec.valueAsBuffer(e),"number"!=typeof e.limit&&(e.limit=-1),new g(this.db.iterator(e),h(e,{decoder:this._codec.createStreamDecoder(e)}))},i.prototype.keyStream=i.prototype.createKeyStream=function(e){return this.createReadStream(h(e,{keys:!0,values:!1}))},i.prototype.valueStream=i.prototype.createValueStream=function(e){return this.createReadStream(h(e,{keys:!1,values:!0}))},i.prototype.toString=function(){return"LevelUP"},t.exports=i,t.exports.errors=e("level-errors"),t.exports.destroy=l(a("destroy"),"levelup.destroy() is deprecated. Use leveldown.destroy() instead"),t.exports.repair=l(a("repair"),"levelup.repair() is deprecated. Use leveldown.repair() instead")}).call(this,e("_process"))},{"./batch":101,"./util":103,_process:154,"deferred-leveldown":33,events:41,"level-codec":88,"level-errors":90,"level-iterator-stream":91,prr:166,util:222,xtend:230}],103:[function(e,t){function n(e){return"string"==typeof e&&(e={valueEncoding:e}),"object"!=typeof e&&(e={}),e}function r(){if(u)return u;var t,n=e("../package.json").devDependencies.leveldown;try{t=e("leveldown/package").version}catch(r){throw i(r)}if(!e("semver").satisfies(t,n))throw new a("Installed version of LevelDOWN ("+t+") does not match required version ("+n+")");

try{return u=e("leveldown")}catch(r){throw i(r)}}function i(e){var t="Failed to require LevelDOWN (%s). Try `npm install leveldown` if it's missing";return new a(f(t,e.message))}function o(e,t,n){"function"==typeof n?n(t):e.emit("error",t)}function s(e){return"undefined"!=typeof e}var u,a=(e("xtend"),e("level-errors").LevelUPError),f=e("util").format,c={createIfMissing:!0,errorIfExists:!1,keyEncoding:"utf8",valueEncoding:"utf8",compression:!0};t.exports={defaultOptions:c,getOptions:n,getLevelDOWN:r,dispatchError:o,isDefined:s}},{"../package.json":104,"level-errors":90,leveldown:10,"leveldown/package":10,semver:10,util:222,xtend:230}],104:[function(e,t){t.exports={_args:[[{raw:"levelup@^1.3.2",scope:null,escapedName:"levelup",name:"levelup",rawSpec:"^1.3.2",spec:">=1.3.2 <2.0.0",type:"range"},"/Users/karissa/node_modules/dat-api/node_modules/levelup-defaults"]],_from:"levelup@>=1.3.2 <2.0.0",_id:"levelup@1.3.3",_inCache:!0,_installable:!0,_location:"/levelup",_nodeVersion:"4.4.7",_npmOperationalInternal:{host:"packages-12-west.internal.npmjs.com",tmp:"tmp/levelup-1.3.3.tgz_1476029541340_0.44339725002646446"},_npmUser:{name:"juliangruber",email:"julian@juliangruber.com"},_npmVersion:"2.15.8",_phantomChildren:{},_requested:{raw:"levelup@^1.3.2",scope:null,escapedName:"levelup",name:"levelup",rawSpec:"^1.3.2",spec:">=1.3.2 <2.0.0",type:"range"},_requiredBy:["/levelup-defaults","/subleveldown"],_resolved:"https://registry.npmjs.org/levelup/-/levelup-1.3.3.tgz",_shasum:"bf9db62bdb6188d08eaaa2efcf6cc311916f41fd",_shrinkwrap:null,_spec:"levelup@^1.3.2",_where:"/Users/karissa/node_modules/dat-api/node_modules/levelup-defaults",browser:{leveldown:!1,"leveldown/package":!1,semver:!1},bugs:{url:"https://github.com/level/levelup/issues"},contributors:[{name:"Rod Vagg",email:"r@va.gg",url:"https://github.com/rvagg"},{name:"John Chesley",email:"john@chesl.es",url:"https://github.com/chesles/"},{name:"Jake Verbaten",email:"raynos2@gmail.com",url:"https://github.com/raynos"},{name:"Dominic Tarr",email:"dominic.tarr@gmail.com",url:"https://github.com/dominictarr"},{name:"Max Ogden",email:"max@maxogden.com",url:"https://github.com/maxogden"},{name:"Lars-Magnus Skog",email:"ralphtheninja@riseup.net",url:"https://github.com/ralphtheninja"},{name:"David BjÃ¶rklund",email:"david.bjorklund@gmail.com",url:"https://github.com/kesla"},{name:"Julian Gruber",email:"julian@juliangruber.com",url:"https://github.com/juliangruber"},{name:"Paolo Fragomeni",email:"paolo@async.ly",url:"https://github.com/0x00a"},{name:"Anton Whalley",email:"anton.whalley@nearform.com",url:"https://github.com/No9"},{name:"Matteo Collina",email:"matteo.collina@gmail.com",url:"https://github.com/mcollina"},{name:"Pedro Teixeira",email:"pedro.teixeira@gmail.com",url:"https://github.com/pgte"},{name:"James Halliday",email:"mail@substack.net",url:"https://github.com/substack"},{name:"Jarrett Cruger",email:"jcrugzz@gmail.com",url:"https://github.com/jcrugzz"}],dependencies:{"deferred-leveldown":"~1.2.1","level-codec":"~6.1.0","level-errors":"~1.0.3","level-iterator-stream":"~1.3.0",prr:"~1.0.1",semver:"~5.1.0",xtend:"~4.0.0"},description:"Fast & simple storage - a Node.js-style LevelDB wrapper",devDependencies:{async:"~1.5.0",bustermove:"~1.0.0",delayed:"~1.0.1",faucet:"~0.0.1",leveldown:"^1.1.0",memdown:"~1.1.0","msgpack-js":"~0.3.0",referee:"~1.2.0",rimraf:"~2.4.3","slow-stream":"0.0.4",tap:"~2.3.1",tape:"~4.2.1"},directories:{},dist:{shasum:"bf9db62bdb6188d08eaaa2efcf6cc311916f41fd",tarball:"https://registry.npmjs.org/levelup/-/levelup-1.3.3.tgz"},gitHead:"cced27dc9f0095823be5ed388ec601ec2bfe7366",homepage:"https://github.com/level/levelup",keywords:["leveldb","stream","database","db","store","storage","json"],license:"MIT",main:"lib/levelup.js",maintainers:[{name:"rvagg",email:"rod@vagg.org"},{name:"ralphtheninja",email:"ralphtheninja@riseup.net"},{name:"juliangruber",email:"julian@juliangruber.com"}],name:"levelup",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+https://github.com/level/levelup.git"},scripts:{test:"tape test/*-test.js | faucet"},version:"1.3.3"}},{}],105:[function(e,t){function n(e,t){return"function"==typeof e&&(t=e,e={}),"string"==typeof e&&(e={}),e=e||{},e.db=function(e){return new i(e)},r("",e,t)}var r=e("levelup"),i=e("memdown");t.exports=n},{levelup:107,memdown:136}],106:[function(e,t,n){arguments[4][101][0].apply(n,arguments)},{"./util":108,dup:101,"level-errors":118}],107:[function(e,t,n){arguments[4][102][0].apply(n,arguments)},{"./batch":106,"./util":108,_process:154,"deferred-leveldown":110,dup:102,events:41,"level-codec":116,"level-errors":118,"level-iterator-stream":122,prr:133,util:222,xtend:134}],108:[function(e,t,n){arguments[4][103][0].apply(n,arguments)},{"../package.json":135,dup:103,"level-errors":118,leveldown:10,"leveldown/package":10,semver:10,util:222,xtend:134}],109:[function(e,t,n){arguments[4][32][0].apply(n,arguments)},{"abstract-leveldown":114,dup:32,util:222}],110:[function(e,t){(function(n,r){function i(e){s.call(this,"string"==typeof e?e:""),this._db=void 0,this._operations=[],this._iterators=[]}var o=e("util"),s=e("abstract-leveldown").AbstractLevelDOWN,u=e("./deferred-iterator");o.inherits(i,s),i.prototype.setDb=function(e){this._db=e,this._operations.forEach(function(t){e[t.method].apply(e,t.args)}),this._iterators.forEach(function(t){t.setDb(e)})},i.prototype._open=function(e,t){return r.nextTick(t)},i.prototype._operation=function(e,t){return this._db?this._db[e].apply(this._db,t):void this._operations.push({method:e,args:t})},"put get del batch approximateSize".split(" ").forEach(function(e){i.prototype["_"+e]=function(){this._operation(e,arguments)}}),i.prototype._isBuffer=function(e){return n.isBuffer(e)},i.prototype._iterator=function(e){if(this._db)return this._db.iterator.apply(this._db,arguments);var t=new u(e);return this._iterators.push(t),t},t.exports=i,t.exports.DeferredIterator=u}).call(this,{isBuffer:e("../../../../../is-buffer/index.js")},e("_process"))},{"../../../../../is-buffer/index.js":76,"./deferred-iterator":109,_process:154,"abstract-leveldown":114,util:222}],111:[function(e,t,n){arguments[4][1][0].apply(n,arguments)},{_process:154,dup:1}],112:[function(e,t,n){arguments[4][2][0].apply(n,arguments)},{_process:154,dup:2}],113:[function(e,t){(function(n,r){function i(e){if(!arguments.length||void 0===e)throw new Error("constructor requires at least a location argument");if("string"!=typeof e)throw new Error("constructor requires a location string argument");this.location=e,this.status="new"}var o=e("xtend"),s=e("./abstract-iterator"),u=e("./abstract-chained-batch");i.prototype.open=function(e,t){var n=this,i=this.status;if("function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("open() requires a callback argument");"object"!=typeof e&&(e={}),e.createIfMissing=0!=e.createIfMissing,e.errorIfExists=!!e.errorIfExists,"function"==typeof this._open?(this.status="opening",this._open(e,function(e){return e?(n.status=i,t(e)):(n.status="open",void t())})):(this.status="open",r.nextTick(t))},i.prototype.close=function(e){var t=this,n=this.status;if("function"!=typeof e)throw new Error("close() requires a callback argument");"function"==typeof this._close?(this.status="closing",this._close(function(r){return r?(t.status=n,e(r)):(t.status="closed",void e())})):(this.status="closed",r.nextTick(e))},i.prototype.get=function(e,t,n){var i;if("function"==typeof t&&(n=t),"function"!=typeof n)throw new Error("get() requires a callback argument");return(i=this._checkKey(e,"key",this._isBuffer))?n(i):(this._isBuffer(e)||(e=String(e)),"object"!=typeof t&&(t={}),t.asBuffer=0!=t.asBuffer,"function"==typeof this._get?this._get(e,t,n):void r.nextTick(function(){n(new Error("NotFound"))}))},i.prototype.put=function(e,t,n,i){var o;if("function"==typeof n&&(i=n),"function"!=typeof i)throw new Error("put() requires a callback argument");return(o=this._checkKey(e,"key",this._isBuffer))?i(o):(this._isBuffer(e)||(e=String(e)),null==t||this._isBuffer(t)||r.browser||(t=String(t)),"object"!=typeof n&&(n={}),"function"==typeof this._put?this._put(e,t,n,i):void r.nextTick(i))},i.prototype.del=function(e,t,n){var i;if("function"==typeof t&&(n=t),"function"!=typeof n)throw new Error("del() requires a callback argument");return(i=this._checkKey(e,"key",this._isBuffer))?n(i):(this._isBuffer(e)||(e=String(e)),"object"!=typeof t&&(t={}),"function"==typeof this._del?this._del(e,t,n):void r.nextTick(n))},i.prototype.batch=function(e,t,n){if(!arguments.length)return this._chainedBatch();if("function"==typeof t&&(n=t),"function"==typeof e&&(n=e),"function"!=typeof n)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return n(new Error("batch(array) requires an array argument"));t&&"object"==typeof t||(t={});for(var i,o,s=0,u=e.length;u>s;s++)if(i=e[s],"object"==typeof i){if(o=this._checkKey(i.type,"type",this._isBuffer))return n(o);if(o=this._checkKey(i.key,"key",this._isBuffer))return n(o)}return"function"==typeof this._batch?this._batch(e,t,n):void r.nextTick(n)},i.prototype.approximateSize=function(e,t,n){if(null==e||null==t||"function"==typeof e||"function"==typeof t)throw new Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof n)throw new Error("approximateSize() requires a callback argument");return this._isBuffer(e)||(e=String(e)),this._isBuffer(t)||(t=String(t)),"function"==typeof this._approximateSize?this._approximateSize(e,t,n):void r.nextTick(function(){n(null,0)})},i.prototype._setupIteratorOptions=function(e){var t=this;return e=o(e),["start","end","gt","gte","lt","lte"].forEach(function(n){e[n]&&t._isBuffer(e[n])&&0===e[n].length&&delete e[n]}),e.reverse=!!e.reverse,e.keys=0!=e.keys,e.values=0!=e.values,e.limit="limit"in e?e.limit:-1,e.keyAsBuffer=0!=e.keyAsBuffer,e.valueAsBuffer=0!=e.valueAsBuffer,e},i.prototype.iterator=function(e){return"object"!=typeof e&&(e={}),e=this._setupIteratorOptions(e),"function"==typeof this._iterator?this._iterator(e):new s(this)},i.prototype._chainedBatch=function(){return new u(this)},i.prototype._isBuffer=function(e){return n.isBuffer(e)},i.prototype._checkKey=function(e,t){if(null===e||void 0===e)return new Error(t+" cannot be `null` or `undefined`");if(this._isBuffer(e)){if(0===e.length)return new Error(t+" cannot be an empty Buffer")}else if(""===String(e))return new Error(t+" cannot be an empty String")},t.exports=i}).call(this,{isBuffer:e("../../../../../../../is-buffer/index.js")},e("_process"))},{"../../../../../../../is-buffer/index.js":76,"./abstract-chained-batch":111,"./abstract-iterator":112,_process:154,xtend:134}],114:[function(e,t,n){arguments[4][4][0].apply(n,arguments)},{"./abstract-chained-batch":111,"./abstract-iterator":112,"./abstract-leveldown":113,"./is-leveldown":115,dup:4}],115:[function(e,t,n){arguments[4][5][0].apply(n,arguments)},{"./abstract-leveldown":113,dup:5}],116:[function(e,t,n){arguments[4][88][0].apply(n,arguments)},{"./lib/encodings":117,dup:88}],117:[function(e,t,n){arguments[4][89][0].apply(n,arguments)},{buffer:14,dup:89}],118:[function(e,t,n){arguments[4][90][0].apply(n,arguments)},{dup:90,errno:120}],119:[function(e,t,n){arguments[4][37][0].apply(n,arguments)},{dup:37,prr:121}],120:[function(e,t,n){arguments[4][38][0].apply(n,arguments)},{"./custom":119,dup:38}],121:[function(e,t,n){arguments[4][39][0].apply(n,arguments)},{dup:39}],122:[function(e,t,n){arguments[4][91][0].apply(n,arguments)},{dup:91,inherits:123,"level-errors":118,"readable-stream":132,xtend:134}],123:[function(e,t,n){arguments[4][75][0].apply(n,arguments)},{dup:75}],124:[function(e,t,n){arguments[4][93][0].apply(n,arguments)},{"./_stream_readable":126,"./_stream_writable":128,_process:154,"core-util-is":129,dup:93,inherits:123}],125:[function(e,t,n){arguments[4][94][0].apply(n,arguments)},{"./_stream_transform":127,"core-util-is":129,dup:94,inherits:123}],126:[function(e,t,n){arguments[4][95][0].apply(n,arguments)},{"./_stream_duplex":124,_process:154,buffer:14,"core-util-is":129,dup:95,events:41,inherits:123,isarray:130,stream:207,"string_decoder/":131,util:10}],127:[function(e,t,n){arguments[4][96][0].apply(n,arguments)},{"./_stream_duplex":124,"core-util-is":129,dup:96,inherits:123}],128:[function(e,t,n){arguments[4][97][0].apply(n,arguments)},{"./_stream_duplex":124,_process:154,buffer:14,"core-util-is":129,dup:97,inherits:123,stream:207}],129:[function(e,t,n){(function(e){function t(e){return Array.isArray?Array.isArray(e):"[object Array]"===b(e)}function r(e){return"boolean"==typeof e}function i(e){return null===e}function o(e){return null==e}function s(e){return"number"==typeof e}function u(e){return"string"==typeof e}function a(e){return"symbol"==typeof e}function f(e){return void 0===e}function c(e){return"[object RegExp]"===b(e)}function l(e){return"object"==typeof e&&null!==e}function h(e){return"[object Date]"===b(e)}function d(e){return"[object Error]"===b(e)||e instanceof Error}function p(e){return"function"==typeof e}function g(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function b(e){return Object.prototype.toString.call(e)}n.isArray=t,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=o,n.isNumber=s,n.isString=u,n.isSymbol=a,n.isUndefined=f,n.isRegExp=c,n.isObject=l,n.isDate=h,n.isError=d,n.isFunction=p,n.isPrimitive=g,n.isBuffer=e.isBuffer}).call(this,{isBuffer:e("../../../../../../../../../../is-buffer/index.js")})},{"../../../../../../../../../../is-buffer/index.js":76}],130:[function(e,t,n){arguments[4][92][0].apply(n,arguments)},{dup:92}],131:[function(e,t,n){function r(e){if(e&&!a(e))throw new Error("Unknown encoding: "+e)}function i(e){return e.toString(this.encoding)}function o(e){this.charReceived=e.length%2,this.charLength=this.charReceived?2:0}function s(e){this.charReceived=e.length%3,this.charLength=this.charReceived?3:0}var u=e("buffer").Buffer,a=u.isEncoding||function(e){switch(e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},f=n.StringDecoder=function(e){switch(this.encoding=(e||"utf8").toLowerCase().replace(/[-_]/,""),r(e),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new u(6),this.charReceived=0,this.charLength=0};f.prototype.write=function(e){for(var t="";this.charLength;){var n=e.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:e.length;if(e.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";e=e.slice(n,e.length),t=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=t.charCodeAt(t.length-1);if(!(r>=55296&&56319>=r)){if(this.charReceived=this.charLength=0,0===e.length)return t;break}this.charLength+=this.surrogateSize,t=""}this.detectIncompleteChar(e);var i=e.length;this.charLength&&(e.copy(this.charBuffer,0,e.length-this.charReceived,i),i-=this.charReceived),t+=e.toString(this.encoding,0,i);var i=t.length-1,r=t.charCodeAt(i);if(r>=55296&&56319>=r){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),e.copy(this.charBuffer,0,0,o),t.substring(0,i)}return t},f.prototype.detectIncompleteChar=function(e){for(var t=e.length>=3?3:e.length;t>0;t--){var n=e[e.length-t];if(1==t&&n>>5==6){this.charLength=2;break}if(2>=t&&n>>4==14){this.charLength=3;break}if(3>=t&&n>>3==30){this.charLength=4;break}}this.charReceived=t},f.prototype.end=function(e){var t="";if(e&&e.length&&(t=this.write(e)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;t+=r.slice(0,n).toString(i)}return t}},{buffer:14}],132:[function(e,t,n){arguments[4][98][0].apply(n,arguments)},{"./lib/_stream_duplex.js":124,"./lib/_stream_passthrough.js":125,"./lib/_stream_readable.js":126,"./lib/_stream_transform.js":127,"./lib/_stream_writable.js":128,_process:154,dup:98,stream:207}],133:[function(e,t,n){arguments[4][39][0].apply(n,arguments)},{dup:39}],134:[function(e,t){function n(){for(var e={},t=0;t<arguments.length;t++){var n=arguments[t];for(var i in n)r.call(n,i)&&(e[i]=n[i])}return e}t.exports=n;var r=Object.prototype.hasOwnProperty},{}],135:[function(e,t){t.exports={name:"levelup",description:"Fast & simple storage - a Node.js-style LevelDB wrapper",version:"1.3.3",contributors:[{name:"Rod Vagg",email:"r@va.gg",url:"https://github.com/rvagg"},{name:"John Chesley",email:"john@chesl.es",url:"https://github.com/chesles/"},{name:"Jake Verbaten",email:"raynos2@gmail.com",url:"https://github.com/raynos"},{name:"Dominic Tarr",email:"dominic.tarr@gmail.com",url:"https://github.com/dominictarr"},{name:"Max Ogden",email:"max@maxogden.com",url:"https://github.com/maxogden"},{name:"Lars-Magnus Skog",email:"ralphtheninja@riseup.net",url:"https://github.com/ralphtheninja"},{name:"David BjÃ¶rklund",email:"david.bjorklund@gmail.com",url:"https://github.com/kesla"},{name:"Julian Gruber",email:"julian@juliangruber.com",url:"https://github.com/juliangruber"},{name:"Paolo Fragomeni",email:"paolo@async.ly",url:"https://github.com/0x00a"},{name:"Anton Whalley",email:"anton.whalley@nearform.com",url:"https://github.com/No9"},{name:"Matteo Collina",email:"matteo.collina@gmail.com",url:"https://github.com/mcollina"},{name:"Pedro Teixeira",email:"pedro.teixeira@gmail.com",url:"https://github.com/pgte"},{name:"James Halliday",email:"mail@substack.net",url:"https://github.com/substack"},{name:"Jarrett Cruger",email:"jcrugzz@gmail.com",url:"https://github.com/jcrugzz"}],repository:{type:"git",url:"git+https://github.com/level/levelup.git"},homepage:"https://github.com/level/levelup",keywords:["leveldb","stream","database","db","store","storage","json"],main:"lib/levelup.js",dependencies:{"deferred-leveldown":"~1.2.1","level-codec":"~6.1.0","level-errors":"~1.0.3","level-iterator-stream":"~1.3.0",prr:"~1.0.1",semver:"~5.1.0",xtend:"~4.0.0"},devDependencies:{async:"~1.5.0",bustermove:"~1.0.0",tap:"~2.3.1",delayed:"~1.0.1",faucet:"~0.0.1",leveldown:"^1.1.0",memdown:"~1.1.0","msgpack-js":"~0.3.0",referee:"~1.2.0",rimraf:"~2.4.3","slow-stream":"0.0.4",tape:"~4.2.1"},browser:{leveldown:!1,"leveldown/package":!1,semver:!1},scripts:{test:"tape test/*-test.js | faucet"},license:"MIT",gitHead:"cced27dc9f0095823be5ed388ec601ec2bfe7366",bugs:{url:"https://github.com/level/levelup/issues"},_id:"levelup@1.3.3",_shasum:"bf9db62bdb6188d08eaaa2efcf6cc311916f41fd",_from:"levelup@>=1.3.1 <2.0.0",_npmVersion:"2.15.8",_nodeVersion:"4.4.7",_npmUser:{name:"juliangruber",email:"julian@juliangruber.com"},dist:{shasum:"bf9db62bdb6188d08eaaa2efcf6cc311916f41fd",tarball:"https://registry.npmjs.org/levelup/-/levelup-1.3.3.tgz"},maintainers:[{name:"rvagg",email:"rod@vagg.org"},{name:"ralphtheninja",email:"ralphtheninja@riseup.net"},{name:"juliangruber",email:"julian@juliangruber.com"}],_npmOperationalInternal:{host:"packages-12-west.internal.npmjs.com",tmp:"tmp/levelup-1.3.3.tgz_1476029541340_0.44339725002646446"},directories:{},_resolved:"https://registry.npmjs.org/levelup/-/levelup-1.3.3.tgz",readme:"ERROR: No README data found!"}},{}],136:[function(e,t){(function(n,r,i){function o(e){return p.compare(e,this._end)>0}function s(e){return p.compare(e,this._end)>=0}function u(e){return p.compare(e,this._end)<0}function a(e){return p.compare(e,this._end)<=0}function f(e,t){d.call(this,e),this._limit=t.limit,-1===this._limit&&(this._limit=1/0);var n=e._store[e._location];this.keyAsBuffer=t.keyAsBuffer!==!1,this.valueAsBuffer=t.valueAsBuffer!==!1,this._reverse=t.reverse,this._options=t,this._done=0,this._reverse?(this._incr="prev",this._start=p.upperBound(t),this._end=p.lowerBound(t),this._tree="undefined"==typeof this._start?n.end:p.upperBoundInclusive(t)?n.le(this._start):n.lt(this._start),this._end&&(this._test=p.lowerBoundInclusive(t)?s:o)):(this._incr="next",this._start=p.lowerBound(t),this._end=p.upperBound(t),this._tree="undefined"==typeof this._start?n.begin:p.lowerBoundInclusive(t)?n.ge(this._start):n.gt(this._start),this._end&&(this._test=p.upperBoundInclusive(t)?a:u))}function c(e){return this instanceof c?(h.call(this,"string"==typeof e?e:""),this._location=this.location?"$"+this.location:"_tree",this._store=this.location?b:this,void(this._store[this._location]=this._store[this._location]||g(p.compare))):new c(e)}var l=e("inherits"),h=e("abstract-leveldown").AbstractLevelDOWN,d=e("abstract-leveldown").AbstractIterator,p=e("ltgt"),g=e("functional-red-black-tree"),b={},y=r.setImmediate||n.nextTick;l(f,d),f.prototype._next=function(e){var t,n;return this._done++>=this._limit?y(e):this._tree.valid?(t=this._tree.key,n=this._tree.value,this._test(t)?(this.keyAsBuffer&&(t=new i(t)),this.valueAsBuffer&&(n=new i(n)),this._tree[this._incr](),void y(function(){e(null,t,n)})):y(e)):y(e)},f.prototype._test=function(){return!0},c.clearGlobalStore=function(e){e?Object.keys(b).forEach(function(e){delete b[e]}):b={}},l(c,h),c.prototype._open=function(e,t){var n=this;y(function(){t(null,n)})},c.prototype._put=function(e,t,n,r){("undefined"==typeof t||null===t)&&(t="");var i=this._store[this._location].find(e);this._store[this._location]=i.valid?i.update(t):this._store[this._location].insert(e,t),y(r)},c.prototype._get=function(e,t,n){var r=this._store[this._location].get(e);return"undefined"==typeof r?y(function(){n(new Error("NotFound"))}):(t.asBuffer===!1||this._isBuffer(r)||(r=new i(String(r))),void y(function(){n(null,r)}))},c.prototype._del=function(e,t,n){this._store[this._location]=this._store[this._location].remove(e),y(n)},c.prototype._batch=function(e,t,n){for(var r,i,o,s=-1,u=e.length,a=this._store[this._location];++s<u;)e[s]&&(r=this._isBuffer(e[s].key)?e[s].key:String(e[s].key),o=a.find(r),"put"===e[s].type?(i=this._isBuffer(e[s].value)?e[s].value:String(e[s].value),a=o.valid?o.update(i):a.insert(r,i)):a=o.remove());this._store[this._location]=a,y(n)},c.prototype._iterator=function(e){return new f(this,e)},c.prototype._isBuffer=function(e){return i.isBuffer(e)},c.destroy=function(e,t){var n="$"+e;n in b&&delete b[n],y(t)},t.exports=c}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{_process:154,"abstract-leveldown":140,buffer:14,"functional-red-black-tree":143,inherits:144,ltgt:145}],137:[function(e,t,n){arguments[4][1][0].apply(n,arguments)},{_process:154,dup:1}],138:[function(e,t,n){arguments[4][2][0].apply(n,arguments)},{_process:154,dup:2}],139:[function(e,t){(function(n,r){function i(e){if(!arguments.length||void 0===e)throw new Error("constructor requires at least a location argument");if("string"!=typeof e)throw new Error("constructor requires a location string argument");this.location=e,this.status="new"}var o=e("xtend"),s=e("./abstract-iterator"),u=e("./abstract-chained-batch");i.prototype.open=function(e,t){var n=this,i=this.status;if("function"==typeof e&&(t=e),"function"!=typeof t)throw new Error("open() requires a callback argument");"object"!=typeof e&&(e={}),e.createIfMissing=0!=e.createIfMissing,e.errorIfExists=!!e.errorIfExists,"function"==typeof this._open?(this.status="opening",this._open(e,function(e){return e?(n.status=i,t(e)):(n.status="open",void t())})):(this.status="open",r.nextTick(t))},i.prototype.close=function(e){var t=this,n=this.status;if("function"!=typeof e)throw new Error("close() requires a callback argument");"function"==typeof this._close?(this.status="closing",this._close(function(r){return r?(t.status=n,e(r)):(t.status="closed",void e())})):(this.status="closed",r.nextTick(e))},i.prototype.get=function(e,t,n){var i;if("function"==typeof t&&(n=t),"function"!=typeof n)throw new Error("get() requires a callback argument");return(i=this._checkKey(e,"key",this._isBuffer))?n(i):(this._isBuffer(e)||(e=String(e)),"object"!=typeof t&&(t={}),t.asBuffer=0!=t.asBuffer,"function"==typeof this._get?this._get(e,t,n):void r.nextTick(function(){n(new Error("NotFound"))}))},i.prototype.put=function(e,t,n,i){var o;if("function"==typeof n&&(i=n),"function"!=typeof i)throw new Error("put() requires a callback argument");return(o=this._checkKey(e,"key",this._isBuffer))?i(o):(this._isBuffer(e)||(e=String(e)),null==t||this._isBuffer(t)||r.browser||(t=String(t)),"object"!=typeof n&&(n={}),"function"==typeof this._put?this._put(e,t,n,i):void r.nextTick(i))},i.prototype.del=function(e,t,n){var i;if("function"==typeof t&&(n=t),"function"!=typeof n)throw new Error("del() requires a callback argument");return(i=this._checkKey(e,"key",this._isBuffer))?n(i):(this._isBuffer(e)||(e=String(e)),"object"!=typeof t&&(t={}),"function"==typeof this._del?this._del(e,t,n):void r.nextTick(n))},i.prototype.batch=function(e,t,n){if(!arguments.length)return this._chainedBatch();if("function"==typeof t&&(n=t),"function"==typeof e&&(n=e),"function"!=typeof n)throw new Error("batch(array) requires a callback argument");if(!Array.isArray(e))return n(new Error("batch(array) requires an array argument"));t&&"object"==typeof t||(t={});for(var i,o,s=0,u=e.length;u>s;s++)if(i=e[s],"object"==typeof i){if(o=this._checkKey(i.type,"type",this._isBuffer))return n(o);if(o=this._checkKey(i.key,"key",this._isBuffer))return n(o)}return"function"==typeof this._batch?this._batch(e,t,n):void r.nextTick(n)},i.prototype.approximateSize=function(e,t,n){if(null==e||null==t||"function"==typeof e||"function"==typeof t)throw new Error("approximateSize() requires valid `start`, `end` and `callback` arguments");if("function"!=typeof n)throw new Error("approximateSize() requires a callback argument");return this._isBuffer(e)||(e=String(e)),this._isBuffer(t)||(t=String(t)),"function"==typeof this._approximateSize?this._approximateSize(e,t,n):void r.nextTick(function(){n(null,0)})},i.prototype._setupIteratorOptions=function(e){var t=this;return e=o(e),["start","end","gt","gte","lt","lte"].forEach(function(n){e[n]&&t._isBuffer(e[n])&&0===e[n].length&&delete e[n]}),e.reverse=!!e.reverse,e.keys=0!=e.keys,e.values=0!=e.values,e.limit="limit"in e?e.limit:-1,e.keyAsBuffer=0!=e.keyAsBuffer,e.valueAsBuffer=0!=e.valueAsBuffer,e},i.prototype.iterator=function(e){return"object"!=typeof e&&(e={}),e=this._setupIteratorOptions(e),"function"==typeof this._iterator?this._iterator(e):new s(this)},i.prototype._chainedBatch=function(){return new u(this)},i.prototype._isBuffer=function(e){return n.isBuffer(e)},i.prototype._checkKey=function(e,t){if(null===e||void 0===e)return new Error(t+" cannot be `null` or `undefined`");if(this._isBuffer(e)){if(0===e.length)return new Error(t+" cannot be an empty Buffer")}else if(""===String(e))return new Error(t+" cannot be an empty String")},t.exports=i}).call(this,{isBuffer:e("../../../../../is-buffer/index.js")},e("_process"))},{"../../../../../is-buffer/index.js":76,"./abstract-chained-batch":137,"./abstract-iterator":138,_process:154,xtend:142}],140:[function(e,t,n){arguments[4][4][0].apply(n,arguments)},{"./abstract-chained-batch":137,"./abstract-iterator":138,"./abstract-leveldown":139,"./is-leveldown":141,dup:4}],141:[function(e,t,n){arguments[4][5][0].apply(n,arguments)},{"./abstract-leveldown":139,dup:5}],142:[function(e,t,n){arguments[4][134][0].apply(n,arguments)},{dup:134}],143:[function(e,t){"use strict";function n(e,t,n,r,i,o){this._color=e,this.key=t,this.value=n,this.left=r,this.right=i,this._count=o}function r(e){return new n(e._color,e.key,e.value,e.left,e.right,e._count)}function i(e,t){return new n(e,t.key,t.value,t.left,t.right,t._count)}function o(e){e._count=1+(e.left?e.left._count:0)+(e.right?e.right._count:0)}function s(e,t){this._compare=e,this.root=t}function u(e,t){if(t.left){var n=u(e,t.left);if(n)return n}var n=e(t.key,t.value);return n?n:t.right?u(e,t.right):void 0}function a(e,t,n,r){var i=t(e,r.key);if(0>=i){if(r.left){var o=a(e,t,n,r.left);if(o)return o}var o=n(r.key,r.value);if(o)return o}return r.right?a(e,t,n,r.right):void 0}function f(e,t,n,r,i){var o,s=n(e,i.key),u=n(t,i.key);if(0>=s){if(i.left&&(o=f(e,t,n,r,i.left)))return o;if(u>0&&(o=r(i.key,i.value)))return o}return u>0&&i.right?f(e,t,n,r,i.right):void 0}function c(e,t){this.tree=e,this._stack=t}function l(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e._color=t._color,e._count=t._count}function h(e){for(var t,n,s,u,a=e.length-1;a>=0;--a){if(t=e[a],0===a)return void(t._color=b);if(n=e[a-1],n.left===t){if(s=n.right,s.right&&s.right._color===g){if(s=n.right=r(s),u=s.right=r(s.right),n.right=s.left,s.left=n,s.right=u,s._color=n._color,t._color=b,n._color=b,u._color=b,o(n),o(s),a>1){var f=e[a-2];f.left===n?f.left=s:f.right=s}return void(e[a-1]=s)}if(s.left&&s.left._color===g){if(s=n.right=r(s),u=s.left=r(s.left),n.right=u.left,s.left=u.right,u.left=n,u.right=s,u._color=n._color,n._color=b,s._color=b,t._color=b,o(n),o(s),o(u),a>1){var f=e[a-2];f.left===n?f.left=u:f.right=u}return void(e[a-1]=u)}if(s._color===b){if(n._color===g)return n._color=b,void(n.right=i(g,s));n.right=i(g,s);continue}if(s=r(s),n.right=s.left,s.left=n,s._color=n._color,n._color=g,o(n),o(s),a>1){var f=e[a-2];f.left===n?f.left=s:f.right=s}e[a-1]=s,e[a]=n,a+1<e.length?e[a+1]=t:e.push(t),a+=2}else{if(s=n.left,s.left&&s.left._color===g){if(s=n.left=r(s),u=s.left=r(s.left),n.left=s.right,s.right=n,s.left=u,s._color=n._color,t._color=b,n._color=b,u._color=b,o(n),o(s),a>1){var f=e[a-2];f.right===n?f.right=s:f.left=s}return void(e[a-1]=s)}if(s.right&&s.right._color===g){if(s=n.left=r(s),u=s.right=r(s.right),n.left=u.right,s.right=u.left,u.right=n,u.left=s,u._color=n._color,n._color=b,s._color=b,t._color=b,o(n),o(s),o(u),a>1){var f=e[a-2];f.right===n?f.right=u:f.left=u}return void(e[a-1]=u)}if(s._color===b){if(n._color===g)return n._color=b,void(n.left=i(g,s));n.left=i(g,s);continue}if(s=r(s),n.left=s.right,s.right=n,s._color=n._color,n._color=g,o(n),o(s),a>1){var f=e[a-2];f.right===n?f.right=s:f.left=s}e[a-1]=s,e[a]=n,a+1<e.length?e[a+1]=t:e.push(t),a+=2}}}function d(e,t){return t>e?-1:e>t?1:0}function p(e){return new s(e||d,null)}t.exports=p;var g=0,b=1,y=s.prototype;Object.defineProperty(y,"keys",{get:function(){var e=[];return this.forEach(function(t){e.push(t)}),e}}),Object.defineProperty(y,"values",{get:function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e}}),Object.defineProperty(y,"length",{get:function(){return this.root?this.root._count:0}}),y.insert=function(e,t){for(var r=this._compare,u=this.root,a=[],f=[];u;){var c=r(e,u.key);a.push(u),f.push(c),u=0>=c?u.left:u.right}a.push(new n(g,e,t,null,null,1));for(var l=a.length-2;l>=0;--l){var u=a[l];a[l]=f[l]<=0?new n(u._color,u.key,u.value,a[l+1],u.right,u._count+1):new n(u._color,u.key,u.value,u.left,a[l+1],u._count+1)}for(var l=a.length-1;l>1;--l){var h=a[l-1],u=a[l];if(h._color===b||u._color===b)break;var d=a[l-2];if(d.left===h)if(h.left===u){var p=d.right;if(!p||p._color!==g){if(d._color=g,d.left=h.right,h._color=b,h.right=d,a[l-2]=h,a[l-1]=u,o(d),o(h),l>=3){var y=a[l-3];y.left===d?y.left=h:y.right=h}break}h._color=b,d.right=i(b,p),d._color=g,l-=1}else{var p=d.right;if(!p||p._color!==g){if(h.right=u.left,d._color=g,d.left=u.right,u._color=b,u.left=h,u.right=d,a[l-2]=u,a[l-1]=h,o(d),o(h),o(u),l>=3){var y=a[l-3];y.left===d?y.left=u:y.right=u}break}h._color=b,d.right=i(b,p),d._color=g,l-=1}else if(h.right===u){var p=d.left;if(!p||p._color!==g){if(d._color=g,d.right=h.left,h._color=b,h.left=d,a[l-2]=h,a[l-1]=u,o(d),o(h),l>=3){var y=a[l-3];y.right===d?y.right=h:y.left=h}break}h._color=b,d.left=i(b,p),d._color=g,l-=1}else{var p=d.left;if(!p||p._color!==g){if(h.left=u.right,d._color=g,d.right=u.left,u._color=b,u.right=h,u.left=d,a[l-2]=u,a[l-1]=h,o(d),o(h),o(u),l>=3){var y=a[l-3];y.right===d?y.right=u:y.left=u}break}h._color=b,d.left=i(b,p),d._color=g,l-=1}}return a[0]._color=b,new s(r,a[0]);

},y.forEach=function(e,t,n){if(this.root)switch(arguments.length){case 1:return u(e,this.root);case 2:return a(t,this._compare,e,this.root);case 3:if(this._compare(t,n)>=0)return;return f(t,n,this._compare,e,this.root)}},Object.defineProperty(y,"begin",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.left;return new c(this,e)}}),Object.defineProperty(y,"end",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.right;return new c(this,e)}}),y.at=function(e){if(0>e)return new c(this,[]);for(var t=this.root,n=[];;){if(n.push(t),t.left){if(e<t.left._count){t=t.left;continue}e-=t.left._count}if(!e)return new c(this,n);if(e-=1,!t.right)break;if(e>=t.right._count)break;t=t.right}return new c(this,[])},y.ge=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var o=t(e,n.key);r.push(n),0>=o&&(i=r.length),n=0>=o?n.left:n.right}return r.length=i,new c(this,r)},y.gt=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var o=t(e,n.key);r.push(n),0>o&&(i=r.length),n=0>o?n.left:n.right}return r.length=i,new c(this,r)},y.lt=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var o=t(e,n.key);r.push(n),o>0&&(i=r.length),n=0>=o?n.left:n.right}return r.length=i,new c(this,r)},y.le=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var o=t(e,n.key);r.push(n),o>=0&&(i=r.length),n=0>o?n.left:n.right}return r.length=i,new c(this,r)},y.find=function(e){for(var t=this._compare,n=this.root,r=[];n;){var i=t(e,n.key);if(r.push(n),0===i)return new c(this,r);n=0>=i?n.left:n.right}return new c(this,[])},y.remove=function(e){var t=this.find(e);return t?t.remove():this},y.get=function(e){for(var t=this._compare,n=this.root;n;){var r=t(e,n.key);if(0===r)return n.value;n=0>=r?n.left:n.right}};var v=c.prototype;Object.defineProperty(v,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(v,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),v.clone=function(){return new c(this.tree,this._stack.slice())},v.remove=function(){var e=this._stack;if(0===e.length)return this.tree;var t=new Array(e.length),r=e[e.length-1];t[t.length-1]=new n(r._color,r.key,r.value,r.left,r.right,r._count);for(var i=e.length-2;i>=0;--i){var r=e[i];t[i]=r.left===e[i+1]?new n(r._color,r.key,r.value,t[i+1],r.right,r._count):new n(r._color,r.key,r.value,r.left,t[i+1],r._count)}if(r=t[t.length-1],r.left&&r.right){var o=t.length;for(r=r.left;r.right;)t.push(r),r=r.right;var u=t[o-1];t.push(new n(r._color,u.key,u.value,r.left,r.right,r._count)),t[o-1].key=r.key,t[o-1].value=r.value;for(var i=t.length-2;i>=o;--i)r=t[i],t[i]=new n(r._color,r.key,r.value,r.left,t[i+1],r._count);t[o-1].left=t[o]}if(r=t[t.length-1],r._color===g){var a=t[t.length-2];a.left===r?a.left=null:a.right===r&&(a.right=null),t.pop();for(var i=0;i<t.length;++i)t[i]._count--;return new s(this.tree._compare,t[0])}if(r.left||r.right){r.left?l(r,r.left):r.right&&l(r,r.right),r._color=b;for(var i=0;i<t.length-1;++i)t[i]._count--;return new s(this.tree._compare,t[0])}if(1===t.length)return new s(this.tree._compare,null);for(var i=0;i<t.length;++i)t[i]._count--;var f=t[t.length-2];return h(t),f.left===r?f.left=null:f.right=null,new s(this.tree._compare,t[0])},Object.defineProperty(v,"key",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1].key:void 0},enumerable:!0}),Object.defineProperty(v,"value",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1].value:void 0},enumerable:!0}),Object.defineProperty(v,"index",{get:function(){var e=0,t=this._stack;if(0===t.length){var n=this.tree.root;return n?n._count:0}t[t.length-1].left&&(e=t[t.length-1].left._count);for(var r=t.length-2;r>=0;--r)t[r+1]===t[r].right&&(++e,t[r].left&&(e+=t[r].left._count));return e},enumerable:!0}),v.next=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.right)for(t=t.right;t;)e.push(t),t=t.left;else for(e.pop();e.length>0&&e[e.length-1].right===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(v,"hasNext",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].right)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].left===e[t])return!0;return!1}}),v.update=function(e){var t=this._stack;if(0===t.length)throw new Error("Can't update empty node!");var r=new Array(t.length),i=t[t.length-1];r[r.length-1]=new n(i._color,i.key,e,i.left,i.right,i._count);for(var o=t.length-2;o>=0;--o)i=t[o],r[o]=i.left===t[o+1]?new n(i._color,i.key,i.value,r[o+1],i.right,i._count):new n(i._color,i.key,i.value,i.left,r[o+1],i._count);return new s(this.tree._compare,r[0])},v.prev=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.left)for(t=t.left;t;)e.push(t),t=t.right;else for(e.pop();e.length>0&&e[e.length-1].left===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(v,"hasPrev",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].left)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].right===e[t])return!0;return!1}})},{}],144:[function(e,t,n){arguments[4][75][0].apply(n,arguments)},{dup:75}],145:[function(e,t,n){(function(e){function t(e){return null!=e&&""!==e}n.compare=function(t,n){if(e.isBuffer(t)){for(var r=Math.min(t.length,n.length),i=0;r>i;i++){var o=t[i]-n[i];if(o)return o}return t.length-n.length}return n>t?-1:t>n?1:0};var r=n.lowerBound=function(e){return t(e.gt)?e.gt:t(e.gte)?e.gte:t(e.min)?e.min:t(e.start)&&!e.reverse?e.start:t(e.end)&&e.reverse?e.end:void 0};n.lowerBoundInclusive=function(e){return t(e.gt)?!1:!0},n.upperBoundInclusive=function(e){return t(e.lt)?!1:!0};var i=n.lowerBoundExclusive=function(e){return t(e.gt)?!0:!1},o=n.upperBoundExclusive=function(e){return t(e.lt)?!0:!1},s=n.upperBound=function(e){return t(e.lt)?e.lt:t(e.lte)?e.lte:t(e.max)?e.max:t(e.start)&&e.reverse?e.start:t(e.end)&&!e.reverse?e.end:void 0};n.contains=function(e,u,a){a=a||n.compare;var f=r(e);if(t(f)){var c=a(u,f);if(0>c||0===c&&i(e))return!1}var l=s(e);if(t(l)){var c=a(u,l);if(c>0||0===c&&o(e))return!1}return!0},n.filter=function(e,t){return function(r){return n.contains(e,r,t)}}}).call(this,{isBuffer:e("../../../../../is-buffer/index.js")})},{"../../../../../is-buffer/index.js":76}],146:[function(e,t){(function(n){function r(e,t){if(!(this instanceof r))return new r(e,t);if(!e||!e.leaf||!e.parent)throw new Error("opts.leaf and opts.parent required");this.roots=t||e.roots||[],this.blocks=this.roots.length?1+i.rightSpan(this.roots[this.roots.length-1].index)/2:0;for(var n=0;n<this.roots.length;n++){var o=this.roots[n];o&&!o.parent&&(o.parent=i.parent(o.index))}this._leaf=e.leaf,this._parent=e.parent}var i=e("flat-tree");t.exports=r,r.prototype.next=function(e,t){n.isBuffer(e)||(e=new n(e)),t||(t=[]);var r=2*this.blocks++,o={index:r,parent:i.parent(r),hash:null,size:e.length,data:e};for(o.hash=this._leaf(o,this.roots),this.roots.push(o),t.push(o);this.roots.length>1;){var s=this.roots[this.roots.length-2],u=this.roots[this.roots.length-1];if(s.parent!==u.parent)break;this.roots.pop(),this.roots[this.roots.length-1]=o={index:s.parent,parent:i.parent(s.parent),hash:this._parent(s,u),size:s.size+u.size,data:null},t.push(o)}return t}}).call(this,e("buffer").Buffer)},{buffer:14,"flat-tree":42}],147:[function(e,t){function n(e){if(e=String(e),!(e.length>1e4)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*c;case"days":case"day":case"d":return n*f;case"hours":case"hour":case"hrs":case"hr":case"h":return n*a;case"minutes":case"minute":case"mins":case"min":case"m":return n*u;case"seconds":case"second":case"secs":case"sec":case"s":return n*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return void 0}}}}function r(e){return e>=f?Math.round(e/f)+"d":e>=a?Math.round(e/a)+"h":e>=u?Math.round(e/u)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function i(e){return o(e,f,"day")||o(e,a,"hour")||o(e,u,"minute")||o(e,s,"second")||e+" ms"}function o(e,t,n){return t>e?void 0:1.5*t>e?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}var s=1e3,u=60*s,a=60*u,f=24*a,c=365.25*f;t.exports=function(e,t){t=t||{};var o=typeof e;if("string"===o&&e.length>0)return n(e);if("number"===o&&isNaN(e)===!1)return t["long"]?i(e):r(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},{}],148:[function(e,t){(function(n,r){function i(e,t){function i(e,t,n){n&&(n=new r(new Uint8Array(n))),s(e,t,n)}if("string"==typeof e&&(e={uri:e}),e.hasOwnProperty("encoding")||(e.encoding=null),n.browser&&!e.hasOwnProperty("json")&&null===e.encoding){e.responseType="arraybuffer";var s=t;t=i}return o(e,t)}var o=e("request");t.exports=i}).call(this,e("_process"),e("buffer").Buffer)},{_process:154,buffer:14,request:229}],149:[function(e,t){function n(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}var r=e("wrappy");t.exports=r(n),n.proto=n(function(){Object.defineProperty(Function.prototype,"once",{value:function(){return n(this)},configurable:!0})})},{wrappy:228}],150:[function(e,t){var n=e("trim"),r=e("for-each"),i=function(e){return"[object Array]"===Object.prototype.toString.call(e)};t.exports=function(e){if(!e)return{};var t={};return r(n(e).split("\n"),function(e){var r=e.indexOf(":"),o=n(e.slice(0,r)).toLowerCase(),s=n(e.slice(r+1));"undefined"==typeof t[o]?t[o]=s:i(t[o])?t[o].push(s):t[o]=[t[o],s]}),t}},{"for-each":43,trim:215}],151:[function(e,t,n){(function(e){n.encode=function(t,r,i){return t||(t=e(0)),"string"==typeof t&&(t=e(t)),n.encode.bytes=t.length,r?(i||(i=0),t.length&&t.copy(r,i),r):t},n.encode.bytes=0,n.decode=function(e,t,r){return n.decode.bytes=(r||e.length)-(t||0),t||r?e.slice(t,r||e.length):e},n.decode.bytes=0,n.encodingLength=function(t){return t?"string"==typeof t?e.byteLength(t):t.length:0}}).call(this,e("buffer").Buffer)},{buffer:14}],152:[function(e,t,n){(function(e){function t(e,t){for(var n=0,r=e.length-1;r>=0;r--){var i=e[r];"."===i?e.splice(r,1):".."===i?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};n.resolve=function(){for(var n="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var s=o>=0?arguments[o]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(n=s+"/"+n,i="/"===s.charAt(0))}return n=t(r(n.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+n||"."},n.normalize=function(e){var i=n.isAbsolute(e),o="/"===s(e,-1);return e=t(r(e.split("/"),function(e){return!!e}),!i).join("/"),e||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},n.isAbsolute=function(e){return"/"===e.charAt(0)},n.join=function(){var e=Array.prototype.slice.call(arguments,0);return n.normalize(r(e,function(e){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},n.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var n=e.length-1;n>=0&&""===e[n];n--);return t>n?[]:e.slice(t,n-t+1)}e=n.resolve(e).substr(1),t=n.resolve(t).substr(1);for(var i=r(e.split("/")),o=r(t.split("/")),s=Math.min(i.length,o.length),u=s,a=0;s>a;a++)if(i[a]!==o[a]){u=a;break}for(var f=[],a=u;a<i.length;a++)f.push("..");return f=f.concat(o.slice(u)),f.join("/")},n.sep="/",n.delimiter=":",n.dirname=function(e){var t=o(e),n=t[0],r=t[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},n.basename=function(e,t){var n=o(e)[2];return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},n.extname=function(e){return o(e)[3]};var s="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return 0>t&&(t=e.length+t),e.substr(t,n)}}).call(this,e("_process"))},{_process:154}],153:[function(e,t){(function(e){"use strict";function n(t,n,r,i){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var o,s,u=arguments.length;switch(u){case 0:case 1:return e.nextTick(t);case 2:return e.nextTick(function(){t.call(null,n)});case 3:return e.nextTick(function(){t.call(null,n,r)});case 4:return e.nextTick(function(){t.call(null,n,r,i)});default:for(o=new Array(u-1),s=0;s<o.length;)o[s++]=arguments[s];return e.nextTick(function(){t.apply(null,o)})}}t.exports=!e.version||0===e.version.indexOf("v0.")||0===e.version.indexOf("v1.")&&0!==e.version.indexOf("v1.8.")?n:e.nextTick}).call(this,e("_process"))},{_process:154}],154:[function(e,t){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(e){if(l===clearTimeout)return clearTimeout(e);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(e);try{return l(e)}catch(t){try{return l.call(null,e)}catch(t){return l.call(this,e)}}}function s(){g&&d&&(g=!1,d.length?p=d.concat(p):b=-1,p.length&&u())}function u(){if(!g){var e=i(s);g=!0;for(var t=p.length;t;){for(d=p,p=[];++b<t;)d&&d[b].run();b=-1,t=p.length}d=null,g=!1,o(e)}}function a(e,t){this.fun=e,this.array=t}function f(){}var c,l,h=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(e){l=r}}();var d,p=[],g=!1,b=-1;h.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];p.push(new a(e,t)),1!==p.length||g||i(u)},a.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=f,h.addListener=f,h.once=f,h.off=f,h.removeListener=f,h.removeAllListeners=f,h.emit=f,h.binding=function(){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},{}],155:[function(e,t){var n=e("./parse"),r=e("./stringify");t.exports=n,t.exports.parse=n,t.exports.stringify=r},{"./parse":156,"./stringify":157}],156:[function(e,t){var n=e("./tokenize"),r=536870911,i=function(e){for(var t={};e.length;)switch(e[0]){case"[":case",":e.shift();var n=e.shift();if("("===n&&(n=e.shift(),e.shift()),"="!==e[0])throw new Error("Unexpected token in field options: "+e[0]);if(e.shift(),"]"===e[0])throw new Error("Unexpected ] in field option");t[n]=e.shift();break;case"]":return e.shift(),t;default:throw new Error("Unexpected token in field options: "+e[0])}throw new Error("No closing tag for field options")},o=function(e){for(var t={name:null,type:null,tag:0,map:null,oneof:null,required:!1,repeated:!1,options:{}};e.length;)switch(e[0]){case"=":e.shift(),t.tag=Number(e.shift());break;case"map":if(t.type="map",t.map={from:null,to:null},e.shift(),"<"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.from=e.shift(),","!==e[0])throw new Error("Unexpected token in map type: "+e[0]);if(e.shift(),t.map.to=e.shift(),">"!==e[0])throw new Error("Unexpected token in map type: "+e[0]);e.shift(),t.name=e.shift();break;case"repeated":case"required":case"optional":var n=e.shift();t.required="required"===n,t.repeated="repeated"===n,t.type=e.shift(),t.name=e.shift();break;case"[":t.options=i(e);break;case";":return e.shift(),t;default:throw new Error("Unexpected token in message field: "+e[0])}throw new Error("No ; found for message field")},s=function(e){for(var t={enums:[],messages:[],fields:[],extensions:null};e.length;)switch(e[0]){case"map":case"repeated":case"optional":case"required":t.fields.push(o(e));break;case"enum":t.enums.push(d(e));break;case"message":t.messages.push(f(e));break;case"extensions":t.extensions=a(e);break;case"oneof":e.shift();var n=e.shift();if("{"!==e[0])throw new Error("Unexpected token in oneof: "+e[0]);for(e.shift();"}"!==e[0];){e.unshift("optional");var r=o(e);r.oneof=n,t.fields.push(r)}e.shift();break;case";":e.shift();break;default:e.unshift("optional"),t.fields.push(o(e))}return t},u=function(e){var t={name:e[1],message:f(e)};return t},a=function(e){e.shift();var t=Number(e.shift());if(isNaN(t))throw new Error("Invalid from in extensions definition");if("to"!==e.shift())throw new Error("Expected keyword 'to' in extensions definition");var n=e.shift();if("max"===n&&(n=r),n=Number(n),isNaN(n))throw new Error("Invalid to in extensions definition");if(";"!==e.shift())throw new Error("Missing ; in extensions definition");return{from:t,to:n}},f=function(e){e.shift();var t=1,n=[],r={name:e.shift(),enums:[],messages:[],fields:[]};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("{"===e[0]?t++:"}"===e[0]&&t--,!t)return e.shift(),n=s(n),r.enums=n.enums,r.messages=n.messages,r.fields=n.fields,r.extensions=n.extensions,r;n.push(e.shift())}if(t)throw new Error("No closing tag for message")},c=function(e){e.shift();var t=e.shift();if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},l=function(e){if(e.shift(),"="!==e[0])throw new Error("Expected = but found "+e[0]);e.shift();var t=e.shift();switch(t){case'"proto2"':t=2;break;case'"proto3"':t=3;break;default:throw new Error("Expected protobuf syntax version but found "+t)}if(";"!==e[0])throw new Error("Expected ; but found "+e[0]);return e.shift(),t},h=function(e){if(e.length<4)throw new Error("Invalid enum value: "+e.slice(0,3).join(" "));if("="!==e[1])throw new Error("Expected = but found "+e[1]);if(";"!==e[3])throw new Error("Expected ; but found "+e[1]);var t=e.shift();e.shift();var n=Number(e.shift());return e.shift(),{name:t,value:n}},d=function(e){e.shift();var t={name:e.shift(),values:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;if("option"===e[0])for(;";"!==e.shift(););var n=h(e);t.values[n.name]=n.value}throw new Error("No closing tag for enum")},p=function(e){for(var t=null,n=null,r=function(e){return"true"===e?!0:"false"===e?!1:e.replace(/^"+|"+$/gm,"")};e.length;){if(";"===e[0])return e.shift(),{name:t,value:n};switch(e[0]){case"option":e.shift();var i="("===e[0];if(i&&e.shift(),t=e.shift(),i){if(")"!==e[0])throw new Error("Expected ) but found "+e[0]);e.shift()}break;case"=":if(e.shift(),null===t)throw new Error("Expected key for option with value: "+e[0]);if(n=r(e.shift()),"optimize_for"===t&&!/^(SPEED|CODE_SIZE|LITE_RUNTIME)$/.test(n))throw new Error("Unexpected value for option optimize_for: "+n);"{"===n&&(n=g(e));break;default:throw new Error("Unexpected token in option: "+e[0])}}},g=function(e){for(var t=function(e){return"true"===e?!0:"false"===e?!1:e.replace(/^"+|"+$/gm,"")},n={};e.length;){if("}"===e[0])return e.shift(),n;var r="("===e[0];r&&e.shift();var i=e.shift();if(r){if(")"!==e[0])throw new Error("Expected ) but found "+e[0]);e.shift()}var o=null;switch(e[0]){case":":if(void 0!==n[i])throw new Error("Duplicate option map key "+i);e.shift(),o=t(e.shift()),"{"===o&&(o=g(e)),n[i]=o;break;case"{":if(e.shift(),o=g(e),void 0===n[i]&&(n[i]=[]),!Array.isArray(n[i]))throw new Error("Duplicate option map key "+i);n[i].push(o);break;default:throw new Error("Unexpected token in option map: "+e[0])}}throw new Error("No closing tag for option map")},b=function(e){e.shift();var t=e.shift().replace(/^"+|"+$/gm,"");if(";"!==e[0])throw new Error("Unexpected token: "+e[0]+'. Expected ";"');return e.shift(),t},y=function(e){e.shift();var t={name:e.shift(),methods:[],options:{}};if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;switch(e[0]){case"option":var n=p(e);if(void 0!==t.options[n.name])throw new Error("Duplicate option "+n.name);t.options[n.name]=n.value;break;case"rpc":t.methods.push(v(e));break;default:throw new Error("Unexpected token in service: "+e[0])}}throw new Error("No closing tag for service")},v=function(e){e.shift();var t={name:e.shift(),input_type:null,output_type:null,client_streaming:!1,server_streaming:!1,options:{}};if("("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.client_streaming=!0),t.input_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),"returns"!==e[0])throw new Error("Expected returns but found "+e[0]);if(e.shift(),"("!==e[0])throw new Error("Expected ( but found "+e[0]);if(e.shift(),"stream"===e[0]&&(e.shift(),t.server_streaming=!0),t.output_type=e.shift(),")"!==e[0])throw new Error("Expected ) but found "+e[0]);if(e.shift(),";"===e[0])return e.shift(),t;if("{"!==e[0])throw new Error("Expected { but found "+e[0]);for(e.shift();e.length;){if("}"===e[0])return e.shift(),";"===e[0]&&e.shift(),t;if("option"!==e[0])throw new Error("Unexpected token in rpc options: "+e[0]);var n=p(e);if(void 0!==t.options[n.name])throw new Error("Duplicate option "+n.name);t.options[n.name]=n.value}throw new Error("No closing tag for rpc")},_=function(e){for(var t=n(e.toString()),r=0;r<t.length;r++)if(/^(\"|\')([^\'\"]*)$/.test(t[r])){var i;for(i=1===t[r].length?r+1:r;i<t.length;i++)if(/^([^\'\"]*)(\"|\')$/.test(t[i])){t=t.slice(0,r).concat(t.slice(r,i+1).join("")).concat(t.slice(i+1));break}}for(var o={syntax:3,"package":null,imports:[],enums:[],messages:[],options:{},"extends":[]},s=!0;t.length;){switch(t[0]){case"package":o["package"]=c(t);break;case"syntax":if(!s)throw new Error("Protobuf syntax version should be first thing in file");o.syntax=l(t);break;case"message":o.messages.push(f(t));break;case"enum":o.enums.push(d(t));break;case"option":var a=p(t);if(o.options[a.name])throw new Error("Duplicate option "+a.name);o.options[a.name]=a.value;break;case"import":o.imports.push(b(t));break;case"extend":o["extends"].push(u(t));break;case"service":o.services||(o.services=[]),o.services.push(y(t));break;default:throw new Error("Unexpected token: "+t[0])}s=!1}return o["extends"].forEach(function(e){o.messages.forEach(function(t){t.name===e.name&&e.message.fields.forEach(function(e){if(!t.extensions||e.tag<t.extensions.from||e.tag>t.extensions.to)throw new Error(t.name+" does not declare "+e.tag+" as an extension number");t.fields.push(e)})})}),o};t.exports=_},{"./tokenize":158}],157:[function(e,t){var n=function(e,t){var n=e.repeated?"repeated":e.required?"required":"optional";"map"===e.type&&(n="map<"+e.map.from+","+e.map.to+">"),e.oneof&&(n="");var r=Object.keys(e.options||{}).map(function(t){return t+" = "+e.options[t]}).join(",");return r&&(r=" ["+r+"]"),t.push((n?n+" ":"")+("map"===e.map?"":e.type+" ")+e.name+" = "+e.tag+r+";"),t},r=function(e,t){t.push("message "+e.name+" {"),e.enums||(e.enums=[]),e.enums.forEach(function(e){t.push(i(e,[]))}),e.messages||(e.messages=[]),e.messages.forEach(function(e){t.push(r(e,[]))});var o={};return e.fields||(e.fields=[]),e.fields.forEach(function(e){e.oneof?(o[e.oneof]||(o[e.oneof]=[]),o[e.oneof].push(n(e,[]))):t.push(n(e,[]))}),Object.keys(o).forEach(function(e){o[e].unshift("oneof "+e+" {"),o[e].push("}"),t.push(o[e])}),t.push("}",""),t},i=function(e,t){t.push("enum "+e.name+" {");var n=Object.keys(e.values).map(function(t){return t+" = "+e.values[t]+";"});return t.push(n),t.push("}",""),t},o=function(e,t){var n=Object.keys(e);return n.forEach(function(n){var r=e[n];~n.indexOf(".")&&(n="("+n+")");var i=typeof r;"object"===i?(r=s(r,[]),r.length&&t.push("option "+n+" = {",r,"};")):("string"===i&&"optimize_for"!==n&&(r='"'+r+'"'),t.push("option "+n+" = "+r+";"))}),n.length>0&&t.push(""),t},s=function(e,t){var n=Object.keys(e);return n.forEach(function(n){var r=e[n],i=typeof r;"object"===i?Array.isArray(r)?r.forEach(function(e){e=s(e,[]),e.length&&t.push(n+" {",e,"}")}):(r=s(r,[]),r.length&&t.push(n+" {",r,"}")):("string"===i&&(r='"'+r+'"'),t.push(n+": "+r))}),t},u=function(e,t){return t.push("service "+e.name+" {"),e.options||(e.options={}),o(e.options,t),e.methods||(e.methods=[]),e.methods.forEach(function(e){t.push(a(e,[]))}),t.push("}",""),t},a=function(e,t){var n="rpc "+e.name+"(";e.client_streaming&&(n+="stream "),n+=e.input_type+") returns (",e.server_streaming&&(n+="stream "),n+=e.output_type+")",e.options||(e.options={});var r=o(e.options,[]);return r.length>1?t.push(n+" {",r.slice(0,-1),"}"):t.push(n+";"),t},f=function(e){return function(t){return Array.isArray(t)?t.map(f(e+"  ")).join("\n"):e+t}};t.exports=function(e){var t=[];return t.push('syntax = "proto'+e.syntax+'";',""),e["package"]&&t.push("package "+e["package"]+";",""),e.options||(e.options={}),o(e.options,t),e.enums||(e.enums=[]),e.enums.forEach(function(e){i(e,t)}),e.messages||(e.messages=[]),e.messages.forEach(function(e){r(e,t)}),e.services&&e.services.forEach(function(e){u(e,t)}),t.map(f("")).join("\n")}},{}],158:[function(e,t){t.exports=function(e){var t=function(e){var t=e.indexOf("//");return t>-1?e.slice(0,t):e},n=function(){var e=!1;return function(t){return"/*"===t?(e=!0,!1):"*/"===t?(e=!1,!1):!e}},r=function(e){return e.trim()};return e.replace(/([;,{}\(\)=\:\[\]<>]|\/\*|\*\/)/g," $1 ").split(/\n/).map(r).filter(Boolean).map(t).map(r).filter(Boolean).join("\n").split(/\s+|\n+/gm).filter(n())}},{}],159:[function(e,t){(function(n){var r=e("./encodings"),i=e("varint"),o=e("generate-object-property"),s=e("generate-function"),u=function(e,t,n){switch(e){case 0:return i.decode(t,n),n+i.decode.bytes;case 1:return n+8;case 2:var r=i.decode(t,n);return n+i.decode.bytes+r;case 3:case 4:throw new Error("Groups are not supported");case 5:return n+4}throw new Error("Unknown wire type: "+e)},a=function(e){return null!==e&&void 0!==e&&("number"!=typeof e||!isNaN(e))},f=function(e){try{return!!e&&"string"==typeof JSON.parse(e)}catch(t){return!1}},c=function(e,t){if(e.map)return"{}";if(e.repeated)return"[]";switch(e.type){case"string":return f(t)?t:'""';case"bool":return"true"===t?"true":"false";case"float":case"double":case"sfixed32":case"fixed32":case"varint":case"enum":case"uint64":case"uint32":case"int64":case"int32":case"sint64":case"sint32":return""+Number(t||0);default:return"null"}};t.exports=function(e,t){var f={},l={},h={},d=function(e,t){e.enums&&e.enums.forEach(function(e){e.id=t+(t?".":"")+e.name,l[e.id]=e,d(e,e.id)}),e.messages&&e.messages.forEach(function(n){n.id=t+(t?".":"")+n.name,f[n.id]=n,n.fields.forEach(function(n){if(n.map){var r="Map_"+n.map.from+"_"+n.map.to,i={name:r,enums:[],messages:[],fields:[{name:"key",type:n.map.from,tag:1,repeated:!1,required:!0},{name:"value",type:n.map.to,tag:2,repeated:!1,required:!1}],extensions:null,id:t+(t?".":"")+r};f[i.id]||(f[i.id]=i,e.messages.push(i)),n.type=r,n.repeated=!0}}),d(n,n.id)})};d(e,"");var p=function(e){var t=Object.keys(e.values).map(function(t){return"val !== "+parseInt(e.values[t],10)}).join(" && ");t||(t="true");var n=s()("function encode (val, buf, offset) {")('if (%s) throw new Error("Invalid enum value: "+val)',t)("varint.encode(val, buf, offset)")("encode.bytes = varint.encode.bytes")("return buf")("}").toFunction({varint:i}),o=s()("function decode (buf, offset) {")("var val = varint.decode(buf, offset)")('if (%s) throw new Error("Invalid enum value: "+val)',t)("decode.bytes = varint.decode.bytes")("return val")("}").toFunction({varint:i});return r.make(0,n,o,i.encodingLength)},g=function(e,t){e.messages.forEach(function(n){t[n.name]=b(n.name,e.id)}),e.enums.forEach(function(e){t[e.name]=e.values}),t.type=2,t.message=!0,t.name=e.name;var r={};e.fields.forEach(function(e){e.oneof&&(r[e.oneof]||(r[e.oneof]=[]),r[e.oneof].push(e.name))});var f=e.fields.map(function(t){return b(t.type,e.id)}),l=function(t){for(var n=0;n<f.length;n++)t(f[n],e.fields[n],o("obj",e.fields[n].name),n)},h=s()("function encodingLength (obj) {")("var length = 0");Object.keys(r).forEach(function(e){var t=JSON.stringify("only one of the properties defined in oneof "+e+" can be set"),n=r[e].map(function(e){return"+defined("+o("obj",e)+")"}).join(" + ");h("if ((%s) > 1) throw new Error(%s)",n,t)}),l(function(e,t,n,r){var o=t.repeated&&t.options&&t.options.packed&&"false"!==t.options.packed,s=i.encodingLength(t.tag<<3|e.type);t.required?h("if (!defined(%s)) throw new Error(%s)",n,JSON.stringify(t.name+" is required")):h("if (defined(%s)) {",n),t.map&&(h()("var tmp = Object.keys(%s)",n)("for (var i = 0; i < tmp.length; i++) {")("tmp[i] = {key: tmp[i], value: %s[tmp[i]]}",n)("}"),n="tmp"),o?(h()("var packedLen = 0")("for (var i = 0; i < %s.length; i++) {",n)("if (!defined(%s)) continue",n+"[i]")("var len = enc[%d].encodingLength(%s)",r,n+"[i]")("packedLen += len"),e.message&&h("packedLen += varint.encodingLength(len)"),h("}")("if (packedLen) {")("length += %d + packedLen + varint.encodingLength(packedLen)",s)("}")):(t.repeated&&(h("for (var i = 0; i < %s.length; i++) {",n),n+="[i]",h("if (!defined(%s)) continue",n)),h("var len = enc[%d].encodingLength(%s)",r,n),e.message&&h("length += varint.encodingLength(len)"),h("length += %d + len",s),t.repeated&&h("}")),t.required||h("}")}),h()("return length")("}"),h=h.toFunction({defined:a,varint:i,enc:f});var d=s()("function encode (obj, buf, offset) {")("if (!offset) offset = 0")("if (!buf) buf = new Buffer(encodingLength(obj))")("var oldOffset = offset");Object.keys(r).forEach(function(e){var t=JSON.stringify("only one of the properties defined in oneof "+e+" can be set"),n=r[e].map(function(e){return"+defined("+o("obj",e)+")"}).join(" + ");d("if ((%s) > 1) throw new Error(%s)",n,t)}),l(function(e,t,n,r){t.required?d("if (!defined(%s)) throw new Error(%s)",n,JSON.stringify(t.name+" is required")):d("if (defined(%s)) {",n);var o,s=t.repeated&&t.options&&t.options.packed&&"false"!==t.options.packed,u=i.encode(t.tag<<3|2),a=i.encode(t.tag<<3|e.type);if(t.map&&(d()("var tmp = Object.keys(%s)",n)("for (var i = 0; i < tmp.length; i++) {")("tmp[i] = {key: tmp[i], value: %s[tmp[i]]}",n)("}"),n="tmp"),s){for(d()("var packedLen = 0")("for (var i = 0; i < %s.length; i++) {",n)("if (!defined(%s)) continue",n+"[i]")("packedLen += enc[%d].encodingLength(%s)",r,n+"[i]")("}"),d("if (packedLen) {"),o=0;o<a.length;o++)d("buf[offset++] = %d",u[o]);d("varint.encode(packedLen, buf, offset)"),d("offset += varint.encode.bytes"),d("}")}if(t.repeated&&(d("for (var i = 0; i < %s.length; i++) {",n),n+="[i]",d("if (!defined(%s)) continue",n)),!s)for(o=0;o<a.length;o++)d("buf[offset++] = %d",a[o]);e.message&&(d("varint.encode(enc[%d].encodingLength(%s), buf, offset)",r,n),d("offset += varint.encode.bytes")),d("enc[%d].encode(%s, buf, offset)",r,n),d("offset += enc[%d].encode.bytes",r),t.repeated&&d("}"),t.required||d("}")}),d()("encode.bytes = offset - oldOffset")("return buf")("}"),d=d.toFunction({encodingLength:h,defined:a,varint:i,enc:f,Buffer:n});var p=e.fields.map(function(e,t){return e.required&&"!found"+t}).filter(function(e){return e}).join(" || "),g=s(),y=[];return l(function(t,n){var r=n.options&&n.options["default"],i=b(n.type,e.id,!1),s=i&&i.values;return s?void(n.repeated?y.push(o.property(n.name)+": []"):(r=r&&r in s?s[r]:s[Object.keys(s)[0]],y.push(o.property(n.name)+": "+parseInt(r||0,10)))):void y.push(o.property(n.name)+": "+c(n,r))}),g()("function decode (buf, offset, end) {")("if (!offset) offset = 0")("if (!end) end = buf.length")('if (!(end <= buf.length && offset <= buf.length)) throw new Error("Decoded message is not valid")')("var oldOffset = offset")("var obj = {"),y.forEach(function(e,t){g(e+(t===y.length-1?"":","))}),g("}"),l(function(e,t,n,r){t.required&&g("var found%d = false",r)}),g("while (true) {")("if (end <= offset) {")(p&&'if (%s) throw new Error("Decoded message is not valid")',p)("decode.bytes = offset - oldOffset")("return obj")("}")("var prefix = varint.decode(buf, offset)")("offset += varint.decode.bytes")("var tag = prefix >> 3")("switch (tag) {"),
l(function(t,n,r,i){var s=n.repeated&&n.options&&n.options.packed&&"false"!==n.options.packed;g("case %d:",n.tag),n.oneof&&e.fields.forEach(function(e){e.oneof===n.oneof&&n.name!==e.name&&g("delete %s",o("obj",e.name))}),s&&g()("var packedEnd = varint.decode(buf, offset)")("offset += varint.decode.bytes")("packedEnd += offset")("while (offset < packedEnd) {"),t.message?(g("var len = varint.decode(buf, offset)"),g("offset += varint.decode.bytes"),n.map?(g("var tmp = enc[%d].decode(buf, offset, offset + len)",i),g("%s[tmp.key] = tmp.value",r)):n.repeated?g("%s.push(enc[%d].decode(buf, offset, offset + len))",r,i):g("%s = enc[%d].decode(buf, offset, offset + len)",r,i)):n.repeated?g("%s.push(enc[%d].decode(buf, offset))",r,i):g("%s = enc[%d].decode(buf, offset)",r,i),g("offset += enc[%d].decode.bytes",i),s&&g("}"),n.required&&g("found%d = true",i),g("break")}),g()("default:")("offset = skip(prefix & 7, buf, offset)")("}")("}")("}"),g=g.toFunction({varint:i,skip:u,enc:f}),d.bytes=g.bytes=0,t.buffer=!0,t.encode=d,t.decode=g,t.encodingLength=h,t},b=function(e,n,i){if(t&&t[e])return t[e];if(r[e])return r[e];var o=(n?n+"."+e:e).split(".").map(function(t,n,r){return r.slice(0,n).concat(e).join(".")}).reverse().reduce(function(e,t){return e||f[t]||l[t]},null);if(i===!1)return o;if(!o)throw new Error("Could not resolve "+e);return o.values?p(o):h[o.id]||g(o,h[o.id]={})};return(e.enums||[]).concat((e.messages||[]).map(function(e){return b(e.id)}))}}).call(this,e("buffer").Buffer)},{"./encodings":160,buffer:14,"generate-function":45,"generate-object-property":46,varint:164}],160:[function(e,t,n){(function(t){var r=e("varint"),i=e("signed-varint"),o=function(e,t,n,r){return t.bytes=n.bytes=0,{type:e,encode:t,decode:n,encodingLength:r}};n.make=o,n.bytes=function(){var e=function(e){return t.isBuffer(e)?e.length:t.byteLength(e)},n=function(t){var n=e(t);return r.encodingLength(n)+n},i=function(n,o,s){var u=s,a=e(n);return r.encode(a,o,s),s+=r.encode.bytes,t.isBuffer(n)?n.copy(o,s):o.write(n,s,a),s+=a,i.bytes=s-u,o},s=function(e,t){var n=t,i=r.decode(e,t);t+=r.decode.bytes;var o=e.slice(t,t+i);return t+=o.length,s.bytes=t-n,o};return o(2,i,s,n)}(),n.string=function(){var e=function(e){var n=t.byteLength(e);return r.encodingLength(n)+n},n=function(e,i,o){var s=o,u=t.byteLength(e);return r.encode(u,i,o,"utf-8"),o+=r.encode.bytes,i.write(e,o,u),o+=u,n.bytes=o-s,i},i=function(e,t){var n=t,o=r.decode(e,t);t+=r.decode.bytes;var s=e.toString("utf-8",t,t+o);return t+=o,i.bytes=t-n,s};return o(2,n,i,e)}(),n.bool=function(){var e=function(){return 1},t=function(e,n,r){return n[r]=e?1:0,t.bytes=1,n},n=function(e,t){var r=e[t]>0;return n.bytes=1,r};return o(0,t,n,e)}(),n.int32=function(){var e=function(t,n){var i=r.decode(t,n);return e.bytes=r.decode.bytes,i>2147483647?i-4294967296:i},t=function(e){return r.encodingLength(0>e?e+4294967296:e)};return o(0,r.encode,e,t)}(),n.int64=function(){var e=function(n,i){var o=r.decode(n,i);if(o>=Math.pow(2,63)){for(var s=9;255===n[i+s-1];)s--;s=s||9;var u=new t(s);n.copy(u,0,i,i+s),u[s-1]=127&u[s-1],o=-1*r.decode(u,0),e.bytes=10}else e.bytes=r.decode.bytes;return o},n=function(e,t,i){if(0>e){var o=i+9;for(r.encode(-1*e,t,i),i+=r.encode.bytes-1,t[i]=128|t[i];o-1>i;)i++,t[i]=255;t[o]=1,n.bytes=10}else r.encode(e,t,i),n.bytes=r.encode.bytes;return t},i=function(e){return 0>e?10:r.encodingLength(e)};return o(0,n,e,i)}(),n.sint32=n.sint64=function(){return o(0,i.encode,i.decode,i.encodingLength)}(),n.uint32=n.uint64=n["enum"]=n.varint=function(){return o(0,r.encode,r.decode,r.encodingLength)}(),n.fixed64=n.sfixed64=function(){var e=function(){return 8},t=function(e,n,r){return e.copy(n,r),t.bytes=8,n},n=function(e,t){var r=e.slice(t,t+8);return n.bytes=8,r};return o(1,t,n,e)}(),n["double"]=function(){var e=function(){return 8},t=function(e,n,r){return n.writeDoubleLE(e,r),t.bytes=8,n},n=function(e,t){var r=e.readDoubleLE(t);return n.bytes=8,r};return o(1,t,n,e)}(),n.fixed32=function(){var e=function(){return 4},t=function(e,n,r){return n.writeUInt32LE(e,r),t.bytes=4,n},n=function(e,t){var r=e.readUInt32LE(t);return n.bytes=4,r};return o(5,t,n,e)}(),n.sfixed32=function(){var e=function(){return 4},t=function(e,n,r){return n.writeInt32LE(e,r),t.bytes=4,n},n=function(e,t){var r=e.readInt32LE(t);return n.bytes=4,r};return o(5,t,n,e)}(),n["float"]=function(){var e=function(){return 4},t=function(e,n,r){return n.writeFloatLE(e,r),t.bytes=4,n},n=function(e,t){var r=e.readFloatLE(t);return n.bytes=4,r};return o(5,t,n,e)}()}).call(this,e("buffer").Buffer)},{buffer:14,"signed-varint":199,varint:164}],161:[function(e,t){(function(n){var r=e("protocol-buffers-schema"),i=e("./compile");t.exports=function(e,t){if(t||(t={}),!e)throw new Error("Pass in a .proto string or a protobuf-schema parsed object");var o="object"!=typeof e||n.isBuffer(e)?r.parse(e):e,s=function(){var e=this;i(o,t.encodings||{}).forEach(function(t){e[t.name]=t.values||t})};return s.prototype.toString=function(){return r.stringify(o)},s.prototype.toJSON=function(){return o},new s}}).call(this,{isBuffer:e("../is-buffer/index.js")})},{"../is-buffer/index.js":76,"./compile":159,"protocol-buffers-schema":155}],162:[function(e,t,n){arguments[4][84][0].apply(n,arguments)},{dup:84}],163:[function(e,t,n){arguments[4][85][0].apply(n,arguments)},{dup:85}],164:[function(e,t,n){arguments[4][86][0].apply(n,arguments)},{"./decode.js":162,"./encode.js":163,"./length.js":165,dup:86}],165:[function(e,t,n){arguments[4][87][0].apply(n,arguments)},{dup:87}],166:[function(e,t,n){arguments[4][39][0].apply(n,arguments)},{dup:39}],167:[function(e,t){var n=e("once"),r=e("end-of-stream"),i=e("fs"),o=function(){},s=function(e){return"function"==typeof e},u=function(e){return i?(e instanceof(i.ReadStream||o)||e instanceof(i.WriteStream||o))&&s(e.close):!1},a=function(e){return e.setHeader&&s(e.abort)},f=function(e,t,i,o){o=n(o);var f=!1;e.on("close",function(){f=!0}),r(e,{readable:t,writable:i},function(e){return e?o(e):(f=!0,void o())});var c=!1;return function(t){return f||c?void 0:(c=!0,u(e)?e.close():a(e)?e.abort():s(e.destroy)?e.destroy():void o(t||new Error("stream was destroyed")))}},c=function(e){e()},l=function(e,t){return e.pipe(t)},h=function(){var e=Array.prototype.slice.call(arguments),t=s(e[e.length-1]||o)&&e.pop()||o;if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new Error("pump requires two streams per minimum");var n,r=e.map(function(i,o){var s=o<e.length-1,u=o>0;return f(i,s,u,function(e){n||(n=e),e&&r.forEach(c),s||(r.forEach(c),t(n))})});return e.reduce(l)};t.exports=h},{"end-of-stream":168,fs:10,once:149}],168:[function(e,t){var n=e("once"),r=function(){},i=function(e){return e.setHeader&&"function"==typeof e.abort},o=function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length},s=function(e,t,u){if("function"==typeof t)return s(e,null,t);t||(t={}),u=n(u||r);var a=e._writableState,f=e._readableState,c=t.readable||t.readable!==!1&&e.readable,l=t.writable||t.writable!==!1&&e.writable,h=function(){e.writable||d()},d=function(){l=!1,c||u()},p=function(){c=!1,l||u()},g=function(e){u(e?new Error("exited with error code: "+e):null)},b=function(){return(!c||f&&f.ended)&&(!l||a&&a.ended)?void 0:u(new Error("premature close"))},y=function(){e.req.on("finish",d)};return i(e)?(e.on("complete",d),e.on("abort",b),e.req?y():e.on("request",y)):l&&!a&&(e.on("end",h),e.on("close",h)),o(e)&&e.on("exit",g),e.on("end",p),e.on("finish",d),t.error!==!1&&e.on("error",u),e.on("close",b),function(){e.removeListener("complete",d),e.removeListener("abort",b),e.removeListener("request",y),e.req&&e.req.removeListener("finish",d),e.removeListener("end",h),e.removeListener("close",h),e.removeListener("finish",d),e.removeListener("exit",g),e.removeListener("end",p),e.removeListener("error",u),e.removeListener("close",b)}};t.exports=s},{once:149}],169:[function(e,t){var n=e("pump"),r=e("inherits"),i=e("duplexify"),o=function(e){return e.length?Array.isArray(e[0])?e[0]:Array.prototype.slice.call(e):[]},s=function(e){var t=function(){var n=o(arguments);return this instanceof t?(i.call(this,null,null,e),void(n.length&&this.setPipeline(n))):new t(n)};return r(t,i),t.prototype.setPipeline=function(){var e=o(arguments),t=this,r=!1,i=e[0],s=e[e.length-1];s=s.readable?s:null,i=i.writable?i:null;var u=function(){e[0].emit("error",new Error("stream was destroyed"))};return this.on("close",u),this.on("prefinish",function(){r||t.cork()}),n(e,function(e){return t.removeListener("close",u),e?t.destroy(e):(r=!0,void t.uncork())}),this.destroyed?u():(this.setWritable(i),void this.setReadable(s))},t};t.exports=s({destroy:!1}),t.exports.obj=s({destroy:!1,objectMode:!0,highWaterMark:16})},{duplexify:35,inherits:75,pump:167}],170:[function(e,t){function n(e){if(!(this instanceof n))return new n(e);e||(e={}),r.Duplex.call(this),this._readableState.highWaterMark=16,this._readableState.objectMode=!0,this.destroyed=!1;var t=+e.bits||12,i=+e.min||8192,u=+e.max||32768;this.rabin=o.rabin(),this.rabin.configure(t,i,u),this.nextCb=null,this.buffers=new s,this.pending=[],this.on("finish",this._finish)}var r=e("readable-stream"),i=e("util"),o=e("bindings")("rabin"),s=e("bl"),u=e("debug")("rabin");t.exports=n,i.inherits(n,r.Duplex),n.prototype._finish=function(){this.destroyed||(this.buffers.length&&this.push(this.buffers.slice(0,this.buffers.length)),this.push(null))},n.prototype._writev=function(e,t){if(this.destroyed)return t();for(var n=0;n<e.length;n++)this.buffers.append(e[n].chunk),this.pending.push(e[n].chunk);this._process(t)},n.prototype._read=function(){var e=this.nextCb;e&&(this.nextCb=null,e())},n.prototype._write=function(e,t,n){return this.destroyed?n():(this.buffers.append(e),this.pending.push(e),void this._process(n))},n.prototype._process=function(e){var t=!0,n=[];this.rabin.fingerprint(this.pending,n),this.pending=[],u("chunks",n);for(var r=0;r<n.length;r++){var i=n[r],o=this.buffers.slice(0,i);this.buffers.consume(i),t=this.push(o)}t?e():this.nextCb=e},n.prototype.destroy=function(e){this.destroyed||(this.destroyed=!0,e&&this.emit("error",e),this.emit("close"))}},{bindings:7,bl:9,debug:30,"readable-stream":179,util:222}],171:[function(e,t){(function(e,n,r){"use strict";function i(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}function o(t,i){if(t>65536)throw new Error("requested too many random bytes");var o=new n.Uint8Array(t);t>0&&s.getRandomValues(o);var u=new r(o.buffer);return"function"==typeof i?e.nextTick(function(){i(null,u)}):u}var s=n.crypto||n.msCrypto;t.exports=s&&s.getRandomValues?o:i}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},e("buffer").Buffer)},{_process:154,buffer:14}],172:[function(e,t){t.exports=e("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":173}],173:[function(e,t,n){arguments[4][16][0].apply(n,arguments)},{"./_stream_readable":175,"./_stream_writable":177,"core-util-is":24,dup:16,inherits:75,"process-nextick-args":153}],174:[function(e,t,n){arguments[4][17][0].apply(n,arguments)},{"./_stream_transform":176,"core-util-is":24,dup:17,inherits:75}],175:[function(e,t){(function(n){"use strict";function r(t,n){O=O||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof O&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var r=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(I||(I=e("string_decoder/").StringDecoder),this.decoder=new I(t.encoding),this.encoding=t.encoding)}function i(t){return O=O||e("./_stream_duplex"),this instanceof i?(this._readableState=new r(t,this),this.readable=!0,t&&"function"==typeof t.read&&(this._read=t.read),void j.call(this)):new i(t)}function o(e,t,n,r,i){var o=f(t,n);if(o)e.emit("error",o);else if(null===n)t.reading=!1,c(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var u=new Error("stream.push() after EOF");e.emit("error",u)}else if(t.endEmitted&&i){var u=new Error("stream.unshift() after end event");e.emit("error",u)}else{var a;!t.decoder||i||r||(n=t.decoder.write(n),a=!t.objectMode&&0===n.length),i||(t.reading=!1),a||(t.flowing&&0===t.length&&!t.sync?(e.emit("data",n),e.read(0)):(t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&l(e))),d(e,t)}else i||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function u(e){return e>=L?e=L:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function a(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=u(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function f(e,t){var n=null;return A.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function c(e,t){if(!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,l(e)}}function l(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(T("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?S(h,e):h(e))}function h(e){T("emit readable"),e.emit("readable"),_(e)}function d(e,t){t.readingMore||(t.readingMore=!0,S(p,e,t))}function p(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(T("maybeReadMore read 0"),e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function g(e){return function(){var t=e._readableState;T("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&R(e,"data")&&(t.flowing=!0,_(e))}}function b(e){T("readable nexttick read 0"),e.read(0)}function y(e,t){t.resumeScheduled||(t.resumeScheduled=!0,S(v,e,t))}function v(e,t){t.reading||(T("resume read 0"),e.read(0)),t.resumeScheduled=!1,e.emit("resume"),_(e),t.flowing&&!t.reading&&e.read(0)}function _(e){var t=e._readableState;if(T("flow",t.flowing),t.flowing)do var n=e.read();while(null!==n&&t.flowing)}function m(e,t){var n,r=t.buffer,i=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(s)n=r.shift();else if(!e||e>=i)n=o?r.join(""):1===r.length?r[0]:A.concat(r,i),r.length=0;else if(e<r[0].length){var u=r[0];n=u.slice(0,e),r[0]=u.slice(e)}else if(e===r[0].length)n=r.shift();else{n=o?"":new A(e);for(var a=0,f=0,c=r.length;c>f&&e>a;f++){var u=r[0],l=Math.min(e-a,u.length);o?n+=u.slice(0,l):u.copy(n,a,0,l),l<u.length?r[0]=u.slice(l):r.shift(),a+=l}}return n}function w(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");t.endEmitted||(t.ended=!0,S(k,t,e))}function k(e,t){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function E(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function x(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}t.exports=i;var S=e("process-nextick-args"),B=e("isarray"),A=e("buffer").Buffer;i.ReadableState=r;var j,R=(e("events"),function(e,t){return e.listeners(t).length});!function(){try{j=e("stream")}catch(t){}finally{j||(j=e("events").EventEmitter)}}();var A=e("buffer").Buffer,M=e("core-util-is");M.inherits=e("inherits");var C=e("util"),T=void 0;T=C&&C.debuglog?C.debuglog("stream"):function(){};var I;M.inherits(i,j);var O,O;i.prototype.push=function(e,t){var n=this._readableState;return n.objectMode||"string"!=typeof e||(t=t||n.defaultEncoding,t!==n.encoding&&(e=new A(e,t),t="")),o(this,n,e,t,!1)},i.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},i.prototype.isPaused=function(){return this._readableState.flowing===!1},i.prototype.setEncoding=function(t){return I||(I=e("string_decoder/").StringDecoder),this._readableState.decoder=new I(t),this._readableState.encoding=t,this};var L=8388608;i.prototype.read=function(e){T("read",e);var t=this._readableState,n=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return T("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?w(this):l(this),null;if(e=a(e,t),0===e&&t.ended)return 0===t.length&&w(this),null;var r=t.needReadable;T("need readable",r),(0===t.length||t.length-e<t.highWaterMark)&&(r=!0,T("length less than watermark",r)),(t.ended||t.reading)&&(r=!1,T("reading or ended",r)),r&&(T("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),r&&!t.reading&&(e=a(n,t));var i;return i=e>0?m(e,t):null,null===i&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),n!==e&&t.ended&&0===t.length&&w(this),null!==i&&this.emit("data",i),i},i.prototype._read=function(){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function r(e){T("onunpipe"),e===l&&o()}function i(){T("onend"),e.end()}function o(){T("cleanup"),e.removeListener("close",a),e.removeListener("finish",f),e.removeListener("drain",b),e.removeListener("error",u),e.removeListener("unpipe",r),l.removeListener("end",i),l.removeListener("end",o),l.removeListener("data",s),y=!0,!h.awaitDrain||e._writableState&&!e._writableState.needDrain||b()}function s(t){T("ondata");var n=e.write(t);!1===n&&(1!==h.pipesCount||h.pipes[0]!==e||1!==l.listenerCount("data")||y||(T("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++),l.pause())}function u(t){T("onerror",t),c(),e.removeListener("error",u),0===R(e,"error")&&e.emit("error",t)}function a(){e.removeListener("finish",f),c()}function f(){T("onfinish"),e.removeListener("close",a),c()}function c(){T("unpipe"),l.unpipe(e)}var l=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=e;break;case 1:h.pipes=[h.pipes,e];break;default:h.pipes.push(e)}h.pipesCount+=1,T("pipe count=%d opts=%j",h.pipesCount,t);var d=(!t||t.end!==!1)&&e!==n.stdout&&e!==n.stderr,p=d?i:o;h.endEmitted?S(p):l.once("end",p),e.on("unpipe",r);var b=g(l);e.on("drain",b);var y=!1;return l.on("data",s),e._events&&e._events.error?B(e._events.error)?e._events.error.unshift(u):e._events.error=[u,e._events.error]:e.on("error",u),e.once("close",a),e.once("finish",f),e.emit("pipe",l),h.flowing||(T("pipe resume"),l.resume()),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var o=x(t.pipes,e);return-1===o?this:(t.pipes.splice(o,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var n=j.prototype.on.call(this,e,t);if("data"===e&&!1!==this._readableState.flowing&&this.resume(),"readable"===e&&!this._readableState.endEmitted){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&l(this,r):S(b,this))}return n},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var e=this._readableState;return e.flowing||(T("resume"),e.flowing=!0,y(this,e)),this},i.prototype.pause=function(){return T("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(T("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(T("wrapped end"),t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(T("wrapped data"),t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var o=r.push(i);o||(n=!0,e.pause())}});for(var i in e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return E(o,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(t){T("wrapped _read",t),n&&(n=!1,e.resume())},r},i._fromList=m}).call(this,e("_process"))},{"./_stream_duplex":173,_process:154,buffer:14,"core-util-is":24,events:41,inherits:75,isarray:79,"process-nextick-args":153,"string_decoder/":210,util:10}],176:[function(e,t){"use strict";function n(e){this.afterTransform=function(t,n){return r(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function r(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);s.call(this,e),this._transformState=new n(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.once("prefinish",function(){"function"==typeof this._flush?this._flush(function(e){o(t,e)}):o(t)})}function o(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=e._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=i;var s=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(i,s),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},i.prototype._transform=function(){throw new Error("not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":173,"core-util-is":24,inherits:75}],177:[function(e,t){(function(n){"use strict";function r(){}function i(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function o(t,n){R=R||e("./_stream_duplex"),t=t||{},this.objectMode=!!t.objectMode,n instanceof R&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var r=t.highWaterMark,i=this.objectMode?16:16384;this.highWaterMark=r||0===r?r:i,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var o=t.decodeStrings===!1;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){p(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new k(this),this.corkedRequestsFree.next=new k(this)}function s(t){return R=R||e("./_stream_duplex"),this instanceof s||this instanceof R?(this._writableState=new o(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev)),void A.call(this)):new s(t)}function u(e,t){var n=new Error("write after end");e.emit("error",n),E(t,n)}function a(e,t,n,r){var i=!0;if(!S.isBuffer(n)&&"string"!=typeof n&&null!==n&&void 0!==n&&!t.objectMode){var o=new TypeError("Invalid non-string/buffer chunk");e.emit("error",o),E(r,o),i=!1}return i}function f(e,t,n){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new S(t,n)),t}function c(e,t,n,r,o){n=f(t,n,r),S.isBuffer(n)&&(r="buffer");var s=t.objectMode?1:n.length;t.length+=s;var u=t.length<t.highWaterMark;if(u||(t.needDrain=!0),t.writing||t.corked){var a=t.lastBufferedRequest;t.lastBufferedRequest=new i(n,r,o),a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else l(e,t,!1,s,n,r,o);return u}function l(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function h(e,t,n,r,i){--t.pendingcb,n?E(i,r):i(r),e._writableState.errorEmitted=!0,e.emit("error",r)}function d(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function p(e,t){var n=e._writableState,r=n.sync,i=n.writecb;if(d(n),t)h(e,n,r,t,i);else{var o=v(n);o||n.corked||n.bufferProcessing||!n.bufferedRequest||y(e,n),r?x(g,e,n,o,i):g(e,n,o,i)}}function g(e,t,n,r){n||b(e,t),t.pendingcb--,r(),m(e,t)}function b(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function y(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,i=new Array(r),o=t.corkedRequestsFree;o.entry=n;for(var s=0;n;)i[s]=n,n=n.next,s+=1;l(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,t.corkedRequestsFree=o.next,o.next=null}else{for(;n;){var u=n.chunk,a=n.encoding,f=n.callback,c=t.objectMode?1:u.length;if(l(e,t,!1,c,u,a,f),n=n.next,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=n,t.bufferProcessing=!1}function v(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function _(e,t){t.prefinished||(t.prefinished=!0,e.emit("prefinish"))}function m(e,t){var n=v(t);return n&&(0===t.pendingcb?(_(e,t),t.finished=!0,e.emit("finish")):_(e,t)),n}function w(e,t,n){t.ending=!0,m(e,t),n&&(t.finished?E(n):e.once("finish",n)),t.ended=!0,e.writable=!1}function k(e){var t=this;this.next=null,this.entry=null,this.finish=function(n){var r=t.entry;for(t.entry=null;r;){var i=r.callback;e.pendingcb--,i(n),r=r.next}e.corkedRequestsFree?e.corkedRequestsFree.next=t:e.corkedRequestsFree=t}}t.exports=s;var E=e("process-nextick-args"),x=!n.browser&&["v0.10","v0.9."].indexOf(n.version.slice(0,5))>-1?setImmediate:E,S=e("buffer").Buffer;s.WritableState=o;var B=e("core-util-is");B.inherits=e("inherits");var A,j={deprecate:e("util-deprecate")};!function(){try{A=e("stream")}catch(t){}finally{A||(A=e("events").EventEmitter)}}();var S=e("buffer").Buffer;B.inherits(s,A);var R;o.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(o.prototype,"buffer",{get:j.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.")})}catch(e){}}();var R;s.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},s.prototype.write=function(e,t,n){var i=this._writableState,o=!1;return"function"==typeof t&&(n=t,t=null),S.isBuffer(e)?t="buffer":t||(t=i.defaultEncoding),"function"!=typeof n&&(n=r),i.ended?u(this,n):a(this,i,e,n)&&(i.pendingcb++,o=c(this,i,e,t,n)),o},s.prototype.cork=function(){var e=this._writableState;e.corked++},s.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.finished||e.bufferProcessing||!e.bufferedRequest||y(this,e))},s.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+e);this._writableState.defaultEncoding=e},s.prototype._write=function(e,t,n){n(new Error("not implemented"))},s.prototype._writev=null,s.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!==e&&void 0!==e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||w(this,r,n)}}).call(this,e("_process"))},{"./_stream_duplex":173,_process:154,buffer:14,"core-util-is":24,events:41,inherits:75,"process-nextick-args":153,"util-deprecate":219}],178:[function(e,t){t.exports=e("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":174}],179:[function(e,t,n){var r=function(){try{return e("stream")}catch(t){}}();n=t.exports=e("./lib/_stream_readable.js"),n.Stream=r||n,n.Readable=n,n.Writable=e("./lib/_stream_writable.js"),n.Duplex=e("./lib/_stream_duplex.js"),n.Transform=e("./lib/_stream_transform.js"),n.PassThrough=e("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":173,"./lib/_stream_passthrough.js":174,"./lib/_stream_readable.js":175,"./lib/_stream_transform.js":176,"./lib/_stream_writable.js":177}],180:[function(e,t){t.exports=e("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":176}],181:[function(e,t){t.exports=e("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":177}],182:[function(e,t){(function(e){function n(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t}function r(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t}function i(e,t,n){for(var r=0;16>r;r++){var i=n+r,l=t[i];t[i]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var v,_,m,w,k,E,x,S,B,A;E=v=e[0],x=_=e[1],S=m=e[2],B=w=e[3],A=k=e[4];var j;for(r=0;80>r;r+=1)j=v+t[n+h[r]]|0,j+=16>r?o(_,m,w)+b[0]:32>r?s(_,m,w)+b[1]:48>r?u(_,m,w)+b[2]:64>r?a(_,m,w)+b[3]:f(_,m,w)+b[4],j=0|j,j=c(j,p[r]),j=j+k|0,v=k,k=w,w=c(m,10),m=_,_=j,j=E+t[n+d[r]]|0,j+=16>r?f(x,S,B)+y[0]:32>r?a(x,S,B)+y[1]:48>r?u(x,S,B)+y[2]:64>r?s(x,S,B)+y[3]:o(x,S,B)+y[4],j=0|j,j=c(j,g[r]),j=j+A|0,E=A,A=B,B=c(S,10),S=x,x=j;j=e[1]+m+B|0,e[1]=e[2]+w+A|0,e[2]=e[3]+k+E|0,e[3]=e[4]+v+x|0,e[4]=e[0]+_+S|0,e[0]=j}function o(e,t,n){return e^t^n}function s(e,t,n){return e&t|~e&n}function u(e,t,n){return(e|~t)^n}function a(e,t,n){return e&n|t&~n}function f(e,t,n){return e^(t|~n)}function c(e,t){return e<<t|e>>>32-t}function l(t){var o=[1732584193,4023233417,2562383102,271733878,3285377520];"string"==typeof t&&(t=new e(t,"utf8"));var s=n(t),u=8*t.length,a=8*t.length;s[u>>>5]|=128<<24-u%32,s[(u+64>>>9<<4)+14]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);for(var f=0;f<s.length;f+=16)i(o,s,f);for(f=0;5>f;f++){var c=o[f];o[f]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var l=r(o);return new e(l)}var h=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],d=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],p=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],g=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],b=[0,1518500249,1859775393,2400959708,2840853838],y=[1352829926,1548603684,1836072691,2053994217,0];t.exports=l}).call(this,e("buffer").Buffer)},{buffer:14}],183:[function(e,t,n){var n=t.exports=function(e){e=e.toUpperCase();var t=n[e];if(!t)throw new Error(e+" is not supported (we accept pull requests)");return new t};n.SHA=e("./lib/sha"),n.SHA1=e("./lib/sha1"),n.SHA224=e("./lib/sha224"),n.SHA256=e("./lib/sha256"),n.SHA384=e("./lib/sha384"),n.SHA512=e("./lib/sha512")},{"./lib/sha":185,"./lib/sha1":186,
"./lib/sha224":187,"./lib/sha256":188,"./lib/sha384":189,"./lib/sha512":190}],184:[function(e,t,n){"use strict";n.block64=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32BE(this._length[1],56),this._block.writeUInt32BE(this._length[0],60),this._update()},n.block128=function(){this._block[this._blockOffset++]=128,this._blockOffset>112&&(this._block.fill(0,this._blockOffset,128),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,112),this._block.writeUInt32BE(this._length[3],112),this._block.writeUInt32BE(this._length[2],116),this._block.writeUInt32BE(this._length[1],120),this._block.writeUInt32BE(this._length[0],124),this._update()}},{}],185:[function(e,t){(function(n){"use strict";function r(){c.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function i(e){return e<<5|e>>>27}function o(e){return e<<30|e>>>2}function s(e,t,n){return e&t|~e&n}function u(e,t,n){return e^t^n}function a(e,t,n){return e&t|e&n|t&n}var f=e("inherits"),c=e("hash-base"),l=e("./padding"),h=new Array(80),d=[1518500249,1859775393,2400959708,3395469782];f(r,c),r.prototype._expandMessage=function(e){for(var t=0;16>t;++t)e[t]=this._block.readInt32BE(4*t);for(;80>t;++t)e[t]=e[t-3]^e[t-8]^e[t-14]^e[t-16]},r.prototype._update=function(){this._expandMessage(h);for(var e=0|this._a,t=0|this._b,n=0|this._c,r=0|this._d,f=0|this._e,c=0;80>c;++c){var l;l=20>c?f+s(t,n,r)+i(e)+h[c]+d[0]|0:40>c?f+u(t,n,r)+i(e)+h[c]+d[1]|0:60>c?f+a(t,n,r)+i(e)+h[c]+d[2]|0:f+u(t,n,r)+i(e)+h[c]+d[3]|0,f=r,r=n,n=o(t),t=e,e=l}this._a=e+this._a|0,this._b=t+this._b|0,this._c=n+this._c|0,this._d=r+this._d|0,this._e=f+this._e|0},r.prototype._digest=function(){l.block64.call(this);var e=new n(20);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e},t.exports=r}).call(this,e("buffer").Buffer)},{"./padding":184,buffer:14,"hash-base":49,inherits:75}],186:[function(e,t){"use strict";function n(){s.call(this)}function r(e){return e<<1|e>>>31}var i=e("inherits"),o=e("hash-base"),s=e("./sha");i(n,o),n.prototype._expandMessage=function(e){for(var t=0;16>t;++t)e[t]=this._block.readInt32BE(4*t);for(;80>t;++t)e[t]=r(e[t-3]^e[t-8]^e[t-14]^e[t-16])},n.prototype._update=s.prototype._update,n.prototype._digest=s.prototype._digest,t.exports=n},{"./sha":185,"hash-base":49,inherits:75}],187:[function(e,t){(function(n){"use strict";function r(){o.call(this,64),this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428}var i=e("inherits"),o=e("hash-base"),s=e("./sha256"),u=e("./padding");i(r,o),r.prototype._update=s.prototype._update,r.prototype._digest=function(){u.block64.call(this);var e=new n(28);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e},t.exports=r}).call(this,e("buffer").Buffer)},{"./padding":184,"./sha256":188,buffer:14,"hash-base":49,inherits:75}],188:[function(e,t){(function(n){"use strict";function r(){l.call(this,64),this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225}function i(e){return(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3}function o(e){return(e>>>17|e<<15)^(e>>>19|e<<13)^e>>>10}function s(e,t,n){return n^e&(t^n)}function u(e,t,n){return e&t|n&(e|t)}function a(e){return(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10)}function f(e){return(e>>>6|e<<26)^(e>>>11|e<<21)^(e>>>25|e<<7)}var c=e("inherits"),l=e("hash-base"),h=e("./padding"),d=new Array(64),p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];c(r,l),r.prototype._update=function(){for(var e=0;16>e;++e)d[e]=this._block.readInt32BE(4*e);for(;64>e;++e)d[e]=o(d[e-2])+d[e-7]+i(d[e-15])+d[e-16]|0;for(var t=0|this._a,n=0|this._b,r=0|this._c,c=0|this._d,l=0|this._e,h=0|this._f,g=0|this._g,b=0|this._h,y=0;64>y;++y){var v=b+f(l)+s(l,h,g)+p[y]+d[y]|0,_=a(t)+u(t,n,r)|0;b=g,g=h,h=l,l=c+v|0,c=r,r=n,n=t,t=v+_|0}this._a=t+this._a|0,this._b=n+this._b|0,this._c=r+this._c|0,this._d=c+this._d|0,this._e=l+this._e|0,this._f=h+this._f|0,this._g=g+this._g|0,this._h=b+this._h|0},r.prototype._digest=function(){h.block64.call(this);var e=new n(32);return e.writeInt32BE(this._a,0),e.writeInt32BE(this._b,4),e.writeInt32BE(this._c,8),e.writeInt32BE(this._d,12),e.writeInt32BE(this._e,16),e.writeInt32BE(this._f,20),e.writeInt32BE(this._g,24),e.writeInt32BE(this._h,28),e},t.exports=r}).call(this,e("buffer").Buffer)},{"./padding":184,buffer:14,"hash-base":49,inherits:75}],189:[function(e,t){(function(n){"use strict";function r(){o.call(this,128),this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428}var i=e("inherits"),o=e("hash-base"),s=e("./sha512"),u=e("./padding");i(r,o),r.prototype._update=s.prototype._update,r.prototype._digest=function(){u.block128.call(this);var e=new n(48);return e.writeInt32BE(this._ah,0),e.writeInt32BE(this._al,4),e.writeInt32BE(this._bh,8),e.writeInt32BE(this._bl,12),e.writeInt32BE(this._ch,16),e.writeInt32BE(this._cl,20),e.writeInt32BE(this._dh,24),e.writeInt32BE(this._dl,28),e.writeInt32BE(this._eh,32),e.writeInt32BE(this._el,36),e.writeInt32BE(this._fh,40),e.writeInt32BE(this._fl,44),e},t.exports=r}).call(this,e("buffer").Buffer)},{"./padding":184,"./sha512":190,buffer:14,"hash-base":49,inherits:75}],190:[function(e,t){(function(n){"use strict";function r(){p.call(this,128),this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209}function i(e,t,n){return n^e&(t^n)}function o(e,t,n){return e&t|n&(e|t)}function s(e,t){return(e>>>28|t<<4)^(t>>>2|e<<30)^(t>>>7|e<<25)}function u(e,t){return(e>>>14|t<<18)^(e>>>18|t<<14)^(t>>>9|e<<23)}function a(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^e>>>7}function f(e,t){return(e>>>1|t<<31)^(e>>>8|t<<24)^(e>>>7|t<<25)}function c(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^e>>>6}function l(e,t){return(e>>>19|t<<13)^(t>>>29|e<<3)^(e>>>6|t<<26)}function h(e,t){return t>>>0>e>>>0?1:0}var d=e("inherits"),p=e("hash-base"),g=e("./padding"),b=new Array(160),y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];d(r,p),r.prototype._update=function(){for(var e=0;32>e;e+=2)b[e]=this._block.readInt32BE(4*e),b[e+1]=this._block.readInt32BE(4*e+4);for(;160>e;e+=2){var t=b[e-30],n=b[e-30+1],r=a(t,n),d=f(n,t);t=b[e-4],n=b[e-4+1];var p=c(t,n),g=l(n,t),v=b[e-14],_=b[e-14+1],m=b[e-32],w=b[e-32+1],k=d+_|0,E=r+v+h(k,d)|0;k=k+g|0,E=E+p+h(k,g)|0,k=k+w|0,E=E+m+h(k,w)|0,b[e]=E,b[e+1]=k}for(var x=0|this._al,S=0|this._bl,B=0|this._cl,A=0|this._dl,j=0|this._el,R=0|this._fl,M=0|this._gl,C=0|this._hl,T=0|this._ah,I=0|this._bh,O=0|this._ch,L=0|this._dh,D=0|this._eh,N=0|this._fh,U=0|this._gh,P=0|this._hh,q=0;160>q;q+=2){E=b[q],k=b[q+1];var W=o(T,I,O),z=o(x,S,B),K=s(T,x),F=s(x,T),Y=u(D,j),H=u(j,D),V=y[q],G=y[q+1],Z=i(D,N,U),X=i(j,R,M),J=C+H|0,Q=P+Y+h(J,C)|0;J=J+X|0,Q=Q+Z+h(J,X)|0,J=J+G|0,Q=Q+V+h(J,G)|0,J=J+k|0,Q=Q+E+h(J,k)|0;var $=F+z|0,ee=K+W+h($,F)|0;P=U,C=M,U=N,M=R,N=D,R=j,j=A+J|0,D=L+Q+h(j,A)|0,L=O,A=B,O=I,B=S,I=T,S=x,x=J+$|0,T=Q+ee+h(x,J)|0}this._al=this._al+x|0,this._bl=this._bl+S|0,this._cl=this._cl+B|0,this._dl=this._dl+A|0,this._el=this._el+j|0,this._fl=this._fl+R|0,this._gl=this._gl+M|0,this._hl=this._hl+C|0,this._ah=this._ah+T+h(this._al,x)|0,this._bh=this._bh+I+h(this._bl,S)|0,this._ch=this._ch+O+h(this._cl,B)|0,this._dh=this._dh+L+h(this._dl,A)|0,this._eh=this._eh+D+h(this._el,j)|0,this._fh=this._fh+N+h(this._fl,R)|0,this._gh=this._gh+U+h(this._gl,M)|0,this._hh=this._hh+P+h(this._hl,C)|0},r.prototype._digest=function(){g.block128.call(this);var e=new n(64);return e.writeInt32BE(this._ah,0),e.writeInt32BE(this._al,4),e.writeInt32BE(this._bh,8),e.writeInt32BE(this._bl,12),e.writeInt32BE(this._ch,16),e.writeInt32BE(this._cl,20),e.writeInt32BE(this._dh,24),e.writeInt32BE(this._dl,28),e.writeInt32BE(this._eh,32),e.writeInt32BE(this._el,36),e.writeInt32BE(this._fh,40),e.writeInt32BE(this._fl,44),e.writeInt32BE(this._gh,48),e.writeInt32BE(this._gl,52),e.writeInt32BE(this._hh,56),e.writeInt32BE(this._hl,60),e},t.exports=r}).call(this,e("buffer").Buffer)},{"./padding":184,buffer:14,"hash-base":49,inherits:75}],191:[function(e,t){(function(n){function r(e,t){if(!(this instanceof r))return new r(e,t);if(!e)throw new Error("app name required");if(!t||!t.length)throw new Error("signalhub url(s) required");s.EventEmitter.call(this),this.setMaxListeners(0),this.app=e,Array.isArray(t)||(t=[t]),this.urls=t.map(function(e){return e=e.replace(/\/$/,""),-1===e.indexOf("://")?"http://"+e:e}),this.subscribers=[],this.closed=!1}function i(e,t,n,r,i){return a({method:"POST",json:r,url:t+"/v1/"+e+"/"+n},function(e,t){return e?i(e):200!==t.statusCode?i(new Error("Bad status: "+t.statusCode)):void i()})}function o(){}var s=e("events"),u=e("event-source-stream"),a=e("nets"),f=e("pump"),c=e("through2"),l=e("inherits");t.exports=r,l(r,s.EventEmitter),r.prototype.subscribe=function(e){if(this.closed)throw new Error("Cannot subscribe after close");var t,n=this,r=Array.isArray(e)?e.join(","):e,i=this.urls.map(function(e){return u(e+"/v1/"+n.app+"/"+r,{json:!0})});return 1===i.length?t=i[0]:(t=c.obj(),t.setMaxListeners(0),i.forEach(function(e){e.on("open",function(){t.emit("open")}),f(e,t)})),this.subscribers.push(t),t.once("close",function(){var e=n.subscribers.indexOf(t);e>-1&&n.subscribers.splice(e,1)}),t},r.prototype.broadcast=function(e,t,n){if(this.closed)throw new Error("Cannot broadcast after close");t||(t={}),n||(n=o);var r=this.urls.length,s=0,u=this;this.urls.forEach(function(o){i(u.app,o,e,t,function(e){return e&&s++,--r?void 0:s===u.urls.length?n(e):void n()})})},r.prototype.close=function(e){if(!this.closed){this.closed=!0,e&&this.once("close",e);var t=this.subscribers.length;if(t>0){var r=this,i=0;this.subscribers.forEach(function(e){e.once("close",function(){++i===t&&r.emit("close")}),n.nextTick(function(){e.destroy()})})}else this.emit("close")}}}).call(this,e("_process"))},{_process:154,"event-source-stream":40,events:41,inherits:75,nets:148,pump:167,through2:198}],192:[function(e,t,n){arguments[4][92][0].apply(n,arguments)},{dup:92}],193:[function(e,t,n){arguments[4][93][0].apply(n,arguments)},{"./_stream_readable":194,"./_stream_writable":196,_process:154,"core-util-is":24,dup:93,inherits:75}],194:[function(e,t){(function(n){function r(t){t=t||{};var n=t.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=!1,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.calledRead=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!t.objectMode,this.defaultEncoding=t.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(j||(j=e("string_decoder/").StringDecoder),this.decoder=new j(t.encoding),this.encoding=t.encoding)}function i(e){return this instanceof i?(this._readableState=new r(e,this),this.readable=!0,void B.call(this)):new i(e)}function o(e,t,n,r,i){var o=f(t,n);if(o)e.emit("error",o);else if(null===n||void 0===n)t.reading=!1,t.ended||c(e,t);else if(t.objectMode||n&&n.length>0)if(t.ended&&!i){var u=new Error("stream.push() after EOF");e.emit("error",u)}else if(t.endEmitted&&i){var u=new Error("stream.unshift() after end event");e.emit("error",u)}else!t.decoder||i||r||(n=t.decoder.write(n)),t.length+=t.objectMode?1:n.length,i?t.buffer.unshift(n):(t.reading=!1,t.buffer.push(n)),t.needReadable&&l(e),d(e,t);else i||(t.reading=!1);return s(t)}function s(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||0===e.length)}function u(e){if(e>=R)e=R;else{e--;for(var t=1;32>t;t<<=1)e|=e>>t;e++}return e}function a(e,t){return 0===t.length&&t.ended?0:t.objectMode?0===e?0:1:null===e||isNaN(e)?t.flowing&&t.buffer.length?t.buffer[0].length:t.length:0>=e?0:(e>t.highWaterMark&&(t.highWaterMark=u(e)),e>t.length?t.ended?t.length:(t.needReadable=!0,0):e)}function f(e,t){var n=null;return x.isBuffer(t)||"string"==typeof t||null===t||void 0===t||e.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function c(e,t){if(t.decoder&&!t.ended){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.length>0?l(e):m(e)}function l(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,t.sync?n.nextTick(function(){h(e)}):h(e))}function h(e){e.emit("readable")}function d(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(function(){p(e,t)}))}function p(e,t){for(var n=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(e.read(0),n!==t.length);)n=t.length;t.readingMore=!1}function g(e){return function(){var t=e._readableState;t.awaitDrain--,0===t.awaitDrain&&b(e)}}function b(e){function t(e){var t=e.write(n);!1===t&&r.awaitDrain++}var n,r=e._readableState;for(r.awaitDrain=0;r.pipesCount&&null!==(n=e.read());)if(1===r.pipesCount?t(r.pipes,0,null):w(r.pipes,t),e.emit("data",n),r.awaitDrain>0)return;return 0===r.pipesCount?(r.flowing=!1,void(S.listenerCount(e,"data")>0&&v(e))):void(r.ranOut=!0)}function y(){this._readableState.ranOut&&(this._readableState.ranOut=!1,b(this))}function v(e,t){var r=e._readableState;if(r.flowing)throw new Error("Cannot switch to old mode now.");var i=t||!1,o=!1;e.readable=!0,e.pipe=B.prototype.pipe,e.on=e.addListener=B.prototype.on,e.on("readable",function(){o=!0;for(var t;!i&&null!==(t=e.read());)e.emit("data",t);null===t&&(o=!1,e._readableState.needReadable=!0)}),e.pause=function(){i=!0,this.emit("pause")},e.resume=function(){i=!1,o?n.nextTick(function(){e.emit("readable")}):this.read(0),this.emit("resume")},e.emit("readable")}function _(e,t){var n,r=t.buffer,i=t.length,o=!!t.decoder,s=!!t.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(s)n=r.shift();else if(!e||e>=i)n=o?r.join(""):x.concat(r,i),r.length=0;else if(e<r[0].length){var u=r[0];n=u.slice(0,e),r[0]=u.slice(e)}else if(e===r[0].length)n=r.shift();else{n=o?"":new x(e);for(var a=0,f=0,c=r.length;c>f&&e>a;f++){var u=r[0],l=Math.min(e-a,u.length);o?n+=u.slice(0,l):u.copy(n,a,0,l),l<u.length?r[0]=u.slice(l):r.shift(),a+=l}}return n}function m(e){var t=e._readableState;if(t.length>0)throw new Error("endReadable called on non-empty stream");!t.endEmitted&&t.calledRead&&(t.ended=!0,n.nextTick(function(){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}))}function w(e,t){for(var n=0,r=e.length;r>n;n++)t(e[n],n)}function k(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1}t.exports=i;var E=e("isarray"),x=e("buffer").Buffer;i.ReadableState=r;var S=e("events").EventEmitter;S.listenerCount||(S.listenerCount=function(e,t){return e.listeners(t).length});var B=e("stream"),A=e("core-util-is");A.inherits=e("inherits");var j;A.inherits(i,B),i.prototype.push=function(e,t){var n=this._readableState;return"string"!=typeof e||n.objectMode||(t=t||n.defaultEncoding,t!==n.encoding&&(e=new x(e,t),t="")),o(this,n,e,t,!1)},i.prototype.unshift=function(e){var t=this._readableState;return o(this,t,e,"",!0)},i.prototype.setEncoding=function(t){j||(j=e("string_decoder/").StringDecoder),this._readableState.decoder=new j(t),this._readableState.encoding=t};var R=8388608;i.prototype.read=function(e){var t=this._readableState;t.calledRead=!0;var n,r=e;if(("number"!=typeof e||e>0)&&(t.emittedReadable=!1),0===e&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return l(this),null;if(e=a(e,t),0===e&&t.ended)return n=null,t.length>0&&t.decoder&&(n=_(e,t),t.length-=n.length),0===t.length&&m(this),n;var i=t.needReadable;return t.length-e<=t.highWaterMark&&(i=!0),(t.ended||t.reading)&&(i=!1),i&&(t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1),i&&!t.reading&&(e=a(r,t)),n=e>0?_(e,t):null,null===n&&(t.needReadable=!0,e=0),t.length-=e,0!==t.length||t.ended||(t.needReadable=!0),t.ended&&!t.endEmitted&&0===t.length&&m(this),n},i.prototype._read=function(){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(e,t){function r(e){e===c&&o()}function i(){e.end()}function o(){e.removeListener("close",u),e.removeListener("finish",a),e.removeListener("drain",p),e.removeListener("error",s),e.removeListener("unpipe",r),c.removeListener("end",i),c.removeListener("end",o),(!e._writableState||e._writableState.needDrain)&&p()}function s(t){f(),e.removeListener("error",s),0===S.listenerCount(e,"error")&&e.emit("error",t)}function u(){e.removeListener("finish",a),f()}function a(){e.removeListener("close",u),f()}function f(){c.unpipe(e)}var c=this,l=this._readableState;switch(l.pipesCount){case 0:l.pipes=e;break;case 1:l.pipes=[l.pipes,e];break;default:l.pipes.push(e)}l.pipesCount+=1;var h=(!t||t.end!==!1)&&e!==n.stdout&&e!==n.stderr,d=h?i:o;l.endEmitted?n.nextTick(d):c.once("end",d),e.on("unpipe",r);var p=g(c);return e.on("drain",p),e._events&&e._events.error?E(e._events.error)?e._events.error.unshift(s):e._events.error=[s,e._events.error]:e.on("error",s),e.once("close",u),e.once("finish",a),e.emit("pipe",c),l.flowing||(this.on("readable",y),l.flowing=!0,n.nextTick(function(){b(c)})),e},i.prototype.unpipe=function(e){var t=this._readableState;if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,this.removeListener("readable",y),t.flowing=!1,e&&e.emit("unpipe",this),this);if(!e){var n=t.pipes,r=t.pipesCount;t.pipes=null,t.pipesCount=0,this.removeListener("readable",y),t.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var i=k(t.pipes,e);return-1===i?this:(t.pipes.splice(i,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this),this)},i.prototype.on=function(e,t){var n=B.prototype.on.call(this,e,t);if("data"!==e||this._readableState.flowing||v(this),"readable"===e&&this.readable){var r=this._readableState;r.readableListening||(r.readableListening=!0,r.emittedReadable=!1,r.needReadable=!0,r.reading?r.length&&l(this,r):this.read(0))}return n},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){v(this),this.read(0),this.emit("resume")},i.prototype.pause=function(){v(this,!0),this.emit("pause")},i.prototype.wrap=function(e){var t=this._readableState,n=!1,r=this;e.on("end",function(){if(t.decoder&&!t.ended){var e=t.decoder.end();e&&e.length&&r.push(e)}r.push(null)}),e.on("data",function(i){if(t.decoder&&(i=t.decoder.write(i)),(!t.objectMode||null!==i&&void 0!==i)&&(t.objectMode||i&&i.length)){var o=r.push(i);o||(n=!0,e.pause())}});for(var i in e)"function"==typeof e[i]&&"undefined"==typeof this[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return w(o,function(t){e.on(t,r.emit.bind(r,t))}),r._read=function(){n&&(n=!1,e.resume())},r},i._fromList=_}).call(this,e("_process"))},{_process:154,buffer:14,"core-util-is":24,events:41,inherits:75,isarray:192,stream:207,"string_decoder/":210}],195:[function(e,t){function n(e,t){this.afterTransform=function(e,n){return r(t,e,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function r(e,t,n){var r=e._transformState;r.transforming=!1;var i=r.writecb;if(!i)return e.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,null!==n&&void 0!==n&&e.push(n),i&&i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function i(e){if(!(this instanceof i))return new i(e);s.call(this,e);var t=(this._transformState=new n(e,this),this);this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("finish",function(){"function"==typeof this._flush?this._flush(function(e){o(t,e)}):o(t)})}function o(e,t){if(t)return e.emit("error",t);var n=e._writableState,r=(e._readableState,e._transformState);if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return e.push(null)}t.exports=i;var s=e("./_stream_duplex"),u=e("core-util-is");u.inherits=e("inherits"),u.inherits(i,s),i.prototype.push=function(e,t){return this._transformState.needTransform=!1,s.prototype.push.call(this,e,t)},i.prototype._transform=function(){throw new Error("not implemented")},i.prototype._write=function(e,t,n){var r=this._transformState;if(r.writecb=n,r.writechunk=e,r.writeencoding=t,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},i.prototype._read=function(){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0}},{"./_stream_duplex":193,"core-util-is":24,inherits:75}],196:[function(e,t){(function(n){function r(e,t,n){this.chunk=e,this.encoding=t,this.callback=n}function i(e,t){e=e||{};var n=e.highWaterMark;this.highWaterMark=n||0===n?n:16384,this.objectMode=!!e.objectMode,this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var r=e.decodeStrings===!1;this.decodeStrings=!r,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){d(t,e)},this.writecb=null,this.writelen=0,this.buffer=[],this.errorEmitted=!1}function o(t){var n=e("./_stream_duplex");return this instanceof o||this instanceof n?(this._writableState=new i(t,this),this.writable=!0,void k.call(this)):new o(t)}function s(e,t,r){var i=new Error("write after end");e.emit("error",i),n.nextTick(function(){r(i)})}function u(e,t,r,i){var o=!0;if(!m.isBuffer(r)&&"string"!=typeof r&&null!==r&&void 0!==r&&!t.objectMode){var s=new TypeError("Invalid non-string/buffer chunk");e.emit("error",s),n.nextTick(function(){i(s)}),o=!1}return o}function a(e,t,n){return e.objectMode||e.decodeStrings===!1||"string"!=typeof t||(t=new m(t,n)),t}function f(e,t,n,i,o){n=a(t,n,i),m.isBuffer(n)&&(i="buffer");var s=t.objectMode?1:n.length;t.length+=s;var u=t.length<t.highWaterMark;return u||(t.needDrain=!0),t.writing?t.buffer.push(new r(n,i,o)):c(e,t,s,n,i,o),u}function c(e,t,n,r,i,o){t.writelen=n,t.writecb=o,t.writing=!0,t.sync=!0,e._write(r,i,t.onwrite),t.sync=!1}function l(e,t,r,i,o){r?n.nextTick(function(){o(i)}):o(i),e._writableState.errorEmitted=!0,e.emit("error",i)}function h(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function d(e,t){var r=e._writableState,i=r.sync,o=r.writecb;if(h(r),t)l(e,r,i,t,o);else{var s=y(e,r);s||r.bufferProcessing||!r.buffer.length||b(e,r),i?n.nextTick(function(){p(e,r,s,o)}):p(e,r,s,o)}}function p(e,t,n,r){n||g(e,t),r(),n&&v(e,t)}function g(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function b(e,t){t.bufferProcessing=!0;for(var n=0;n<t.buffer.length;n++){var r=t.buffer[n],i=r.chunk,o=r.encoding,s=r.callback,u=t.objectMode?1:i.length;if(c(e,t,u,i,o,s),t.writing){n++;break}}t.bufferProcessing=!1,n<t.buffer.length?t.buffer=t.buffer.slice(n):t.buffer.length=0}function y(e,t){return t.ending&&0===t.length&&!t.finished&&!t.writing}function v(e,t){var n=y(e,t);return n&&(t.finished=!0,e.emit("finish")),n}function _(e,t,r){t.ending=!0,v(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0}t.exports=o;var m=e("buffer").Buffer;o.WritableState=i;var w=e("core-util-is");w.inherits=e("inherits");var k=e("stream");w.inherits(o,k),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(e,t,n){var r=this._writableState,i=!1;return"function"==typeof t&&(n=t,t=null),m.isBuffer(e)?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=function(){}),r.ended?s(this,r,n):u(this,r,e,n)&&(i=f(this,r,e,t,n)),i},o.prototype._write=function(e,t,n){n(new Error("not implemented"))},o.prototype.end=function(e,t,n){var r=this._writableState;"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),"undefined"!=typeof e&&null!==e&&this.write(e,t),r.ending||r.finished||_(this,r,n)}}).call(this,e("_process"))},{"./_stream_duplex":193,_process:154,buffer:14,"core-util-is":24,inherits:75,stream:207}],197:[function(e,t,n){arguments[4][180][0].apply(n,arguments)},{"./lib/_stream_transform.js":195,dup:180}],198:[function(e,t){(function(n){function r(e){s.call(this,e),this._destroyed=!1}function i(e,t,n){n(null,e)}function o(e){return function(t,n,r){return"function"==typeof t&&(r=n,n=t,t={}),"function"!=typeof n&&(n=i),"function"!=typeof r&&(r=null),e(t,n,r)}}var s=e("readable-stream/transform"),u=e("util").inherits,a=e("xtend");u(r,s),r.prototype.destroy=function(e){if(!this._destroyed){this._destroyed=!0;var t=this;n.nextTick(function(){e&&t.emit("error",e),t.emit("close")})}},t.exports=o(function(e,t,n){var i=new r(e);return i._transform=t,n&&(i._flush=n),i}),t.exports.ctor=o(function(e,t,n){function i(t){return this instanceof i?(this.options=a(e,t),void r.call(this,this.options)):new i(t)}return u(i,r),i.prototype._transform=t,n&&(i.prototype._flush=n),i}),t.exports.obj=o(function(e,t,n){var i=new r(a({objectMode:!0,highWaterMark:16},e));return i._transform=t,n&&(i._flush=n),i})}).call(this,e("_process"))},{_process:154,"readable-stream/transform":197,util:222,xtend:230}],199:[function(e,t,n){var r=e("varint");n.encode=function i(e,t,n){e=e>=0?2*e:-2*e-1;var o=r.encode(e,t,n);return i.bytes=r.encode.bytes,o},n.decode=function o(e,t){var n=r.decode(e,t);return o.bytes=r.decode.bytes,1&n?(n+1)/-2:n/2},n.encodingLength=function(e){return r.encodingLength(e>=0?2*e:-2*e-1)}},{varint:202}],200:[function(e,t,n){arguments[4][84][0].apply(n,arguments)},{dup:84}],201:[function(e,t,n){arguments[4][85][0].apply(n,arguments)},{dup:85}],202:[function(e,t,n){arguments[4][86][0].apply(n,arguments)},{"./decode.js":200,"./encode.js":201,"./length.js":203,dup:86}],203:[function(e,t,n){arguments[4][87][0].apply(n,arguments)},{dup:87}],204:[function(e,t){(function(n){function r(e){var t=this;if(!(t instanceof r))return new r(e);if(t._id=a(4).toString("hex").slice(0,7),t._debug("new peer %o",e),e=Object.assign({allowHalfOpen:!1},e),f.Duplex.call(t,e),t.channelName=e.initiator?e.channelName||a(20).toString("hex"):null,t.initiator=e.initiator||!1,t.channelConfig=e.channelConfig||r.channelConfig,t.config=e.config||r.config,t.constraints=e.constraints||r.constraints,t.offerConstraints=e.offerConstraints||{},t.answerConstraints=e.answerConstraints||{},t.reconnectTimer=e.reconnectTimer||!1,t.sdpTransform=e.sdpTransform||function(e){return e},t.stream=e.stream||!1,t.trickle=void 0!==e.trickle?e.trickle:!0,t.destroyed=!1,t.connected=!1,t.remoteAddress=void 0,t.remoteFamily=void 0,t.remotePort=void 0,t.localAddress=void 0,t.localPort=void 0,t._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:s(),!t._wrtc)throw new Error("undefined"==typeof window?"No WebRTC support: Specify `opts.wrtc` option in this environment":"No WebRTC support: Not a supported browser");if(t._pcReady=!1,t._channelReady=!1,t._iceComplete=!1,t._channel=null,t._pendingCandidates=[],t._chunk=null,t._cb=null,t._interval=null,t._reconnectTimeout=null,t._pc=new t._wrtc.RTCPeerConnection(t.config,t.constraints),t._isWrtc=Array.isArray(t._pc.RTCIceConnectionStates),t._isReactNativeWebrtc="number"==typeof t._pc._peerConnectionId,t._pc.oniceconnectionstatechange=function(){t._onIceConnectionStateChange()},t._pc.onsignalingstatechange=function(){t._onSignalingStateChange()},t._pc.onicecandidate=function(e){t._onIceCandidate(e)},t.stream&&t._pc.addStream(t.stream),"ontrack"in t._pc?t._pc.ontrack=function(e){t._onTrack(e)}:t._pc.onaddstream=function(e){t._onAddStream(e)},t.initiator){var n=!1;t._pc.onnegotiationneeded=function(){n||t._createOffer(),n=!0},t._setupData({channel:t._pc.createDataChannel(t.channelName,t.channelConfig)}),t._isWrtc&&t._pc.onnegotiationneeded()}else t._pc.ondatachannel=function(e){t._setupData(e)};t._onFinishBound=function(){t._onFinish()},t.once("finish",t._onFinishBound)}function i(){}t.exports=r;var o=e("debug")("simple-peer"),s=e("get-browser-rtc"),u=e("inherits"),a=e("randombytes"),f=e("readable-stream"),c=65536;u(r,f.Duplex),r.WEBRTC_SUPPORT=!!s(),r.config={iceServers:[{urls:"stun:stun.l.google.com:19302"}]},r.constraints={},r.channelConfig={},Object.defineProperty(r.prototype,"bufferSize",{get:function(){var e=this;return e._channel&&e._channel.bufferedAmount||0}}),r.prototype.address=function(){var e=this;return{port:e.localPort,family:"IPv4",address:e.localAddress}},r.prototype.signal=function(e){var t=this;if(t.destroyed)throw new Error("cannot signal after peer is destroyed");if("string"==typeof e)try{e=JSON.parse(e)}catch(n){e={}}t._debug("signal()"),e.candidate&&(t._pc.remoteDescription?t._addIceCandidate(e.candidate):t._pendingCandidates.push(e.candidate)),e.sdp&&t._pc.setRemoteDescription(new t._wrtc.RTCSessionDescription(e),function(){
t.destroyed||(t._pendingCandidates.forEach(function(e){t._addIceCandidate(e)}),t._pendingCandidates=[],"offer"===t._pc.remoteDescription.type&&t._createAnswer())},function(e){t._onError(e)}),e.sdp||e.candidate||t._destroy(new Error("signal() called with invalid signal data"))},r.prototype._addIceCandidate=function(e){var t=this;try{t._pc.addIceCandidate(new t._wrtc.RTCIceCandidate(e),i,function(e){t._onError(e)})}catch(n){t._destroy(new Error("error adding candidate: "+n.message))}},r.prototype.send=function(e){var t=this;t._isWrtc&&n.isBuffer(e)&&(e=new Uint8Array(e)),t._channel.send(e)},r.prototype.destroy=function(e){var t=this;t._destroy(null,e)},r.prototype._destroy=function(e,t){var n=this;if(!n.destroyed){if(t&&n.once("close",t),n._debug("destroy (error: %s)",e&&e.message),n.readable=n.writable=!1,n._readableState.ended||n.push(null),n._writableState.finished||n.end(),n.destroyed=!0,n.connected=!1,n._pcReady=!1,n._channelReady=!1,clearInterval(n._interval),clearTimeout(n._reconnectTimeout),n._interval=null,n._reconnectTimeout=null,n._chunk=null,n._cb=null,n._onFinishBound&&n.removeListener("finish",n._onFinishBound),n._onFinishBound=null,n._pc){try{n._pc.close()}catch(e){}n._pc.oniceconnectionstatechange=null,n._pc.onsignalingstatechange=null,n._pc.onicecandidate=null,"ontrack"in n._pc?n._pc.ontrack=null:n._pc.onaddstream=null,n._pc.onnegotiationneeded=null,n._pc.ondatachannel=null}if(n._channel){try{n._channel.close()}catch(e){}n._channel.onmessage=null,n._channel.onopen=null,n._channel.onclose=null}n._pc=null,n._channel=null,e&&n.emit("error",e),n.emit("close")}},r.prototype._setupData=function(e){var t=this;t._channel=e.channel,t._channel.binaryType="arraybuffer","number"==typeof t._channel.bufferedAmountLowThreshold&&(t._channel.bufferedAmountLowThreshold=c),t.channelName=t._channel.label,t._channel.onmessage=function(e){t._onChannelMessage(e)},t._channel.onbufferedamountlow=function(){t._onChannelBufferedAmountLow()},t._channel.onopen=function(){t._onChannelOpen()},t._channel.onclose=function(){t._onChannelClose()}},r.prototype._read=function(){},r.prototype._write=function(e,t,n){var r=this;if(r.destroyed)return n(new Error("cannot write after peer is destroyed"));if(r.connected){try{r.send(e)}catch(i){return r._onError(i)}r._channel.bufferedAmount>c?(r._debug("start backpressure: bufferedAmount %d",r._channel.bufferedAmount),r._cb=n):n(null)}else r._debug("write before connect"),r._chunk=e,r._cb=n},r.prototype._onFinish=function(){function e(){setTimeout(function(){t._destroy()},100)}var t=this;t.destroyed||(t.connected?e():t.once("connect",e))},r.prototype._createOffer=function(){var e=this;e.destroyed||e._pc.createOffer(function(t){if(!e.destroyed){t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t,i,function(t){e._onError(t)});var n=function(){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp})};e.trickle||e._iceComplete?n():e.once("_iceComplete",n)}},function(t){e._onError(t)},e.offerConstraints)},r.prototype._createAnswer=function(){var e=this;e.destroyed||e._pc.createAnswer(function(t){function n(){var n=e._pc.localDescription||t;e._debug("signal"),e.emit("signal",{type:n.type,sdp:n.sdp})}e.destroyed||(t.sdp=e.sdpTransform(t.sdp),e._pc.setLocalDescription(t,i,function(t){e._onError(t)}),e.trickle||e._iceComplete?n():e.once("_iceComplete",n))},function(t){e._onError(t)},e.answerConstraints)},r.prototype._onIceConnectionStateChange=function(){var e=this;if(!e.destroyed){var t=e._pc.iceGatheringState,n=e._pc.iceConnectionState;e._debug("iceConnectionStateChange %s %s",t,n),e.emit("iceConnectionStateChange",t,n),("connected"===n||"completed"===n)&&(clearTimeout(e._reconnectTimeout),e._pcReady=!0,e._maybeReady()),"disconnected"===n&&(e.reconnectTimer?(clearTimeout(e._reconnectTimeout),e._reconnectTimeout=setTimeout(function(){e._destroy()},e.reconnectTimer)):e._destroy()),"failed"===n&&e._destroy(new Error("Ice connection failed.")),"closed"===n&&e._destroy()}},r.prototype.getStats=function(e){var t=this;0===t._pc.getStats.length?t._pc.getStats().then(function(t){var n=[];t.forEach(function(e){n.push(e)}),e(n)},function(e){t._onError(e)}):t._isReactNativeWebrtc?t._pc.getStats(null,function(t){var n=[];t.forEach(function(e){n.push(e)}),e(n)},function(e){t._onError(e)}):t._pc.getStats.length>0?t._pc.getStats(function(t){var n=[];t.result().forEach(function(e){var t={};e.names().forEach(function(n){t[n]=e.stat(n)}),t.id=e.id,t.type=e.type,t.timestamp=e.timestamp,n.push(t)}),e(n)},function(e){t._onError(e)}):e([])},r.prototype._maybeReady=function(){var e=this;e._debug("maybeReady pc %s channel %s",e._pcReady,e._channelReady),!e.connected&&!e._connecting&&e._pcReady&&e._channelReady&&(e._connecting=!0,e.getStats(function(t){function n(t){var n=i[t.localCandidateId];n&&n.ip?(e.localAddress=n.ip,e.localPort=Number(n.port)):n&&n.ipAddress?(e.localAddress=n.ipAddress,e.localPort=Number(n.portNumber)):"string"==typeof t.googLocalAddress&&(n=t.googLocalAddress.split(":"),e.localAddress=n[0],e.localPort=Number(n[1]));var o=r[t.remoteCandidateId];o&&o.ip?(e.remoteAddress=o.ip,e.remotePort=Number(o.port)):o&&o.ipAddress?(e.remoteAddress=o.ipAddress,e.remotePort=Number(o.portNumber)):"string"==typeof t.googRemoteAddress&&(o=t.googRemoteAddress.split(":"),e.remoteAddress=o[0],e.remotePort=Number(o[1])),e.remoteFamily="IPv4",e._debug("connect local: %s:%s remote: %s:%s",e.localAddress,e.localPort,e.remoteAddress,e.remotePort)}e._connecting=!1,e.connected=!0;var r={},i={},o={};if(t.forEach(function(e){("remotecandidate"===e.type||"remote-candidate"===e.type)&&(r[e.id]=e),("localcandidate"===e.type||"local-candidate"===e.type)&&(i[e.id]=e),("candidatepair"===e.type||"candidate-pair"===e.type)&&(o[e.id]=e)}),t.forEach(function(e){"transport"===e.type&&n(o[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&n(e)}),e._chunk){try{e.send(e._chunk)}catch(s){return e._onError(s)}e._chunk=null,e._debug('sent chunk from "write before connect"');var u=e._cb;e._cb=null,u(null)}"number"!=typeof e._channel.bufferedAmountLowThreshold&&(e._interval=setInterval(function(){e._onInterval()},150),e._interval.unref&&e._interval.unref()),e._debug("connect"),e.emit("connect")}))},r.prototype._onInterval=function(){!this._cb||!this._channel||this._channel.bufferedAmount>c||this._onChannelBufferedAmountLow()},r.prototype._onSignalingStateChange=function(){var e=this;e.destroyed||(e._debug("signalingStateChange %s",e._pc.signalingState),e.emit("signalingStateChange",e._pc.signalingState))},r.prototype._onIceCandidate=function(e){var t=this;t.destroyed||(e.candidate&&t.trickle?t.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||(t._iceComplete=!0,t.emit("_iceComplete")))},r.prototype._onChannelMessage=function(e){var t=this;if(!t.destroyed){var r=e.data;r instanceof ArrayBuffer&&(r=new n(r)),t.push(r)}},r.prototype._onChannelBufferedAmountLow=function(){var e=this;if(!e.destroyed&&e._cb){e._debug("ending backpressure: bufferedAmount %d",e._channel.bufferedAmount);var t=e._cb;e._cb=null,t(null)}},r.prototype._onChannelOpen=function(){var e=this;e.connected||e.destroyed||(e._debug("on channel open"),e._channelReady=!0,e._maybeReady())},r.prototype._onChannelClose=function(){var e=this;e.destroyed||(e._debug("on channel close"),e._destroy())},r.prototype._onAddStream=function(e){var t=this;t.destroyed||(t._debug("on add stream"),t.emit("stream",e.stream))},r.prototype._onTrack=function(e){var t=this;t.destroyed||(t._debug("on track"),t.emit("stream",e.streams[0]))},r.prototype._onError=function(e){var t=this;t.destroyed||(t._debug("error %s",e.message||e),t._destroy(e))},r.prototype._debug=function(){var e=this,t=[].slice.call(arguments);t[0]="["+e._id+"] "+t[0],o.apply(null,t)}}).call(this,e("buffer").Buffer)},{buffer:14,debug:30,"get-browser-rtc":47,inherits:75,randombytes:171,"readable-stream":179}],205:[function(e,t,n){(function(t){var r=e("tweetnacl");n.key=function(){return t(r.randomBytes(r.lowlevel.crypto_secretbox_KEYBYTES))},n.nonce=function(){return t(r.randomBytes(r.lowlevel.crypto_box_NONCEBYTES))},n.encrypt=function(e,n,i){return t(r.secretbox(e,n,i))},n.decrypt=function(e,n,i){var o=r.secretbox.open(e,n,i);return o?t(o):null},n.scalarMultiplication=function(e,n){return t(r.scalarMult(e,n))},n.scalarMultiplicationKeyPair=function(e){return e||(e=t(r.randomBytes(r.lowlevel.crypto_scalarmult_SCALARBYTES))),{secretKey:e,publicKey:t(r.scalarMult.base(e))}}}).call(this,e("buffer").Buffer)},{buffer:14,tweetnacl:216}],206:[function(e,t,n){(function(t){var r=e("tweetnacl");n.keyPair=function(e){var n=t(r.lowlevel.crypto_sign_PUBLICKEYBYTES),i=t(r.lowlevel.crypto_sign_SECRETKEYBYTES);if(e){if(e.length!==r.lowlevel.crypto_sign_SEEDBYTES)throw new Error("Seed must be "+r.lowlevel.crypto_sign_SEEDBYTES+" bytes long");i.fill(e,0,e.length),r.lowlevel.crypto_sign_keypair(n,i,!0)}else r.lowlevel.crypto_sign_keypair(n,i);return{publicKey:n,secretKey:i}},n.verify=function(e,t,n){return r.sign.detached.verify(e,t,n)},n.sign=function(e,n){return t(r.sign.detached(e,n))}}).call(this,e("buffer").Buffer)},{buffer:14,tweetnacl:216}],207:[function(e,t){function n(){r.call(this)}t.exports=n;var r=e("events").EventEmitter,i=e("inherits");i(n,r),n.Readable=e("readable-stream/readable.js"),n.Writable=e("readable-stream/writable.js"),n.Duplex=e("readable-stream/duplex.js"),n.Transform=e("readable-stream/transform.js"),n.PassThrough=e("readable-stream/passthrough.js"),n.Stream=n,n.prototype.pipe=function(e,t){function n(t){e.writable&&!1===e.write(t)&&f.pause&&f.pause()}function i(){f.readable&&f.resume&&f.resume()}function o(){c||(c=!0,e.end())}function s(){c||(c=!0,"function"==typeof e.destroy&&e.destroy())}function u(e){if(a(),0===r.listenerCount(this,"error"))throw e}function a(){f.removeListener("data",n),e.removeListener("drain",i),f.removeListener("end",o),f.removeListener("close",s),f.removeListener("error",u),e.removeListener("error",u),f.removeListener("end",a),f.removeListener("close",a),e.removeListener("close",a)}var f=this;f.on("data",n),e.on("drain",i),e._isStdio||t&&t.end===!1||(f.on("end",o),f.on("close",s));var c=!1;return f.on("error",u),e.on("error",u),f.on("end",a),f.on("close",a),e.on("close",a),e.emit("pipe",f),e}},{events:41,inherits:75,"readable-stream/duplex.js":172,"readable-stream/passthrough.js":178,"readable-stream/readable.js":179,"readable-stream/transform.js":180,"readable-stream/writable.js":181}],208:[function(e,t){var n=e("once");t.exports=function(e,t){if(!t)return e;var r=[];return t=n(t),e.on("data",function(e){r.push(e)}),e.on("end",function(){t(null,r)}),e.on("close",function(){t(new Error("Premature close"))}),e.on("error",t),e}},{once:149}],209:[function(e,t){function n(e){var t=e._readableState;return t?t.objectMode?e.read():e.read(r(t)):null}function r(e){return e.buffer.length?e.buffer.head?e.buffer.head.data.length:e.buffer[0].length:e.length}t.exports=n},{}],210:[function(e,t,n){arguments[4][131][0].apply(n,arguments)},{buffer:14,dup:131}],211:[function(e,t){var n=e("./leveldown"),r=e("levelup");t.exports=function(e,i,o){return"object"!=typeof i||o?(o||(o={}),o.db=function(){return n(e,i,o)},r(o)):t.exports(e,null,i)}},{"./leveldown":212,levelup:102}],212:[function(e,t){(function(n){var r=e("util"),i=e("abstract-leveldown"),o=e("level-option-wrap"),s=new n([255]),u=function(e,t,r){return"string"==typeof t&&(r||t.length)?e+t:n.isBuffer(t)&&(r||t.length)?n.concat([new n(e),t]):t},a=function(e,t){this.iterator=e,this.prefix=t};a.prototype.next=function(e){var t=this;this.iterator.next(e&&function(n,r){return n?e(n):(r&&(r=r.slice(t.prefix.length)),void e.apply(null,arguments))})},a.prototype.end=function(e){this.iterator.end(e)};var f=function(e,t,r){if(!(this instanceof f))return new f(e,t,r);"string"==typeof r&&(r={separator:r}),r||(r={});var o=r.separator;t||(t=""),o||(o="!"),t[0]===o&&(t=t.slice(1)),t[t.length-1]===o&&(t=t.slice(0,-1)),this.db=e,this.leveldown=null,this.prefix=o+t+o,this._beforeOpen=r.open;var a=this;this._wrap={gt:function(e){return u(a.prefix,e||"",!0)},lt:function(e){return n.isBuffer(e)&&!e.length&&(e=s),u(a.prefix,e||"Ã¿")}},i.AbstractLevelDOWN.call(this,"no-location")};r.inherits(f,i.AbstractLevelDOWN),f.prototype.type="subdown",f.prototype._open=function(e,t){function n(e){return e||!r._beforeOpen?t(e):void r._beforeOpen(t)}var r=this;return this.db.isOpen()?("subdown"===this.db.db.type&&this.db.db.prefix?(this.prefix=this.db.db.prefix+this.prefix,this.leveldown=this.db.db.leveldown):this.leveldown=this.db.db,n()):void this.db.on("open",this.open.bind(this,e,n))},f.prototype.close=function(){this.leveldown.close.apply(this.leveldown,arguments)},f.prototype.setDb=function(){this.leveldown.setDb.apply(this.leveldown,arguments)},f.prototype.put=function(e,t,n,r){this.leveldown.put(u(this.prefix,e),t,n,r)},f.prototype.get=function(e,t,n){this.leveldown.get(u(this.prefix,e),t,n)},f.prototype.del=function(e,t,n){this.leveldown.del(u(this.prefix,e),t,n)},f.prototype.batch=f.prototype._batch=function(e,t,n){if(0===arguments.length)return new i.AbstractChainedBatch(this);if(!Array.isArray(e))return this.leveldown.batch.apply(null,arguments);for(var r=new Array(e.length),o=0;o<e.length;o++){var s=e[o];r[o]={type:s.type,key:u(this.prefix,s.key),value:s.value}}this.leveldown.batch(r,t,n)},f.prototype.approximateSize=function(){this.leveldown.approximateSize.apply(this.leveldown,arguments)},f.prototype.getProperty=function(){return this.leveldown.getProperty.apply(this.leveldown,arguments)},f.prototype.destroy=function(){return this.leveldown.destroy.apply(this.leveldown,arguments)},f.prototype.repair=function(){return this.leveldown.repair.apply(this.leveldown,arguments)};var c=function(e,t){return e.keys=t.keys,e.values=t.values,e.createIfMissing=t.createIfMissing,e.errorIfExists=t.errorIfExists,e.keyEncoding=t.keyEncoding,e.valueEncoding=t.valueEncoding,e.compression=t.compression,e.db=t.db,e.limit=t.limit,e.keyAsBuffer=t.keyAsBuffer,e.valueAsBuffer=t.valueAsBuffer,e.reverse=t.reverse,e},l=function(e){return e.reverse&&(e.end||e.start)?{start:e.end,end:e.start}:e};f.prototype.iterator=function(e){e||(e={});var t=c(o(l(e),this._wrap),e);return new a(this.leveldown.iterator(t),this.prefix)},t.exports=f}).call(this,e("buffer").Buffer)},{"abstract-leveldown":4,buffer:14,"level-option-wrap":99,util:222}],213:[function(e,t,n){arguments[4][198][0].apply(n,arguments)},{_process:154,dup:198,"readable-stream/transform":180,util:222,xtend:230}],214:[function(e,t){var n=function(e){return"[object Error]"===Object.prototype.toString.call(e)},r=function(e){var t=function(i){var o=[i];r=function(e){o.push(e)},e(function(e){var i=arguments,s=function(e){e&&e.apply(null,i)};for(r=n(e)?t:s;o.length;)s(o.shift())})},r=t;return function(e){r(e)}};t.exports=r},{}],215:[function(e,t,n){function r(e){return e.replace(/^\s*|\s*$/g,"")}n=t.exports=r,n.left=function(e){return e.replace(/^\s*/,"")},n.right=function(e){return e.replace(/\s*$/,"")}},{}],216:[function(e,t){!function(t){"use strict";function n(e,t,n,r){e[t]=n>>24&255,e[t+1]=n>>16&255,e[t+2]=n>>8&255,e[t+3]=255&n,e[t+4]=r>>24&255,e[t+5]=r>>16&255,e[t+6]=r>>8&255,e[t+7]=255&r}function r(e,t,n,r,i){var o,s=0;for(o=0;i>o;o++)s|=e[t+o]^n[r+o];return(1&s-1>>>8)-1}function i(e,t,n,i){return r(e,t,n,i,16)}function o(e,t,n,i){return r(e,t,n,i,32)}function s(e,t,n,r){for(var i,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,u=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,a=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,f=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,c=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,l=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,d=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,b=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,y=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,v=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,_=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,m=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,w=o,k=s,E=u,x=a,S=f,B=c,A=l,j=h,R=d,M=p,C=g,T=b,I=y,O=v,L=_,D=m,N=0;20>N;N+=2)i=w+I|0,S^=i<<7|i>>>25,i=S+w|0,R^=i<<9|i>>>23,i=R+S|0,I^=i<<13|i>>>19,i=I+R|0,w^=i<<18|i>>>14,i=B+k|0,M^=i<<7|i>>>25,i=M+B|0,O^=i<<9|i>>>23,i=O+M|0,k^=i<<13|i>>>19,i=k+O|0,B^=i<<18|i>>>14,i=C+A|0,L^=i<<7|i>>>25,i=L+C|0,E^=i<<9|i>>>23,i=E+L|0,A^=i<<13|i>>>19,i=A+E|0,C^=i<<18|i>>>14,i=D+T|0,x^=i<<7|i>>>25,i=x+D|0,j^=i<<9|i>>>23,i=j+x|0,T^=i<<13|i>>>19,i=T+j|0,D^=i<<18|i>>>14,i=w+x|0,k^=i<<7|i>>>25,i=k+w|0,E^=i<<9|i>>>23,i=E+k|0,x^=i<<13|i>>>19,i=x+E|0,w^=i<<18|i>>>14,i=B+S|0,A^=i<<7|i>>>25,i=A+B|0,j^=i<<9|i>>>23,i=j+A|0,S^=i<<13|i>>>19,i=S+j|0,B^=i<<18|i>>>14,i=C+M|0,T^=i<<7|i>>>25,i=T+C|0,R^=i<<9|i>>>23,i=R+T|0,M^=i<<13|i>>>19,i=M+R|0,C^=i<<18|i>>>14,i=D+L|0,I^=i<<7|i>>>25,i=I+D|0,O^=i<<9|i>>>23,i=O+I|0,L^=i<<13|i>>>19,i=L+O|0,D^=i<<18|i>>>14;w=w+o|0,k=k+s|0,E=E+u|0,x=x+a|0,S=S+f|0,B=B+c|0,A=A+l|0,j=j+h|0,R=R+d|0,M=M+p|0,C=C+g|0,T=T+b|0,I=I+y|0,O=O+v|0,L=L+_|0,D=D+m|0,e[0]=w>>>0&255,e[1]=w>>>8&255,e[2]=w>>>16&255,e[3]=w>>>24&255,e[4]=k>>>0&255,e[5]=k>>>8&255,e[6]=k>>>16&255,e[7]=k>>>24&255,e[8]=E>>>0&255,e[9]=E>>>8&255,e[10]=E>>>16&255,e[11]=E>>>24&255,e[12]=x>>>0&255,e[13]=x>>>8&255,e[14]=x>>>16&255,e[15]=x>>>24&255,e[16]=S>>>0&255,e[17]=S>>>8&255,e[18]=S>>>16&255,e[19]=S>>>24&255,e[20]=B>>>0&255,e[21]=B>>>8&255,e[22]=B>>>16&255,e[23]=B>>>24&255,e[24]=A>>>0&255,e[25]=A>>>8&255,e[26]=A>>>16&255,e[27]=A>>>24&255,e[28]=j>>>0&255,e[29]=j>>>8&255,e[30]=j>>>16&255,e[31]=j>>>24&255,e[32]=R>>>0&255,e[33]=R>>>8&255,e[34]=R>>>16&255,e[35]=R>>>24&255,e[36]=M>>>0&255,e[37]=M>>>8&255,e[38]=M>>>16&255,e[39]=M>>>24&255,e[40]=C>>>0&255,e[41]=C>>>8&255,e[42]=C>>>16&255,e[43]=C>>>24&255,e[44]=T>>>0&255,e[45]=T>>>8&255,e[46]=T>>>16&255,e[47]=T>>>24&255,e[48]=I>>>0&255,e[49]=I>>>8&255,e[50]=I>>>16&255,e[51]=I>>>24&255,e[52]=O>>>0&255,e[53]=O>>>8&255,e[54]=O>>>16&255,e[55]=O>>>24&255,e[56]=L>>>0&255,e[57]=L>>>8&255,e[58]=L>>>16&255,e[59]=L>>>24&255,e[60]=D>>>0&255,e[61]=D>>>8&255,e[62]=D>>>16&255,e[63]=D>>>24&255}function u(e,t,n,r){for(var i,o=255&r[0]|(255&r[1])<<8|(255&r[2])<<16|(255&r[3])<<24,s=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,u=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,a=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,f=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,c=255&r[4]|(255&r[5])<<8|(255&r[6])<<16|(255&r[7])<<24,l=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,h=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,d=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,p=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,g=255&r[8]|(255&r[9])<<8|(255&r[10])<<16|(255&r[11])<<24,b=255&n[16]|(255&n[17])<<8|(255&n[18])<<16|(255&n[19])<<24,y=255&n[20]|(255&n[21])<<8|(255&n[22])<<16|(255&n[23])<<24,v=255&n[24]|(255&n[25])<<8|(255&n[26])<<16|(255&n[27])<<24,_=255&n[28]|(255&n[29])<<8|(255&n[30])<<16|(255&n[31])<<24,m=255&r[12]|(255&r[13])<<8|(255&r[14])<<16|(255&r[15])<<24,w=o,k=s,E=u,x=a,S=f,B=c,A=l,j=h,R=d,M=p,C=g,T=b,I=y,O=v,L=_,D=m,N=0;20>N;N+=2)i=w+I|0,S^=i<<7|i>>>25,i=S+w|0,R^=i<<9|i>>>23,i=R+S|0,I^=i<<13|i>>>19,i=I+R|0,w^=i<<18|i>>>14,i=B+k|0,M^=i<<7|i>>>25,i=M+B|0,O^=i<<9|i>>>23,i=O+M|0,k^=i<<13|i>>>19,i=k+O|0,B^=i<<18|i>>>14,i=C+A|0,L^=i<<7|i>>>25,i=L+C|0,E^=i<<9|i>>>23,i=E+L|0,A^=i<<13|i>>>19,i=A+E|0,C^=i<<18|i>>>14,i=D+T|0,x^=i<<7|i>>>25,i=x+D|0,j^=i<<9|i>>>23,i=j+x|0,T^=i<<13|i>>>19,i=T+j|0,D^=i<<18|i>>>14,i=w+x|0,k^=i<<7|i>>>25,i=k+w|0,E^=i<<9|i>>>23,i=E+k|0,x^=i<<13|i>>>19,i=x+E|0,w^=i<<18|i>>>14,i=B+S|0,A^=i<<7|i>>>25,i=A+B|0,j^=i<<9|i>>>23,i=j+A|0,S^=i<<13|i>>>19,i=S+j|0,B^=i<<18|i>>>14,i=C+M|0,T^=i<<7|i>>>25,i=T+C|0,R^=i<<9|i>>>23,i=R+T|0,M^=i<<13|i>>>19,i=M+R|0,C^=i<<18|i>>>14,i=D+L|0,I^=i<<7|i>>>25,i=I+D|0,O^=i<<9|i>>>23,i=O+I|0,L^=i<<13|i>>>19,i=L+O|0,D^=i<<18|i>>>14;e[0]=w>>>0&255,e[1]=w>>>8&255,e[2]=w>>>16&255,e[3]=w>>>24&255,e[4]=B>>>0&255,e[5]=B>>>8&255,e[6]=B>>>16&255,e[7]=B>>>24&255,e[8]=C>>>0&255,e[9]=C>>>8&255,e[10]=C>>>16&255,e[11]=C>>>24&255,e[12]=D>>>0&255,e[13]=D>>>8&255,e[14]=D>>>16&255,e[15]=D>>>24&255,e[16]=A>>>0&255,e[17]=A>>>8&255,e[18]=A>>>16&255,e[19]=A>>>24&255,e[20]=j>>>0&255,e[21]=j>>>8&255,e[22]=j>>>16&255,e[23]=j>>>24&255,e[24]=R>>>0&255,e[25]=R>>>8&255,e[26]=R>>>16&255,e[27]=R>>>24&255,e[28]=M>>>0&255,e[29]=M>>>8&255,e[30]=M>>>16&255,e[31]=M>>>24&255}function a(e,t,n,r){s(e,t,n,r)}function f(e,t,n,r){u(e,t,n,r)}function c(e,t,n,r,i,o,s){var u,f,c=new Uint8Array(16),l=new Uint8Array(64);for(f=0;16>f;f++)c[f]=0;for(f=0;8>f;f++)c[f]=o[f];for(;i>=64;){for(a(l,c,s,he),f=0;64>f;f++)e[t+f]=n[r+f]^l[f];for(u=1,f=8;16>f;f++)u=u+(255&c[f])|0,c[f]=255&u,u>>>=8;i-=64,t+=64,r+=64}if(i>0)for(a(l,c,s,he),f=0;i>f;f++)e[t+f]=n[r+f]^l[f];return 0}function l(e,t,n,r,i){var o,s,u=new Uint8Array(16),f=new Uint8Array(64);for(s=0;16>s;s++)u[s]=0;for(s=0;8>s;s++)u[s]=r[s];for(;n>=64;){for(a(f,u,i,he),s=0;64>s;s++)e[t+s]=f[s];for(o=1,s=8;16>s;s++)o=o+(255&u[s])|0,u[s]=255&o,o>>>=8;n-=64,t+=64}if(n>0)for(a(f,u,i,he),s=0;n>s;s++)e[t+s]=f[s];return 0}function h(e,t,n,r,i){var o=new Uint8Array(32);f(o,r,i,he);for(var s=new Uint8Array(8),u=0;8>u;u++)s[u]=r[u+16];return l(e,t,n,s,o)}function d(e,t,n,r,i,o,s){var u=new Uint8Array(32);f(u,o,s,he);for(var a=new Uint8Array(8),l=0;8>l;l++)a[l]=o[l+16];return c(e,t,n,r,i,a,u)}function p(e,t,n,r,i,o){var s=new de(o);return s.update(n,r,i),s.finish(e,t),0}function g(e,t,n,r,o,s){var u=new Uint8Array(16);return p(u,0,n,r,o,s),i(e,t,u,0)}function b(e,t,n,r,i){var o;if(32>n)return-1;for(d(e,0,t,0,n,r,i),p(e,16,e,32,n-32,e),o=0;16>o;o++)e[o]=0;return 0}function y(e,t,n,r,i){var o,s=new Uint8Array(32);if(32>n)return-1;if(h(s,0,32,r,i),0!==g(t,16,t,32,n-32,s))return-1;for(d(e,0,t,0,n,r,i),o=0;32>o;o++)e[o]=0;return 0}function v(e,t){var n;for(n=0;16>n;n++)e[n]=0|t[n]}function _(e){var t,n,r=1;for(t=0;16>t;t++)n=e[t]+r+65535,r=Math.floor(n/65536),e[t]=n-65536*r;e[0]+=r-1+37*(r-1)}function m(e,t,n){for(var r,i=~(n-1),o=0;16>o;o++)r=i&(e[o]^t[o]),e[o]^=r,t[o]^=r}function w(e,t){var n,r,i,o=ee(),s=ee();for(n=0;16>n;n++)s[n]=t[n];for(_(s),_(s),_(s),r=0;2>r;r++){for(o[0]=s[0]-65517,n=1;15>n;n++)o[n]=s[n]-65535-(o[n-1]>>16&1),o[n-1]&=65535;o[15]=s[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,m(s,o,1-i)}for(n=0;16>n;n++)e[2*n]=255&s[n],e[2*n+1]=s[n]>>8}function k(e,t){var n=new Uint8Array(32),r=new Uint8Array(32);return w(n,e),w(r,t),o(n,0,r,0)}function E(e){var t=new Uint8Array(32);return w(t,e),1&t[0]}function x(e,t){var n;for(n=0;16>n;n++)e[n]=t[2*n]+(t[2*n+1]<<8);e[15]&=32767}function S(e,t,n){for(var r=0;16>r;r++)e[r]=t[r]+n[r]}function B(e,t,n){for(var r=0;16>r;r++)e[r]=t[r]-n[r]}function A(e,t,n){var r,i,o=0,s=0,u=0,a=0,f=0,c=0,l=0,h=0,d=0,p=0,g=0,b=0,y=0,v=0,_=0,m=0,w=0,k=0,E=0,x=0,S=0,B=0,A=0,j=0,R=0,M=0,C=0,T=0,I=0,O=0,L=0,D=n[0],N=n[1],U=n[2],P=n[3],q=n[4],W=n[5],z=n[6],K=n[7],F=n[8],Y=n[9],H=n[10],V=n[11],G=n[12],Z=n[13],X=n[14],J=n[15];r=t[0],o+=r*D,s+=r*N,u+=r*U,a+=r*P,f+=r*q,c+=r*W,l+=r*z,h+=r*K,d+=r*F,p+=r*Y,g+=r*H,b+=r*V,y+=r*G,v+=r*Z,_+=r*X,m+=r*J,r=t[1],s+=r*D,u+=r*N,a+=r*U,f+=r*P,c+=r*q,l+=r*W,h+=r*z,d+=r*K,p+=r*F,g+=r*Y,b+=r*H,y+=r*V,v+=r*G,_+=r*Z,m+=r*X,w+=r*J,r=t[2],u+=r*D,a+=r*N,f+=r*U,c+=r*P,l+=r*q,h+=r*W,d+=r*z,p+=r*K,g+=r*F,b+=r*Y,y+=r*H,v+=r*V,_+=r*G,m+=r*Z,w+=r*X,k+=r*J,r=t[3],a+=r*D,f+=r*N,c+=r*U,l+=r*P,h+=r*q,d+=r*W,p+=r*z,g+=r*K,b+=r*F,y+=r*Y,v+=r*H,_+=r*V,m+=r*G,w+=r*Z,k+=r*X,E+=r*J,r=t[4],f+=r*D,c+=r*N,l+=r*U,h+=r*P,d+=r*q,p+=r*W,g+=r*z,b+=r*K,y+=r*F,v+=r*Y,_+=r*H,m+=r*V,w+=r*G,k+=r*Z,E+=r*X,x+=r*J,r=t[5],c+=r*D,l+=r*N,h+=r*U,d+=r*P,p+=r*q,g+=r*W,b+=r*z,y+=r*K,v+=r*F,_+=r*Y,m+=r*H,w+=r*V,k+=r*G,E+=r*Z,x+=r*X,S+=r*J,r=t[6],l+=r*D,h+=r*N,d+=r*U,p+=r*P,g+=r*q,b+=r*W,y+=r*z,v+=r*K,_+=r*F,m+=r*Y,w+=r*H,k+=r*V,E+=r*G,x+=r*Z,S+=r*X,B+=r*J,r=t[7],h+=r*D,d+=r*N,p+=r*U,g+=r*P,b+=r*q,y+=r*W,v+=r*z,_+=r*K,m+=r*F,w+=r*Y,k+=r*H,E+=r*V,x+=r*G,S+=r*Z,B+=r*X,A+=r*J,r=t[8],d+=r*D,p+=r*N,g+=r*U,b+=r*P,y+=r*q,v+=r*W,_+=r*z,m+=r*K,w+=r*F,k+=r*Y,E+=r*H,x+=r*V,S+=r*G,B+=r*Z,A+=r*X,j+=r*J,r=t[9],p+=r*D,g+=r*N,b+=r*U,y+=r*P,v+=r*q,_+=r*W,m+=r*z,w+=r*K,k+=r*F,E+=r*Y,x+=r*H,S+=r*V,B+=r*G,A+=r*Z,j+=r*X,R+=r*J,r=t[10],g+=r*D,b+=r*N,y+=r*U,v+=r*P,_+=r*q,m+=r*W,w+=r*z,k+=r*K,E+=r*F,x+=r*Y,S+=r*H,B+=r*V,A+=r*G,j+=r*Z,R+=r*X,M+=r*J,r=t[11],b+=r*D,y+=r*N,v+=r*U,_+=r*P,m+=r*q,w+=r*W,k+=r*z,E+=r*K,x+=r*F,S+=r*Y,B+=r*H,A+=r*V,j+=r*G,R+=r*Z,M+=r*X,C+=r*J,r=t[12],y+=r*D,v+=r*N,_+=r*U,m+=r*P,w+=r*q,k+=r*W,E+=r*z,x+=r*K,S+=r*F,B+=r*Y,A+=r*H,j+=r*V,R+=r*G,M+=r*Z,C+=r*X,T+=r*J,r=t[13],v+=r*D,_+=r*N,m+=r*U,w+=r*P,k+=r*q,E+=r*W,x+=r*z,S+=r*K,B+=r*F,A+=r*Y,j+=r*H,R+=r*V,M+=r*G,C+=r*Z,T+=r*X,I+=r*J,r=t[14],_+=r*D,m+=r*N,w+=r*U,k+=r*P,E+=r*q,x+=r*W,S+=r*z,B+=r*K,A+=r*F,j+=r*Y,R+=r*H,M+=r*V,C+=r*G,T+=r*Z,I+=r*X,O+=r*J,r=t[15],m+=r*D,w+=r*N,k+=r*U,E+=r*P,x+=r*q,S+=r*W,B+=r*z,A+=r*K,j+=r*F,R+=r*Y,M+=r*H,C+=r*V,T+=r*G,I+=r*Z,O+=r*X,L+=r*J,o+=38*w,s+=38*k,u+=38*E,a+=38*x,f+=38*S,c+=38*B,l+=38*A,h+=38*j,d+=38*R,p+=38*M,g+=38*C,b+=38*T,y+=38*I,v+=38*O,_+=38*L,i=1,r=o+i+65535,i=Math.floor(r/65536),o=r-65536*i,r=s+i+65535,i=Math.floor(r/65536),s=r-65536*i,r=u+i+65535,i=Math.floor(r/65536),u=r-65536*i,r=a+i+65535,i=Math.floor(r/65536),a=r-65536*i,r=f+i+65535,i=Math.floor(r/65536),f=r-65536*i,r=c+i+65535,i=Math.floor(r/65536),c=r-65536*i,r=l+i+65535,i=Math.floor(r/65536),l=r-65536*i,r=h+i+65535,i=Math.floor(r/65536),h=r-65536*i,r=d+i+65535,i=Math.floor(r/65536),d=r-65536*i,r=p+i+65535,i=Math.floor(r/65536),p=r-65536*i,r=g+i+65535,i=Math.floor(r/65536),g=r-65536*i,r=b+i+65535,i=Math.floor(r/65536),b=r-65536*i,r=y+i+65535,i=Math.floor(r/65536),y=r-65536*i,r=v+i+65535,i=Math.floor(r/65536),v=r-65536*i,r=_+i+65535,i=Math.floor(r/65536),_=r-65536*i,r=m+i+65535,i=Math.floor(r/65536),m=r-65536*i,o+=i-1+37*(i-1),i=1,r=o+i+65535,i=Math.floor(r/65536),o=r-65536*i,r=s+i+65535,i=Math.floor(r/65536),s=r-65536*i,r=u+i+65535,i=Math.floor(r/65536),u=r-65536*i,r=a+i+65535,i=Math.floor(r/65536),a=r-65536*i,r=f+i+65535,i=Math.floor(r/65536),f=r-65536*i,r=c+i+65535,i=Math.floor(r/65536),c=r-65536*i,r=l+i+65535,i=Math.floor(r/65536),l=r-65536*i,r=h+i+65535,i=Math.floor(r/65536),h=r-65536*i,r=d+i+65535,i=Math.floor(r/65536),d=r-65536*i,r=p+i+65535,i=Math.floor(r/65536),p=r-65536*i,r=g+i+65535,i=Math.floor(r/65536),g=r-65536*i,r=b+i+65535,i=Math.floor(r/65536),b=r-65536*i,r=y+i+65535,i=Math.floor(r/65536),y=r-65536*i,r=v+i+65535,i=Math.floor(r/65536),v=r-65536*i,r=_+i+65535,i=Math.floor(r/65536),_=r-65536*i,r=m+i+65535,i=Math.floor(r/65536),m=r-65536*i,o+=i-1+37*(i-1),e[0]=o,e[1]=s,e[2]=u,e[3]=a,e[4]=f,e[5]=c,e[6]=l,e[7]=h,e[8]=d,e[9]=p,e[10]=g,e[11]=b,e[12]=y,e[13]=v,e[14]=_,e[15]=m}function j(e,t){A(e,t,t)}function R(e,t){var n,r=ee();for(n=0;16>n;n++)r[n]=t[n];for(n=253;n>=0;n--)j(r,r),2!==n&&4!==n&&A(r,r,t);for(n=0;16>n;n++)e[n]=r[n]}function M(e,t){var n,r=ee();for(n=0;16>n;n++)r[n]=t[n];for(n=250;n>=0;n--)j(r,r),1!==n&&A(r,r,t);for(n=0;16>n;n++)e[n]=r[n]}function C(e,t,n){var r,i,o=new Uint8Array(32),s=new Float64Array(80),u=ee(),a=ee(),f=ee(),c=ee(),l=ee(),h=ee();for(i=0;31>i;i++)o[i]=t[i];for(o[31]=127&t[31]|64,o[0]&=248,x(s,n),i=0;16>i;i++)a[i]=s[i],c[i]=u[i]=f[i]=0;for(u[0]=c[0]=1,i=254;i>=0;--i)r=o[i>>>3]>>>(7&i)&1,m(u,a,r),m(f,c,r),S(l,u,f),B(u,u,f),S(f,a,c),B(a,a,c),j(c,l),j(h,u),A(u,f,u),A(f,a,l),S(l,u,f),B(u,u,f),j(a,u),B(f,c,h),A(u,f,se),S(u,u,c),A(f,f,u),A(u,c,h),A(c,a,s),j(a,l),m(u,a,r),m(f,c,r);for(i=0;16>i;i++)s[i+16]=u[i],s[i+32]=f[i],s[i+48]=a[i],s[i+64]=c[i];var d=s.subarray(32),p=s.subarray(16);return R(d,d),A(p,p,d),w(e,p),0}function T(e,t){return C(e,t,re)}function I(e,t){return te(t,32),T(e,t)}function O(e,t,n){var r=new Uint8Array(32);return C(r,n,t),f(e,ne,r,he)}function L(e,t,n,r,i,o){var s=new Uint8Array(32);return O(s,i,o),pe(e,t,n,r,s)}function D(e,t,n,r,i,o){var s=new Uint8Array(32);return O(s,i,o),ge(e,t,n,r,s)}function N(e,t,n,r){for(var i,o,s,u,a,f,c,l,h,d,p,g,b,y,v,_,m,w,k,E,x,S,B,A,j,R,M=new Int32Array(16),C=new Int32Array(16),T=e[0],I=e[1],O=e[2],L=e[3],D=e[4],N=e[5],U=e[6],P=e[7],q=t[0],W=t[1],z=t[2],K=t[3],F=t[4],Y=t[5],H=t[6],V=t[7],G=0;r>=128;){for(k=0;16>k;k++)E=8*k+G,M[k]=n[E+0]<<24|n[E+1]<<16|n[E+2]<<8|n[E+3],C[k]=n[E+4]<<24|n[E+5]<<16|n[E+6]<<8|n[E+7];for(k=0;80>k;k++)if(i=T,o=I,s=O,u=L,a=D,f=N,c=U,l=P,h=q,d=W,p=z,g=K,b=F,y=Y,v=H,_=V,x=P,S=V,B=65535&S,A=S>>>16,j=65535&x,R=x>>>16,x=(D>>>14|F<<18)^(D>>>18|F<<14)^(F>>>9|D<<23),S=(F>>>14|D<<18)^(F>>>18|D<<14)^(D>>>9|F<<23),B+=65535&S,A+=S>>>16,j+=65535&x,R+=x>>>16,x=D&N^~D&U,S=F&Y^~F&H,B+=65535&S,A+=S>>>16,j+=65535&x,R+=x>>>16,x=be[2*k],S=be[2*k+1],B+=65535&S,A+=S>>>16,j+=65535&x,R+=x>>>16,x=M[k%16],S=C[k%16],B+=65535&S,A+=S>>>16,j+=65535&x,R+=x>>>16,A+=B>>>16,j+=A>>>16,R+=j>>>16,m=65535&j|R<<16,w=65535&B|A<<16,x=m,S=w,B=65535&S,A=S>>>16,j=65535&x,R=x>>>16,x=(T>>>28|q<<4)^(q>>>2|T<<30)^(q>>>7|T<<25),S=(q>>>28|T<<4)^(T>>>2|q<<30)^(T>>>7|q<<25),B+=65535&S,A+=S>>>16,j+=65535&x,R+=x>>>16,x=T&I^T&O^I&O,S=q&W^q&z^W&z,B+=65535&S,A+=S>>>16,j+=65535&x,R+=x>>>16,A+=B>>>16,j+=A>>>16,R+=j>>>16,l=65535&j|R<<16,_=65535&B|A<<16,x=u,S=g,B=65535&S,A=S>>>16,j=65535&x,R=x>>>16,x=m,S=w,B+=65535&S,A+=S>>>16,j+=65535&x,R+=x>>>16,A+=B>>>16,j+=A>>>16,R+=j>>>16,u=65535&j|R<<16,g=65535&B|A<<16,I=i,O=o,L=s,D=u,N=a,U=f,P=c,T=l,W=h,z=d,K=p,F=g,Y=b,H=y,V=v,q=_,k%16===15)for(E=0;16>E;E++)x=M[E],S=C[E],B=65535&S,A=S>>>16,j=65535&x,R=x>>>16,x=M[(E+9)%16],S=C[(E+9)%16],B+=65535&S,A+=S>>>16,j+=65535&x,R+=x>>>16,m=M[(E+1)%16],w=C[(E+1)%16],x=(m>>>1|w<<31)^(m>>>8|w<<24)^m>>>7,S=(w>>>1|m<<31)^(w>>>8|m<<24)^(w>>>7|m<<25),B+=65535&S,A+=S>>>16,j+=65535&x,R+=x>>>16,m=M[(E+14)%16],w=C[(E+14)%16],x=(m>>>19|w<<13)^(w>>>29|m<<3)^m>>>6,S=(w>>>19|m<<13)^(m>>>29|w<<3)^(w>>>6|m<<26),B+=65535&S,A+=S>>>16,j+=65535&x,R+=x>>>16,A+=B>>>16,j+=A>>>16,R+=j>>>16,M[E]=65535&j|R<<16,C[E]=65535&B|A<<16;x=T,S=q,B=65535&S,A=S>>>16,j=65535&x,R=x>>>16,x=e[0],S=t[0],B+=65535&S,A+=S>>>16,j+=65535&x,R+=x>>>16,A+=B>>>16,j+=A>>>16,R+=j>>>16,e[0]=T=65535&j|R<<16,t[0]=q=65535&B|A<<16,x=I,S=W,B=65535&S,A=S>>>16,j=65535&x,R=x>>>16,x=e[1],S=t[1],B+=65535&S,A+=S>>>16,j+=65535&x,R+=x>>>16,A+=B>>>16,j+=A>>>16,R+=j>>>16,e[1]=I=65535&j|R<<16,t[1]=W=65535&B|A<<16,x=O,S=z,B=65535&S,A=S>>>16,j=65535&x,R=x>>>16,x=e[2],S=t[2],B+=65535&S,A+=S>>>16,j+=65535&x,R+=x>>>16,A+=B>>>16,j+=A>>>16,R+=j>>>16,e[2]=O=65535&j|R<<16,t[2]=z=65535&B|A<<16,x=L,S=K,B=65535&S,A=S>>>16,j=65535&x,R=x>>>16,x=e[3],S=t[3],B+=65535&S,A+=S>>>16,j+=65535&x,R+=x>>>16,A+=B>>>16,j+=A>>>16,R+=j>>>16,e[3]=L=65535&j|R<<16,t[3]=K=65535&B|A<<16,x=D,S=F,B=65535&S,A=S>>>16,j=65535&x,R=x>>>16,x=e[4],S=t[4],B+=65535&S,A+=S>>>16,j+=65535&x,R+=x>>>16,A+=B>>>16,j+=A>>>16,R+=j>>>16,e[4]=D=65535&j|R<<16,t[4]=F=65535&B|A<<16,x=N,S=Y,B=65535&S,A=S>>>16,j=65535&x,R=x>>>16,x=e[5],S=t[5],B+=65535&S,A+=S>>>16,j+=65535&x,R+=x>>>16,A+=B>>>16,j+=A>>>16,R+=j>>>16,e[5]=N=65535&j|R<<16,t[5]=Y=65535&B|A<<16,x=U,S=H,B=65535&S,A=S>>>16,j=65535&x,R=x>>>16,x=e[6],S=t[6],B+=65535&S,A+=S>>>16,j+=65535&x,R+=x>>>16,A+=B>>>16,j+=A>>>16,R+=j>>>16,e[6]=U=65535&j|R<<16,t[6]=H=65535&B|A<<16,x=P,S=V,B=65535&S,A=S>>>16,j=65535&x,R=x>>>16,x=e[7],S=t[7],B+=65535&S,A+=S>>>16,j+=65535&x,R+=x>>>16,A+=B>>>16,j+=A>>>16,R+=j>>>16,e[7]=P=65535&j|R<<16,t[7]=V=65535&B|A<<16,G+=128,r-=128}return r}function U(e,t,r){var i,o=new Int32Array(8),s=new Int32Array(8),u=new Uint8Array(256),a=r;for(o[0]=1779033703,o[1]=3144134277,o[2]=1013904242,o[3]=2773480762,o[4]=1359893119,o[5]=2600822924,o[6]=528734635,o[7]=1541459225,s[0]=4089235720,s[1]=2227873595,s[2]=4271175723,s[3]=1595750129,s[4]=2917565137,s[5]=725511199,s[6]=4215389547,s[7]=327033209,N(o,s,t,r),r%=128,i=0;r>i;i++)u[i]=t[a-r+i];for(u[r]=128,r=256-128*(112>r?1:0),u[r-9]=0,n(u,r-8,a/536870912|0,a<<3),N(o,s,u,r),i=0;8>i;i++)n(e,8*i,o[i],s[i]);

return 0}function P(e,t){var n=ee(),r=ee(),i=ee(),o=ee(),s=ee(),u=ee(),a=ee(),f=ee(),c=ee();B(n,e[1],e[0]),B(c,t[1],t[0]),A(n,n,c),S(r,e[0],e[1]),S(c,t[0],t[1]),A(r,r,c),A(i,e[3],t[3]),A(i,i,ae),A(o,e[2],t[2]),S(o,o,o),B(s,r,n),B(u,o,i),S(a,o,i),S(f,r,n),A(e[0],s,u),A(e[1],f,a),A(e[2],a,u),A(e[3],s,f)}function q(e,t,n){var r;for(r=0;4>r;r++)m(e[r],t[r],n)}function W(e,t){var n=ee(),r=ee(),i=ee();R(i,t[2]),A(n,t[0],i),A(r,t[1],i),w(e,r),e[31]^=E(n)<<7}function z(e,t,n){var r,i;for(v(e[0],ie),v(e[1],oe),v(e[2],oe),v(e[3],ie),i=255;i>=0;--i)r=n[i/8|0]>>(7&i)&1,q(e,t,r),P(t,e),P(e,e),q(e,t,r)}function K(e,t){var n=[ee(),ee(),ee(),ee()];v(n[0],fe),v(n[1],ce),v(n[2],oe),A(n[3],fe,ce),z(e,n,t)}function F(e,t,n){var r,i=new Uint8Array(64),o=[ee(),ee(),ee(),ee()];for(n||te(t,32),U(i,t,32),i[0]&=248,i[31]&=127,i[31]|=64,K(o,i),W(e,o),r=0;32>r;r++)t[r+32]=e[r];return 0}function Y(e,t){var n,r,i,o;for(r=63;r>=32;--r){for(n=0,i=r-32,o=r-12;o>i;++i)t[i]+=n-16*t[r]*ye[i-(r-32)],n=t[i]+128>>8,t[i]-=256*n;t[i]+=n,t[r]=0}for(n=0,i=0;32>i;i++)t[i]+=n-(t[31]>>4)*ye[i],n=t[i]>>8,t[i]&=255;for(i=0;32>i;i++)t[i]-=n*ye[i];for(r=0;32>r;r++)t[r+1]+=t[r]>>8,e[r]=255&t[r]}function H(e){var t,n=new Float64Array(64);for(t=0;64>t;t++)n[t]=e[t];for(t=0;64>t;t++)e[t]=0;Y(e,n)}function V(e,t,n,r){var i,o,s=new Uint8Array(64),u=new Uint8Array(64),a=new Uint8Array(64),f=new Float64Array(64),c=[ee(),ee(),ee(),ee()];U(s,r,32),s[0]&=248,s[31]&=127,s[31]|=64;var l=n+64;for(i=0;n>i;i++)e[64+i]=t[i];for(i=0;32>i;i++)e[32+i]=s[32+i];for(U(a,e.subarray(32),n+32),H(a),K(c,a),W(e,c),i=32;64>i;i++)e[i]=r[i];for(U(u,e,n+64),H(u),i=0;64>i;i++)f[i]=0;for(i=0;32>i;i++)f[i]=a[i];for(i=0;32>i;i++)for(o=0;32>o;o++)f[i+o]+=u[i]*s[o];return Y(e.subarray(32),f),l}function G(e,t){var n=ee(),r=ee(),i=ee(),o=ee(),s=ee(),u=ee(),a=ee();return v(e[2],oe),x(e[1],t),j(i,e[1]),A(o,i,ue),B(i,i,e[2]),S(o,e[2],o),j(s,o),j(u,s),A(a,u,s),A(n,a,i),A(n,n,o),M(n,n),A(n,n,i),A(n,n,o),A(n,n,o),A(e[0],n,o),j(r,e[0]),A(r,r,o),k(r,i)&&A(e[0],e[0],le),j(r,e[0]),A(r,r,o),k(r,i)?-1:(E(e[0])===t[31]>>7&&B(e[0],ie,e[0]),A(e[3],e[0],e[1]),0)}function Z(e,t,n,r){var i,s,u=new Uint8Array(32),a=new Uint8Array(64),f=[ee(),ee(),ee(),ee()],c=[ee(),ee(),ee(),ee()];if(s=-1,64>n)return-1;if(G(c,r))return-1;for(i=0;n>i;i++)e[i]=t[i];for(i=0;32>i;i++)e[i+32]=r[i];if(U(a,e,n),H(a),z(f,c,a),K(c,t.subarray(32)),P(f,c),W(u,f),n-=64,o(t,0,u,0)){for(i=0;n>i;i++)e[i]=0;return-1}for(i=0;n>i;i++)e[i]=t[i+64];return s=n}function X(e,t){if(e.length!==ve)throw new Error("bad key size");if(t.length!==_e)throw new Error("bad nonce size")}function J(e,t){if(e.length!==xe)throw new Error("bad public key size");if(t.length!==Se)throw new Error("bad secret key size")}function Q(){var e,t;for(t=0;t<arguments.length;t++)if("[object Uint8Array]"!==(e=Object.prototype.toString.call(arguments[t])))throw new TypeError("unexpected type "+e+", use Uint8Array")}function $(e){for(var t=0;t<e.length;t++)e[t]=0}var ee=function(e){var t,n=new Float64Array(16);if(e)for(t=0;t<e.length;t++)n[t]=e[t];return n},te=function(){throw new Error("no PRNG")},ne=new Uint8Array(16),re=new Uint8Array(32);re[0]=9;var ie=ee(),oe=ee([1]),se=ee([56129,1]),ue=ee([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),ae=ee([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),fe=ee([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),ce=ee([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),le=ee([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]),he=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]),de=function(e){this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0;var t,n,r,i,o,s,u,a;t=255&e[0]|(255&e[1])<<8,this.r[0]=8191&t,n=255&e[2]|(255&e[3])<<8,this.r[1]=8191&(t>>>13|n<<3),r=255&e[4]|(255&e[5])<<8,this.r[2]=7939&(n>>>10|r<<6),i=255&e[6]|(255&e[7])<<8,this.r[3]=8191&(r>>>7|i<<9),o=255&e[8]|(255&e[9])<<8,this.r[4]=255&(i>>>4|o<<12),this.r[5]=o>>>1&8190,s=255&e[10]|(255&e[11])<<8,this.r[6]=8191&(o>>>14|s<<2),u=255&e[12]|(255&e[13])<<8,this.r[7]=8065&(s>>>11|u<<5),a=255&e[14]|(255&e[15])<<8,this.r[8]=8191&(u>>>8|a<<8),this.r[9]=a>>>5&127,this.pad[0]=255&e[16]|(255&e[17])<<8,this.pad[1]=255&e[18]|(255&e[19])<<8,this.pad[2]=255&e[20]|(255&e[21])<<8,this.pad[3]=255&e[22]|(255&e[23])<<8,this.pad[4]=255&e[24]|(255&e[25])<<8,this.pad[5]=255&e[26]|(255&e[27])<<8,this.pad[6]=255&e[28]|(255&e[29])<<8,this.pad[7]=255&e[30]|(255&e[31])<<8};de.prototype.blocks=function(e,t,n){for(var r,i,o,s,u,a,f,c,l,h,d,p,g,b,y,v,_,m,w,k=this.fin?0:2048,E=this.h[0],x=this.h[1],S=this.h[2],B=this.h[3],A=this.h[4],j=this.h[5],R=this.h[6],M=this.h[7],C=this.h[8],T=this.h[9],I=this.r[0],O=this.r[1],L=this.r[2],D=this.r[3],N=this.r[4],U=this.r[5],P=this.r[6],q=this.r[7],W=this.r[8],z=this.r[9];n>=16;)r=255&e[t+0]|(255&e[t+1])<<8,E+=8191&r,i=255&e[t+2]|(255&e[t+3])<<8,x+=8191&(r>>>13|i<<3),o=255&e[t+4]|(255&e[t+5])<<8,S+=8191&(i>>>10|o<<6),s=255&e[t+6]|(255&e[t+7])<<8,B+=8191&(o>>>7|s<<9),u=255&e[t+8]|(255&e[t+9])<<8,A+=8191&(s>>>4|u<<12),j+=u>>>1&8191,a=255&e[t+10]|(255&e[t+11])<<8,R+=8191&(u>>>14|a<<2),f=255&e[t+12]|(255&e[t+13])<<8,M+=8191&(a>>>11|f<<5),c=255&e[t+14]|(255&e[t+15])<<8,C+=8191&(f>>>8|c<<8),T+=c>>>5|k,l=0,h=l,h+=E*I,h+=5*x*z,h+=5*S*W,h+=5*B*q,h+=5*A*P,l=h>>>13,h&=8191,h+=5*j*U,h+=5*R*N,h+=5*M*D,h+=5*C*L,h+=5*T*O,l+=h>>>13,h&=8191,d=l,d+=E*O,d+=x*I,d+=5*S*z,d+=5*B*W,d+=5*A*q,l=d>>>13,d&=8191,d+=5*j*P,d+=5*R*U,d+=5*M*N,d+=5*C*D,d+=5*T*L,l+=d>>>13,d&=8191,p=l,p+=E*L,p+=x*O,p+=S*I,p+=5*B*z,p+=5*A*W,l=p>>>13,p&=8191,p+=5*j*q,p+=5*R*P,p+=5*M*U,p+=5*C*N,p+=5*T*D,l+=p>>>13,p&=8191,g=l,g+=E*D,g+=x*L,g+=S*O,g+=B*I,g+=5*A*z,l=g>>>13,g&=8191,g+=5*j*W,g+=5*R*q,g+=5*M*P,g+=5*C*U,g+=5*T*N,l+=g>>>13,g&=8191,b=l,b+=E*N,b+=x*D,b+=S*L,b+=B*O,b+=A*I,l=b>>>13,b&=8191,b+=5*j*z,b+=5*R*W,b+=5*M*q,b+=5*C*P,b+=5*T*U,l+=b>>>13,b&=8191,y=l,y+=E*U,y+=x*N,y+=S*D,y+=B*L,y+=A*O,l=y>>>13,y&=8191,y+=j*I,y+=5*R*z,y+=5*M*W,y+=5*C*q,y+=5*T*P,l+=y>>>13,y&=8191,v=l,v+=E*P,v+=x*U,v+=S*N,v+=B*D,v+=A*L,l=v>>>13,v&=8191,v+=j*O,v+=R*I,v+=5*M*z,v+=5*C*W,v+=5*T*q,l+=v>>>13,v&=8191,_=l,_+=E*q,_+=x*P,_+=S*U,_+=B*N,_+=A*D,l=_>>>13,_&=8191,_+=j*L,_+=R*O,_+=M*I,_+=5*C*z,_+=5*T*W,l+=_>>>13,_&=8191,m=l,m+=E*W,m+=x*q,m+=S*P,m+=B*U,m+=A*N,l=m>>>13,m&=8191,m+=j*D,m+=R*L,m+=M*O,m+=C*I,m+=5*T*z,l+=m>>>13,m&=8191,w=l,w+=E*z,w+=x*W,w+=S*q,w+=B*P,w+=A*U,l=w>>>13,w&=8191,w+=j*N,w+=R*D,w+=M*L,w+=C*O,w+=T*I,l+=w>>>13,w&=8191,l=(l<<2)+l|0,l=l+h|0,h=8191&l,l>>>=13,d+=l,E=h,x=d,S=p,B=g,A=b,j=y,R=v,M=_,C=m,T=w,t+=16,n-=16;this.h[0]=E,this.h[1]=x,this.h[2]=S,this.h[3]=B,this.h[4]=A,this.h[5]=j,this.h[6]=R,this.h[7]=M,this.h[8]=C,this.h[9]=T},de.prototype.finish=function(e,t){var n,r,i,o,s=new Uint16Array(10);if(this.leftover){for(o=this.leftover,this.buffer[o++]=1;16>o;o++)this.buffer[o]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(n=this.h[1]>>>13,this.h[1]&=8191,o=2;10>o;o++)this.h[o]+=n,n=this.h[o]>>>13,this.h[o]&=8191;for(this.h[0]+=5*n,n=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=n,n=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=n,s[0]=this.h[0]+5,n=s[0]>>>13,s[0]&=8191,o=1;10>o;o++)s[o]=this.h[o]+n,n=s[o]>>>13,s[o]&=8191;for(s[9]-=8192,r=(1^n)-1,o=0;10>o;o++)s[o]&=r;for(r=~r,o=0;10>o;o++)this.h[o]=this.h[o]&r|s[o];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),i=this.h[0]+this.pad[0],this.h[0]=65535&i,o=1;8>o;o++)i=(this.h[o]+this.pad[o]|0)+(i>>>16)|0,this.h[o]=65535&i;e[t+0]=this.h[0]>>>0&255,e[t+1]=this.h[0]>>>8&255,e[t+2]=this.h[1]>>>0&255,e[t+3]=this.h[1]>>>8&255,e[t+4]=this.h[2]>>>0&255,e[t+5]=this.h[2]>>>8&255,e[t+6]=this.h[3]>>>0&255,e[t+7]=this.h[3]>>>8&255,e[t+8]=this.h[4]>>>0&255,e[t+9]=this.h[4]>>>8&255,e[t+10]=this.h[5]>>>0&255,e[t+11]=this.h[5]>>>8&255,e[t+12]=this.h[6]>>>0&255,e[t+13]=this.h[6]>>>8&255,e[t+14]=this.h[7]>>>0&255,e[t+15]=this.h[7]>>>8&255},de.prototype.update=function(e,t,n){var r,i;if(this.leftover){for(i=16-this.leftover,i>n&&(i=n),r=0;i>r;r++)this.buffer[this.leftover+r]=e[t+r];if(n-=i,t+=i,this.leftover+=i,this.leftover<16)return;this.blocks(this.buffer,0,16),this.leftover=0}if(n>=16&&(i=n-n%16,this.blocks(e,t,i),t+=i,n-=i),n){for(r=0;n>r;r++)this.buffer[this.leftover+r]=e[t+r];this.leftover+=n}};var pe=b,ge=y,be=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],ye=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),ve=32,_e=24,me=32,we=16,ke=32,Ee=32,xe=32,Se=32,Be=32,Ae=_e,je=me,Re=we,Me=64,Ce=32,Te=64,Ie=32,Oe=64;t.lowlevel={crypto_core_hsalsa20:f,crypto_stream_xor:d,crypto_stream:h,crypto_stream_salsa20_xor:c,crypto_stream_salsa20:l,crypto_onetimeauth:p,crypto_onetimeauth_verify:g,crypto_verify_16:i,crypto_verify_32:o,crypto_secretbox:b,crypto_secretbox_open:y,crypto_scalarmult:C,crypto_scalarmult_base:T,crypto_box_beforenm:O,crypto_box_afternm:pe,crypto_box:L,crypto_box_open:D,crypto_box_keypair:I,crypto_hash:U,crypto_sign:V,crypto_sign_keypair:F,crypto_sign_open:Z,crypto_secretbox_KEYBYTES:ve,crypto_secretbox_NONCEBYTES:_e,crypto_secretbox_ZEROBYTES:me,crypto_secretbox_BOXZEROBYTES:we,crypto_scalarmult_BYTES:ke,crypto_scalarmult_SCALARBYTES:Ee,crypto_box_PUBLICKEYBYTES:xe,crypto_box_SECRETKEYBYTES:Se,crypto_box_BEFORENMBYTES:Be,crypto_box_NONCEBYTES:Ae,crypto_box_ZEROBYTES:je,crypto_box_BOXZEROBYTES:Re,crypto_sign_BYTES:Me,crypto_sign_PUBLICKEYBYTES:Ce,crypto_sign_SECRETKEYBYTES:Te,crypto_sign_SEEDBYTES:Ie,crypto_hash_BYTES:Oe},t.util||(t.util={},t.util.decodeUTF8=t.util.encodeUTF8=t.util.encodeBase64=t.util.decodeBase64=function(){throw new Error("nacl.util moved into separate package: https://github.com/dchest/tweetnacl-util-js")}),t.randomBytes=function(e){var t=new Uint8Array(e);return te(t,e),t},t.secretbox=function(e,t,n){Q(e,t,n),X(n,t);for(var r=new Uint8Array(me+e.length),i=new Uint8Array(r.length),o=0;o<e.length;o++)r[o+me]=e[o];return b(i,r,r.length,t,n),i.subarray(we)},t.secretbox.open=function(e,t,n){Q(e,t,n),X(n,t);for(var r=new Uint8Array(we+e.length),i=new Uint8Array(r.length),o=0;o<e.length;o++)r[o+we]=e[o];return r.length<32?!1:0!==y(i,r,r.length,t,n)?!1:i.subarray(me)},t.secretbox.keyLength=ve,t.secretbox.nonceLength=_e,t.secretbox.overheadLength=we,t.scalarMult=function(e,t){if(Q(e,t),e.length!==Ee)throw new Error("bad n size");if(t.length!==ke)throw new Error("bad p size");var n=new Uint8Array(ke);return C(n,e,t),n},t.scalarMult.base=function(e){if(Q(e),e.length!==Ee)throw new Error("bad n size");var t=new Uint8Array(ke);return T(t,e),t},t.scalarMult.scalarLength=Ee,t.scalarMult.groupElementLength=ke,t.box=function(e,n,r,i){var o=t.box.before(r,i);return t.secretbox(e,n,o)},t.box.before=function(e,t){Q(e,t),J(e,t);var n=new Uint8Array(Be);return O(n,e,t),n},t.box.after=t.secretbox,t.box.open=function(e,n,r,i){var o=t.box.before(r,i);return t.secretbox.open(e,n,o)},t.box.open.after=t.secretbox.open,t.box.keyPair=function(){var e=new Uint8Array(xe),t=new Uint8Array(Se);return I(e,t),{publicKey:e,secretKey:t}},t.box.keyPair.fromSecretKey=function(e){if(Q(e),e.length!==Se)throw new Error("bad secret key size");var t=new Uint8Array(xe);return T(t,e),{publicKey:t,secretKey:new Uint8Array(e)}},t.box.publicKeyLength=xe,t.box.secretKeyLength=Se,t.box.sharedKeyLength=Be,t.box.nonceLength=Ae,t.box.overheadLength=t.secretbox.overheadLength,t.sign=function(e,t){if(Q(e,t),t.length!==Te)throw new Error("bad secret key size");var n=new Uint8Array(Me+e.length);return V(n,e,e.length,t),n},t.sign.open=function(e,t){if(2!==arguments.length)throw new Error("nacl.sign.open accepts 2 arguments; did you mean to use nacl.sign.detached.verify?");if(Q(e,t),t.length!==Ce)throw new Error("bad public key size");var n=new Uint8Array(e.length),r=Z(n,e,e.length,t);if(0>r)return null;for(var i=new Uint8Array(r),o=0;o<i.length;o++)i[o]=n[o];return i},t.sign.detached=function(e,n){for(var r=t.sign(e,n),i=new Uint8Array(Me),o=0;o<i.length;o++)i[o]=r[o];return i},t.sign.detached.verify=function(e,t,n){if(Q(e,t,n),t.length!==Me)throw new Error("bad signature size");if(n.length!==Ce)throw new Error("bad public key size");var r,i=new Uint8Array(Me+e.length),o=new Uint8Array(Me+e.length);for(r=0;Me>r;r++)i[r]=t[r];for(r=0;r<e.length;r++)i[r+Me]=e[r];return Z(o,i,i.length,n)>=0},t.sign.keyPair=function(){var e=new Uint8Array(Ce),t=new Uint8Array(Te);return F(e,t),{publicKey:e,secretKey:t}},t.sign.keyPair.fromSecretKey=function(e){if(Q(e),e.length!==Te)throw new Error("bad secret key size");for(var t=new Uint8Array(Ce),n=0;n<t.length;n++)t[n]=e[32+n];return{publicKey:t,secretKey:new Uint8Array(e)}},t.sign.keyPair.fromSeed=function(e){if(Q(e),e.length!==Ie)throw new Error("bad seed size");for(var t=new Uint8Array(Ce),n=new Uint8Array(Te),r=0;32>r;r++)n[r]=e[r];return F(t,n,!0),{publicKey:t,secretKey:n}},t.sign.publicKeyLength=Ce,t.sign.secretKeyLength=Te,t.sign.seedLength=Ie,t.sign.signatureLength=Me,t.hash=function(e){Q(e);var t=new Uint8Array(Oe);return U(t,e,e.length),t},t.hash.hashLength=Oe,t.verify=function(e,t){return Q(e,t),0===e.length||0===t.length?!1:e.length!==t.length?!1:0===r(e,0,t,0,e.length)?!0:!1},t.setPRNG=function(e){te=e},function(){var n="undefined"!=typeof self?self.crypto||self.msCrypto:null;if(n&&n.getRandomValues){var r=65536;t.setPRNG(function(e,t){var i,o=new Uint8Array(t);for(i=0;t>i;i+=r)n.getRandomValues(o.subarray(i,i+Math.min(t-i,r)));for(i=0;t>i;i++)e[i]=o[i];$(o)})}else"undefined"!=typeof e&&(n=e("crypto"),n&&n.randomBytes&&t.setPRNG(function(e,t){var r,i=n.randomBytes(t);for(r=0;t>r;r++)e[r]=i[r];$(i)}))}()}("undefined"!=typeof t&&t.exports?t.exports:self.nacl=self.nacl||{})},{crypto:10}],217:[function(e,t,n){(function(e){var t=4294967295;n.encodingLength=function(){return 8},n.encode=function(n,r,i){r||(r=new e(8)),i||(i=0);var o=Math.floor(n/t),s=n-o*t;return r.writeUInt32BE(o,i),r.writeUInt32BE(s,i+4),r},n.decode=function(n,r){r||(r=0),n||(n=new e(4)),r||(r=0);var i=n.readUInt32BE(r),o=n.readUInt32BE(r+4);return i*t+o},n.encode.bytes=8,n.decode.bytes=8}).call(this,e("buffer").Buffer)},{buffer:14}],218:[function(e,t,n){function r(e,t){return i(e,t)?t:(t._index=e.length,e.push(t),t)}function i(e,t){return e[t._index]===t}function o(e,t){if(!i(e,t))return null;var n=e.pop();return n!==t&&(e[t._index]=n,n._index=t._index),t}function s(e,t,n){if(i(e,t)&&i(e,n)){var r=t._index;t._index=n._index,e[t._index]=t,n._index=r,e[n._index]=n}}n.add=r,n.has=i,n.remove=o,n.swap=s},{}],219:[function(e,t){(function(e){function n(e,t){function n(){if(!i){if(r("throwDeprecation"))throw new Error(t);r("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return e.apply(this,arguments)}if(r("noDeprecation"))return e;var i=!1;return n}function r(t){try{if(!e.localStorage)return!1}catch(n){return!1}var r=e.localStorage[t];return null==r?!1:"true"===String(r).toLowerCase()}t.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],220:[function(e,t,n){arguments[4][75][0].apply(n,arguments)},{dup:75}],221:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],222:[function(e,t,n){(function(t,r){function i(e,t){var r={seen:[],stylize:s};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),g(t)?r.showHidden=t:t&&n._extend(r,t),w(r.showHidden)&&(r.showHidden=!1),w(r.depth)&&(r.depth=2),w(r.colors)&&(r.colors=!1),w(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=o),a(r,e,r.depth)}function o(e,t){var n=i.styles[t];return n?"["+i.colors[n][0]+"m"+e+"["+i.colors[n][1]+"m":e}function s(e){return e}function u(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function a(e,t,r){if(e.customInspect&&t&&B(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(r,e);return _(i)||(i=a(e,i,r)),i}var o=f(e,t);if(o)return o;var s=Object.keys(t),g=u(s);if(e.showHidden&&(s=Object.getOwnPropertyNames(t)),S(t)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return c(t);if(0===s.length){if(B(t)){var b=t.name?": "+t.name:"";return e.stylize("[Function"+b+"]","special")}if(k(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(x(t))return e.stylize(Date.prototype.toString.call(t),"date");if(S(t))return c(t)}var y="",v=!1,m=["{","}"];if(p(t)&&(v=!0,m=["[","]"]),B(t)){var w=t.name?": "+t.name:"";y=" [Function"+w+"]"}if(k(t)&&(y=" "+RegExp.prototype.toString.call(t)),x(t)&&(y=" "+Date.prototype.toUTCString.call(t)),S(t)&&(y=" "+c(t)),0===s.length&&(!v||0==t.length))return m[0]+y+m[1];if(0>r)return k(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var E;return E=v?l(e,t,r,g,s):s.map(function(n){return h(e,t,r,g,n,v)}),e.seen.pop(),d(E,y,m)}function f(e,t){if(w(t))return e.stylize("undefined","undefined");if(_(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return v(t)?e.stylize(""+t,"number"):g(t)?e.stylize(""+t,"boolean"):b(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,n,r,i){for(var o=[],s=0,u=t.length;u>s;++s)o.push(C(t,String(s))?h(e,t,n,r,String(s),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,n,r,i,!0))}),o}function h(e,t,n,r,i,o){var s,u,f;if(f=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},f.get?u=f.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):f.set&&(u=e.stylize("[Setter]","special")),C(r,i)||(s="["+i+"]"),u||(e.seen.indexOf(f.value)<0?(u=b(n)?a(e,f.value,null):a(e,f.value,n-1),u.indexOf("\n")>-1&&(u=o?u.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+u.split("\n").map(function(e){return"   "+e}).join("\n"))):u=e.stylize("[Circular]","special")),w(s)){if(o&&i.match(/^\d+$/))return u;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+u}function d(e,t,n){var r=0,i=e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function p(e){return Array.isArray(e)}function g(e){return"boolean"==typeof e}function b(e){return null===e}function y(e){return null==e}function v(e){return"number"==typeof e}function _(e){return"string"==typeof e}function m(e){return"symbol"==typeof e}function w(e){return void 0===e}function k(e){return E(e)&&"[object RegExp]"===j(e)}function E(e){return"object"==typeof e&&null!==e}function x(e){return E(e)&&"[object Date]"===j(e)}function S(e){return E(e)&&("[object Error]"===j(e)||e instanceof Error)}function B(e){return"function"==typeof e}function A(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function j(e){return Object.prototype.toString.call(e)}function R(e){return 10>e?"0"+e.toString(10):e.toString(10)}function M(){var e=new Date,t=[R(e.getHours()),R(e.getMinutes()),R(e.getSeconds())].join(":");return[e.getDate(),L[e.getMonth()],t].join(" ")}function C(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var T=/%[sdj%]/g;n.format=function(e){if(!_(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(i(arguments[n]));return t.join(" ")}for(var n=1,r=arguments,o=r.length,s=String(e).replace(T,function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}}),u=r[n];o>n;u=r[++n])s+=b(u)||!E(u)?" "+u:" "+i(u);return s},n.deprecate=function(e,i){function o(){if(!s){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),s=!0}return e.apply(this,arguments)}if(w(r.process))return function(){return n.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var s=!1;return o};var I,O={};n.debuglog=function(e){if(w(I)&&(I=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!O[e])if(new RegExp("\\b"+e+"\\b","i").test(I)){var r=t.pid;O[e]=function(){var t=n.format.apply(n,arguments);console.error("%s %d: %s",e,r,t)}}else O[e]=function(){};return O[e]},n.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=p,n.isBoolean=g,n.isNull=b,n.isNullOrUndefined=y,n.isNumber=v,n.isString=_,n.isSymbol=m,n.isUndefined=w,n.isRegExp=k,n.isObject=E,n.isDate=x,n.isError=S,n.isFunction=B,n.isPrimitive=A,n.isBuffer=e("./support/isBuffer");var L=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",M(),n.format.apply(n,arguments))},n.inherits=e("inherits"),n._extend=function(e,t){if(!t||!E(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,e("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":221,_process:154,inherits:220}],223:[function(e,t){function n(e,t){var o,s=0,t=t||0,u=0,a=t,f=e.length;do{if(a>=f)return n.bytes=0,void(n.bytesRead=0);o=e[a++],s+=28>u?(o&i)<<u:(o&i)*Math.pow(2,u),u+=7}while(o>=r);return n.bytes=a-t,s}t.exports=n;var r=128,i=127},{}],224:[function(e,t,n){arguments[4][85][0].apply(n,arguments)},{dup:85}],225:[function(e,t,n){arguments[4][86][0].apply(n,arguments)},{"./decode.js":223,"./encode.js":224,"./length.js":226,dup:86}],226:[function(e,t,n){arguments[4][87][0].apply(n,arguments)},{dup:87}],227:[function(e,t){(function(n){function r(e,t){if(!(this instanceof r))return new r(e,t);if(!e)throw new Error("SignalHub instance required");t||(t={}),f.EventEmitter.call(this),this.setMaxListeners(0),this.hub=e,this.wrtc=t.wrtc,this.channelConfig=t.channelConfig,this.config=t.config,this.stream=t.stream,this.wrap=t.wrap||function(e){return e},this.unwrap=t.unwrap||function(e){return e},this.offerConstraints=t.offerConstraints||{},this.maxPeers=t.maxPeers||1/0,this.me=t.uuid||l(),d("my uuid:",this.me),this.remotes={},this.peers=[],this.closed=!1,o(this,e)}function i(e,t,n){function r(){if(!e.closed&&!s&&o.length){s=!0;var t={from:e.me,signal:o.shift()};t=e.wrap(t,n),e.hub.broadcast(n,t,function(){s=!1,r()})}}t.on("connect",function(){d("connected to peer",n),e.peers.push(t),e.emit("peer",t,n),e.emit("connect",t,n)});var i=h(function(r){d("disconnected from peer",n,r),e.remotes[n]===t&&delete e.remotes[n];var i=e.peers.indexOf(t);i>-1&&e.peers.splice(i,1),e.emit("disconnect",t,n)}),o=[],s=!1;t.on("signal",function(e){o.push(e),r()}),t.on("error",i),t.once("close",i)}function o(e,t){t.subscribe("all").pipe(c.obj(function(t,n,r){if(t=e.unwrap(t,"all"),e.closed||!t)return r();if(d("/all",t),t.from===e.me)return d("skipping self",t.from),r();if("connect"===t.type){if(e.peers.length>=e.maxPeers)return d("skipping because maxPeers is met",t.from),r();if(e.remotes[t.from])return d("skipping existing remote",t.from),r();d("connecting to new peer (as initiator)",t.from);var o=new u({wrtc:e.wrtc,initiator:!0,channelConfig:e.channelConfig,config:e.config,stream:e.stream,offerConstraints:e.offerConstraints});i(e,o,t.from),e.remotes[t.from]=o}r()})),t.subscribe(e.me).once("open",s.bind(null,e,t)).pipe(c.obj(function(t,n,r){if(t=e.unwrap(t,"all"),e.closed||!t)return r();var o=e.remotes[t.from];if(!o){if(!t.signal||"offer"!==t.signal.type)return d("skipping non-offer",t),r();d("connecting to new peer (as not initiator)",t.from),o=e.remotes[t.from]=new u({wrtc:e.wrtc,channelConfig:e.channelConfig,config:e.config,stream:e.stream,offerConstraints:e.offerConstraints}),i(e,o,t.from)}d("signalling",t.from,t.signal),o.signal(t.signal),r()}))}function s(e,t){if(!(e.closed||e.peers.length>=e.maxPeers)){var n={type:"connect",from:e.me};n=e.wrap(n,"all"),t.broadcast("all",n,function(){setTimeout(s.bind(null,e,t),Math.floor(2e3*Math.random())+(e.peers.length?13e3:3e3))})}}var u=e("simple-peer"),a=e("inherits"),f=e("events"),c=e("through2"),l=e("cuid"),h=e("once"),d=e("debug")("webrtc-swarm");t.exports=r,a(r,f.EventEmitter),r.WEBRTC_SUPPORT=u.WEBRTC_SUPPORT,r.prototype.close=function(e){if(!this.closed){this.closed=!0,e&&this.once("close",e);var t=this;this.hub.close(function(){var e=t.peers.length;if(e>0){var r=0;t.peers.forEach(function(i){i.once("close",function(){++r===e&&t.emit("close")}),n.nextTick(function(){i.destroy()})})}else t.emit("close")})}}}).call(this,e("_process"))},{_process:154,cuid:29,debug:30,events:41,inherits:75,once:149,"simple-peer":204,through2:213}],228:[function(e,t){function n(e,t){function r(){for(var t=new Array(arguments.length),n=0;n<t.length;n++)t[n]=arguments[n];var r=e.apply(this,t),i=t[t.length-1];return"function"==typeof r&&r!==i&&Object.keys(i).forEach(function(e){r[e]=i[e]}),r}if(e&&t)return n(e)(t);if("function"!=typeof e)throw new TypeError("need wrapper function");return Object.keys(e).forEach(function(t){r[t]=e[t]}),r}t.exports=n},{}],229:[function(e,t){"use strict";function n(e,t){for(var n=0;n<e.length;n++)t(e[n])}function r(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function i(e,t,n){var r=e;return c(t)?(n=t,"string"==typeof e&&(r={uri:e})):r=h(t,{uri:e}),r.callback=n,r}function o(e,t,n){return t=i(e,t,n),s(t)}function s(e){function t(){4===c.readyState&&setTimeout(s,0)}function n(){var e=void 0;if(e=c.response?c.response:c.responseText||u(c),m)try{e=JSON.parse(e)}catch(t){}return e}function i(e){return clearTimeout(p),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,f(e,w)}function s(){if(!d){var t;clearTimeout(p),t=e.useXDR&&void 0===c.status?200:1223===c.status?204:c.status;var r=w,i=null;return 0!==t?(r={body:n(),statusCode:t,method:b,headers:{},url:g,rawRequest:c},c.getAllResponseHeaders&&(r.headers=l(c.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),f(i,r,r.body)}}if("undefined"==typeof e.callback)throw new Error("callback argument missing");var a=!1,f=function(t,n,r){a||(a=!0,e.callback(t,n,r))},c=e.xhr||null;c||(c=e.cors||e.useXDR?new o.XDomainRequest:new o.XMLHttpRequest);var h,d,p,g=c.url=e.uri||e.url,b=c.method=e.method||"GET",y=e.body||e.data,v=c.headers=e.headers||{},_=!!e.sync,m=!1,w={body:void 0,headers:{},statusCode:0,method:b,url:g,rawRequest:c};if("json"in e&&e.json!==!1&&(m=!0,v.accept||v.Accept||(v.Accept="application/json"),"GET"!==b&&"HEAD"!==b&&(v["content-type"]||v["Content-Type"]||(v["Content-Type"]="application/json"),y=JSON.stringify(e.json===!0?y:e.json))),c.onreadystatechange=t,c.onload=s,c.onerror=i,c.onprogress=function(){},c.onabort=function(){d=!0},c.ontimeout=i,c.open(b,g,!_,e.username,e.password),_||(c.withCredentials=!!e.withCredentials),!_&&e.timeout>0&&(p=setTimeout(function(){if(!d){d=!0,c.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",i(e)}},e.timeout)),c.setRequestHeader)for(h in v)v.hasOwnProperty(h)&&c.setRequestHeader(h,v[h]);else if(e.headers&&!r(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(c.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(c),c.send(y||null),c}function u(e){if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;return""!==e.responseType||t?null:e.responseXML}function a(){}var f=e("global/window"),c=e("is-function"),l=e("parse-headers"),h=e("xtend");t.exports=o,o.XMLHttpRequest=f.XMLHttpRequest||a,o.XDomainRequest="withCredentials"in new o.XMLHttpRequest?o.XMLHttpRequest:f.XDomainRequest,n(["get","put","post","patch","head","delete"],function(e){o["delete"===e?"del":e]=function(t,n,r){return n=i(t,n,r),n.method=e.toUpperCase(),s(n)}})},{"global/window":48,"is-function":77,"parse-headers":150,xtend:230}],230:[function(e,t,n){arguments[4][134][0].apply(n,arguments)},{dup:134}],231:[function(e,t){function n(e,t){if(!(this instanceof n))return new n(e,t);var r=this;o.EventEmitter.call(this),this.opts=t||{},this.db=this.opts.db||f(),this.drive=a(this.db),this.archive=this.drive.createArchive(e,this.opts),this.key=this.archive.key.toString("hex"),this.privateKey=this.archive.privateKey;var i=u("dat-"+this.archive.key.toString("hex"),t.signalhub||"https://signalhub.mafintosh.com");this.swarm=this.swarm||s(i),r.join(),this._open(e)}var r=e("util").inherits,i=e("pump"),o=e("events"),s=e("webrtc-swarm"),u=e("signalhub"),a=e("hyperdrive"),f=e("memdb");t.exports=n,r(n,o.EventEmitter),n.prototype._open=function(){var e=this;this.archive.open(function(){e.emit("ready")})},n.prototype.join=n.prototype.resume=function(){this.swarm.on("peer",this._replicate.bind(this))},n.prototype._replicate=function(e){var t=this.archive.replicate({upload:!0,download:!0});i(e,t,e)},n.prototype.leave=n.prototype.pause=function(){this.swarm.removeListener("peer",this._replicate)},n.prototype.destroy=n.prototype.close=function(){var e=this;e.swarm.close(function(){e.archive.close(function(){e.db.close(function(){e.emit("close")})})})}},{events:41,hyperdrive:71,memdb:105,pump:167,signalhub:191,util:222,"webrtc-swarm":227}],232:[function(e,t){function n(e){if(!(this instanceof n))return new n(e);o.EventEmitter.call(this);this.opts=e||{},this.repos=[]}var r=e("util").inherits,i=e("xtend"),o=e("events"),s=e("./repo");t.exports=n,r(n,o.EventEmitter),n.prototype.get=function(e){return this.repos.filter(function(t){return e.toString("hex")===t.key.toString("hex");

})[0]},n.prototype.add=function(e,t,n){function r(){u.destroyed||("function"==typeof n&&n(a),u.emit("repo",a))}function o(){a.removeListener("ready",r),a.removeListener("close",o)}var u=this;if(u.destroyed)throw new Error("client is destroyed");if("function"==typeof t)return u.add(e,null,t);if("function"==typeof e)return u.add(null,null,e);t||(t={});var a=new s(e,i(this.opts,t));u.repos.push(a),a.once("ready",r),a.once("close",o)},n.prototype.destroy=n.prototype.close=function(){for(;this.repos.length;){var e=this.repos.pop();e.close()}this.destroyed=!0,this.emit("close")}},{"./repo":231,events:41,util:222,xtend:230}]},{},[232])(232)});